

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="ovwnX0ej2kps4UuJ9NOzNjJcLOQD8JPDLNhe-hMYTMk" />
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NKZBMHZ');</script>
  <!-- End Google Tag Manager -->
  
  <title>Changelog &mdash; StackStorm 2.7dev documentation</title>
  

  <link rel="shortcut icon" href="_static/favicon.ico?v4"/>
  
  
    <link rel="canonical" href="https://docs.stackstorm.com/changelog.html"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="StackStorm 2.7dev documentation" href="index.html"/>
        <link rel="next" title="Upgrade Notes" href="upgrade_notes.html"/>
        <link rel="prev" title="Pack Testing" href="development/pack_testing.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NKZBMHZ"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html">
            <svg class="logo"
                xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                viewBox="0 0 680 120"
                xml:space="preserve">
              <polygon points="116,0 56.8,0 116,48.6"/>
              <polygon points="0.7,120 64.7,120 0.7,69.9"/>
              <path d="M450.756 55.793l-8.824-2.206c-4.584-1.161-7.865-2.744-9.85-4.746c-1.982-1.999-2.977-4.727-2.977-8.181 c0-4.549 1.523-8.071 4.568-10.569c3.045-2.496 7.336-3.744 12.875-3.744c5.881 0 10.4 1.5 13.7 4.4 c3.248 2.9 4.9 7.1 5 12.44h7.031c-0.104-7.25-2.385-12.892-6.85-16.929c-4.465-4.034-10.664-6.053-18.596-6.053 c-7.49 0-13.475 1.846-17.955 5.54c-4.48 3.693-6.721 8.603-6.721 14.723c0 5.5 1.5 9.8 4.4 12.9 c2.957 3.1 8.3 5.6 16 7.567l7.184 1.796c7.047 1.8 11.8 3.8 14.1 6.104c2.361 2.3 3.5 5.5 3.5 9.8 c0 4.652-1.686 8.303-5.053 10.954c-3.369 2.649-7.996 3.975-13.879 3.975c-6.701 0-11.9-1.641-15.594-4.924 s-5.574-7.9-5.643-13.851h-6.926v0.512c0 7.9 2.4 13.9 7.3 18.136c4.855 4.2 11.8 6.3 20.8 6.3 c8.035 0 14.371-1.948 19.006-5.848c4.635-3.897 6.951-9.233 6.951-16.004c0-5.883-1.76-10.499-5.283-13.853 C465.598 60.8 459.5 58 450.8 55.8"/>
              <path d="M494.566 27.527h-6.311v15.648h-7.438v5.13h7.438v39.755c0 4.2 0.7 7.1 1.9 8.6 s3.523 2.4 6.7 2.386c1.129 0 2.328-0.096 3.592-0.281c1.268-0.189 2.666-0.489 4.207-0.899l-0.051-5.027 c-1.744 0.377-3.027 0.625-3.85 0.745c-0.82 0.119-1.555 0.179-2.203 0.179c-1.508 0-2.549-0.375-3.131-1.13 c-0.582-0.751-0.871-2.29-0.871-4.616V48.305h10.105v-5.13h-10.105V27.527z"/>
              <path d="M536.99 41.79c-7.934 0-14.082 2.505-18.443 7.514c-4.359 5.01-6.541 12.081-6.541 21.2 c0 9.1 2.2 16.1 6.5 21.11c4.361 5 10.5 7.5 18.4 7.465c8.002 0 14.189-2.496 18.57-7.491 c4.377-4.992 6.566-12.02 6.566-21.084c0-9.132-2.199-16.203-6.592-21.213C551.141 44.3 545 41.8 537 41.8 M550.686 87.6 c-3.215 4.001-7.779 6.001-13.695 6.001c-5.848 0-10.389-2.016-13.619-6.052c-3.234-4.035-4.85-9.713-4.85-17.032 c0-7.352 1.615-13.047 4.85-17.083c3.23-4.035 7.771-6.053 13.619-6.053c5.916 0 10.5 2 13.7 6 c3.217 4 4.8 9.7 4.8 17.109S553.902 83.6 550.7 87.6"/>
              <path d="M586.008 44.508c-2.789 1.812-4.969 4.549-6.541 8.207v-9.541h-6.105v54.531h6.514V67.644 c0-6.395 1.359-11.2 4.078-14.414c2.719-3.215 6.797-4.823 12.234-4.823h0.822V41.79h-0.717 C592.221 41.8 588.8 42.7 586 44.5"/>
              <path d="M675.166 46.227c-2.926-2.957-7.346-4.437-13.262-4.437c-3.898 0-7.346 0.915-10.338 2.7 s-5.395 4.489-7.207 7.977c-0.891-3.42-2.68-6.062-5.377-7.925c-2.699-1.864-6.08-2.796-10.143-2.796 c-3.791 0-7.162 0.897-10.113 2.693c-2.957 1.795-5.355 4.369-7.199 7.72v-9.029h-5.9v54.532h6.311V64.001 c0-4.925 1.477-8.907 4.428-11.954c2.955-3.042 6.82-4.566 11.6-4.566c3.893 0 6.8 1.1 8.7 3.3 c1.879 2.2 2.8 5.5 2.8 10.054v36.886h6.309V63.54c0-4.821 1.453-8.723 4.361-11.696c2.906-2.976 6.771-4.463 11.592-4.463 c4.07 0 7 1 8.8 2.976c1.775 2 2.7 5.3 2.7 9.85v37.5h6.412V59.692 C679.551 53.7 678.1 49.2 675.2 46.2"/>
              <path d="M118.944 67.886c-2.638-4.731-7.001-9.521-13.085-14.393L41.482 0.8 c-4.365 0.046-7.895 0.271-10.581 0.677c-2.734 0.466-5.502 1.227-8.287 2.282c-7.151 2.9-12.714 7.208-16.671 12.9 C1.991 22.4 0 29 0 36.76c0 2.8 0.4 5.8 1.2 8.973c0.762 3.2 1.8 6.1 3.2 8.8 c1.728 3.2 4.6 7 8.7 11.351c4.111 4.5 9.7 9.6 16.7 15.438c7.149 6.1 14.6 11.9 22.2 17.6 c4.731 3.4 8.8 6.4 12.3 8.825c3.447 2.4 9.3 6.5 17.5 12.247c3.098-0.096 5.736-0.263 7.912-0.451 c1.932-0.193 3.863-0.546 5.789-1.013c1.36-0.283 3.006-0.828 4.933-1.642c7.011-2.849 12.514-7.222 16.523-13.117 c4.048-5.868 6.093-12.454 6.093-19.776C122.984 78.1 121.6 72.7 118.9 67.9"/>
              <path d="M182.358 53.177c-7.319-1.88-12.124-3.735-14.416-5.566c-2.292-1.829-3.435-4.181-3.435-7.054 c0-2.838 1.297-5.215 3.896-7.13c2.599-1.915 5.952-2.873 10.056-2.873c4.958 0 8.9 1.2 11.9 3.6 c2.958 2.4 4.6 5.8 4.8 10.056l11.953-0.051c-0.07-7.352-2.559-13.192-7.466-17.519c-4.908-4.327-11.483-6.49-19.725-6.49 c-8.482 0-15.279 1.976-20.391 5.926c-5.112 3.95-7.669 9.073-7.669 15.363c0 5.9 1.7 10.6 5.2 14 c3.489 3.4 9.5 6.3 17.9 8.49c0.754 0.2 1.9 0.4 3.3 0.822c6.839 1.7 11.2 3.4 13.2 5.2 c1.197 1.1 2.2 2.4 2.9 3.924c0.77 1.5 1.2 2.9 1.2 4.079c0 3.044-1.375 5.609-4.128 7.7 c-2.754 2.087-6.285 3.131-10.595 3.131c-5.711 0-10.234-1.351-13.567-4.053c-3.336-2.702-5.174-6.498-5.514-11.389h-12.212 c0.378 8.5 3.2 15 8.4 19.494c5.214 4.5 12.5 6.8 21.9 6.771c8.893 0 15.997-2.163 21.315-6.49 c5.319-4.324 7.977-10.045 7.977-17.16c0-5.882-1.7-10.465-5.104-13.746C200.73 59 193.5 56 182.4 53.2"/>
              <path d="M233.915 27.117h-11.646v15.236h-7.9v8.721h7.9v34.012c0 5 0.9 8.5 2.8 10.4 c1.899 1.9 5.2 2.9 9.8 2.924c1.366 0 3.726-0.171 7.078-0.513c0.511-0.035 0.905-0.068 1.18-0.103v-9.335l-2.308 0.1 c-0.239 0-0.609 0.018-1.105 0.051c-0.494 0.035-0.895 0.053-1.206 0.053c-1.777 0-2.99-0.333-3.639-1 c-0.651-0.668-0.976-2.01-0.976-4.027V51.074h9.234v-8.721h-9.234V27.117z"/>
              <path d="M299.373 89.498c-1.267 0-2.147-0.325-2.643-0.977c-0.497-0.648-0.745-2.032-0.745-4.153V56.922 c0-5.404-1.871-9.481-5.617-12.234c-3.744-2.754-9.293-4.13-16.647-4.13c-7.011 0-12.541 1.599-16.594 4.8 c-4.053 3.2-6.081 7.551-6.081 13.058v0.923h11.134v-0.41c0-2.805 0.957-4.959 2.872-6.465c1.916-1.505 4.667-2.257 8.259-2.257 c3.865 0 6.7 0.6 8.6 1.897c1.845 1.3 2.8 3.2 2.8 5.9c0 3.283-3.711 5.404-11.133 6.4 c-0.513 0.069-0.908 0.12-1.18 0.153c-8.893 1.129-15.03 3.104-18.416 5.924c-3.386 2.822-5.079 7.038-5.079 12.6 c0 5.1 1.6 9.1 4.7 12.056c3.164 2.9 7.5 4.4 13.1 4.36c3.626 0 7.027-0.794 10.208-2.386 c3.18-1.591 5.899-3.838 8.158-6.746c0.068 2.8 1 4.9 2.7 6.311c1.726 1.4 4.4 2.1 7.9 2.1 c0.925 0 1.89-0.069 2.899-0.205c1.009-0.139 2.044-0.345 3.104-0.616v-8.567c-0.718 0.068-1.224 0.112-1.514 0.1 C299.876 89.5 299.6 89.5 299.4 89.5 M284.547 76.878c0 3.831-1.436 6.976-4.31 9.4 c-2.873 2.464-6.481 3.694-10.825 3.694c-2.873 0-5.095-0.692-6.668-2.079c-1.574-1.384-2.36-3.341-2.36-5.874 c0-2.256 0.667-4.077 2.001-5.463c1.333-1.384 3.368-2.333 6.105-2.847c0.922-0.171 2.36-0.41 4.31-0.717 c5.369-0.787 9.284-1.814 11.747-3.079V76.878z"/>
              <path d="M341.311 86.086c-2.174 2-5.021 3.002-8.542 3.002c-4.411 0-7.78-1.634-10.105-4.9s-3.489-8.01-3.489-14.236 c0-6.359 1.174-11.173 3.515-14.439c2.342-3.267 5.805-4.901 10.389-4.901c3.419 0 6.2 1 8.3 2.8 c2.119 1.9 3.3 4.5 3.6 7.774h11.541c-0.34-6.43-2.643-11.483-6.9-15.161c-4.256-3.676-9.891-5.514-16.902-5.514 c-8.036 0-14.337 2.625-18.902 7.874c-4.566 5.25-6.849 12.492-6.849 21.726c0 9 2.2 16.2 6.6 21.4 c4.411 5.3 10.4 7.9 18 7.899c7.355 0 13.246-1.957 17.675-5.872c4.428-3.917 6.916-9.312 7.463-16.186h-11.389 C344.822 81.2 343.5 84.1 341.3 86.1"/>
              <polygon points="414,42.4 399.7,42.4 377.9,64.9 377.9,22.1 366.4,22.1 366.4,97.7 377.9,97.7 377.9,79.2 385.8,71.2 400.7,97.7 414.4,97.7 394,62.7"/>
            </svg>
          </a>
        
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <p class="caption"><span class="caption-text">はじめに</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">StackStorm 概要</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#about">About</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#how-it-works">How it Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#what-s-next">What’s Next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install/index.html">インストールと設定</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install/overview.html">Reference Deployment Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/system_requirements.html">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/deb.html">Ubuntu 14.04 / 16.04</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/rhel7.html">RHEL 7 / CentOS 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/rhel6.html">RHEL 6 / CentOS 6</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/docker.html">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/ansible.html">Ansible Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/bwc.html">Extreme Workflow Composer</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/config/index.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/upgrades.html">Upgrades</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/uninstall.html">Uninstall</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="start.html">クイックスタート</a><ul>
<li class="toctree-l2"><a class="reference internal" href="start.html#explore-st2-with-cli">Explore StackStorm with CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#authenticate">Authenticate</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#work-with-actions">Work with Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#define-a-rule">Define a Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#deploy-a-rule">Deploy a Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#deploy-examples">Deploy Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#datastore">Datastore</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">基本機能</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="actions.html#managing-and-running-actions">Managing and Running Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#action-runners">Action Runners</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#writing-custom-actions">Writing Custom Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#built-in-parameters">Built-in Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#overriding-runner-parameters">Overriding Runner Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#environment-variables-available-to-actions">Environment Variables Available to Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#converting-existing-scripts-into-actions">Converting Existing Scripts into Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#writing-custom-python-actions">Writing Custom Python Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#pre-defined-actions">Pre-defined Actions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors and Triggers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#sensors">Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#triggers">Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#internal-triggers">Internal Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#creating-a-sensor">Creating a Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#how-sensors-are-run">How Sensors are Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#sensor-service">Sensor Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#common-operations">Common Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#datastore-management-operations">Datastore Management Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#running-your-first-sensor">Running Your First Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#debugging-a-sensor-from-a-pack">Debugging a Sensor From a Pack</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rules.html">Rules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rules.html#rule-structure">Rule Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#trigger">Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#criteria">Criteria</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#critera-comparison">Critera Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#advanced-comparison">Advanced Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#action">Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#variable-interpolation">Variable Interpolation</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#managing-rules">Managing Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#rule-location">Rule Location</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#testing-rules">Testing Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html#timers">Timers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="actionchain.html">ActionChain</a></li>
<li class="toctree-l2"><a class="reference internal" href="mistral.html">Mistral</a></li>
<li class="toctree-l2"><a class="reference internal" href="mistral_yaql.html">Mistral + YAQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="mistral_jinja.html">Mistral + Jinja</a></li>
<li class="toctree-l2"><a class="reference internal" href="cloudslang.html">CloudSlang</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="packs.html">Packs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="packs.html#what-is-a-pack">What is a Pack?</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#managing-packs">Managing Packs</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#discovering-packs">Discovering Packs</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#installing-a-pack">Installing a Pack</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#configuring-a-pack">Configuring a Pack</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#developing-a-pack">Developing a Pack</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#advanced-topics">Advanced Topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webhooks.html">Webhooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#sensors-vs-webhooks">Sensors vs Webhooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#authentication">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#request-body">Request Body</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#registering-a-webhook">Registering a Webhook</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#using-a-generic-webhook">Using a Generic Webhook</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#listing-registered-webhooks">Listing Registered Webhooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#my-webhook-isn-t-working">My Webhook Isn’t Working!</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#when-not-to-use-webhooks">When Not to Use Webhooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="datastore.html">Datastore</a><ul>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#storing-and-retrieving-key-value-pairs-via-cli">Storing and Retrieving Key-Value Pairs via CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#loading-key-value-pairs-from-a-file">Loading Key-Value Pairs from a File</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#scoping-datastore-items">Scoping Datastore Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#setting-a-key-value-pair-ttl">Setting a Key-Value Pair TTL</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#storing-and-retrieving-via-python-client">Storing and Retrieving via Python Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#referencing-key-value-pairs-in-rule-definitions">Referencing Key-Value Pairs in Rule Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#securing-secrets-admin-only">Securing Secrets (admin only)</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#storing-secrets">Storing Secrets</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#security-notes">Security notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="chatops/index.html">ChatOps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html">What is ChatOps?</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#stackstorm-flavored-chatops">StackStorm-flavored ChatOps</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#adding-new-chatops-commands">Adding New ChatOps Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/aliases.html">Action Aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/notifications.html">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/pack_deploy.html">Pack Deployment</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">応用トピック</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#configuring-the-service">Configuring the Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#auth-backends">Auth Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#ldap-enterprise-edition">LDAP (Enterprise Edition)</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#running-the-service">Running the Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#api-keys">API Keys</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rbac.html">Role Based Access Control</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#terminology">Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#system-roles">System Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#how-it-works">How it Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#enabling-rbac">Enabling RBAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#defining-roles-and-assignments">Defining Roles and Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#applying-rbac-definitions">Applying RBAC Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#automatically-granting-roles-based-on-ldap-group-membership">Automatically Granting Roles Based on LDAP Group Membership</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#using-rbac-example">Using RBAC Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inquiries.html">Inquiries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#new-core-ask-action">New <code class="docutils literal"><span class="pre">core.ask</span></code> Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#using-core-ask-in-a-workflow">Using <code class="docutils literal"><span class="pre">core.ask</span></code> in a Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#notifying-users-of-inquiries-using-rules">Notifying Users of Inquiries using Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#responding-to-an-inquiry">Responding to an Inquiry</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#securing-inquiries">Securing Inquiries</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#garbage-collection-for-inquiries">Garbage Collection for Inquiries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference/index.html">References and Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference/sharing_code_sensors_actions.html">Sharing code between Sensors and Python Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/cli.html">CLI Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/pack_configs.html">Pack Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/packs.html">Create and Contribute a Pack</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/pack_management_transition.html">Pack Management Transition</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/action_output_streaming.html">Real-time Action Output Streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/jinja.html">Jinja</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/policies.html">Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/runners.html">Action Runners</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/traces.html">Traces</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/client_libraries.html">Client Libraries and Language Bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/ha.html">High Availability Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/api.html">REST API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/monitoring.html">System Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/sensor_partitioning.html">Partitioning Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/history.html">History and Audit</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/secrets_masking.html">Secrets Masking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/self_verification.html">Running Self-Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/basic_chatops_troubleshooting.html">ChatOps Troubleshooting Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/rules.html">Rule is not Being Matched</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/sensors.html">Sensor Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/mistral.html">Mistral Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/ssh.html">SSH Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/database.html">Database Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/rest_api_access.html">REST API access</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/tuning_action_runner_dispatcher_pool.html">Tuning Action Runner Dispatcher Pool Size</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/purging_old_data.html">Purging Old Operational Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/private_networks.html">WebUI Access on Private Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/submit_debug_info.html">Submitting Debugging Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/debug_mode.html">Enabling Debug Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/ask_for_support.html">Ask for help!</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/webhooks.html">Troubleshooting Webhooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#contributing">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#setting-up-a-development-environment">Setting up a Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#general-contribution-guidelines">General Contribution Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#code-style-guide">Code Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#deprecation-policy">Deprecation Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#general-coding-guidelines">General Coding Guidelines</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Release Notes</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#in-development">in development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#january-19-2018">2.6.0 - January 19, 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="#december-14-2017">2.5.1 - December 14, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="#october-25-2017">2.5.0 - October 25, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="#september-12-2017">2.4.1 - September 12, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="#august-23-2017">2.4.0 - August 23, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="#july-28-2017">2.3.2 - July 28, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="#july-07-2017">2.3.1 - July 07, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="#june-19-2017">2.3.0 - June 19, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="#april-3-2017">2.2.1 - April 3, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="#february-27-2017">2.2.0 - February 27, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="#december-16-2016">2.1.1 - December 16, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#december-05-2016">2.1.0 - December 05, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#september-30-2016">2.0.1 - September 30, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#august-31-2016">2.0.0 - August 31, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#august-8-2016">1.6.0 - August 8, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#july-13-2016">1.5.1 - July 13, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#june-24-2016">1.5.0 - June 24, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#april-18-2016">1.4.0 - April 18, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#february-12-2016">1.3.2 - February 12, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#january-25-2016">1.3.1 - January 25, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#january-22-2016">1.3.0 - January 22, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="#december-07-2015">1.2.0 - December 07, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#november-13-2015">1.1.1 - November 13, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#october-27-2015">1.1.0 - October 27, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#september-09-2015">0.13.2 - September 09, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#august-28-2015">0.13.1 - August 28, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#august-24-2015">0.13.0 - August 24, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#august-11-2015">0.12.2 - August 11, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#july-31-2015">0.12.1 - July 31, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#july-20-2015">0.12.0 - July 20, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#july-2-2015">0.11.6 - July 2, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#july-1-2015">0.11.5 - July 1, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#june-30-2015">0.11.4 - June 30, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#june-16-2015">0.11.3 - June 16, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#june-12-2015">0.11.2 - June 12, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#june-8-2015">0.11.1 - June 8, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#june-5-2015">0.11.0 - June 5, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-9-2-may-26-2015">v0.9.2 - May 26, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-9-1-may-12-2015">v0.9.1 - May 12, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-9-0-april-29-2015">v0.9.0 - April 29, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-3-march-23-2015">v0.8.3 - March 23, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-2-march-10-2015">v0.8.2 - March 10, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-1-march-10-2015">v0.8.1 - March 10, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-8-0-march-2-2015">v0.8.0 - March 2, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-7-january-16-2015">v0.7 - January 16, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-6-0-december-8-2014">v0.6.0 - December 8, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="#v0-5-1-november-3rd-2014">v0.5.1 - November 3rd, 2014</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upgrade_notes.html">Upgrade Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-6">StackStorm v2.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-5">StackStorm v2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-4">StackStorm v2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-3">StackStorm v2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-2">StackStorm v2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-1">StackStorm v2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-0">StackStorm v2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-6">StackStorm v1.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-5">StackStorm v1.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-4">StackStorm v1.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-3">StackStorm v1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-2">StackStorm v1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-1">StackStorm v1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v-0-11">StackStorm v 0.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v0-9">StackStorm v0.9</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#release-history">Release History</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">StackStorm</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs v2.7dev </a> &raquo;</li>
        
      <li>Changelog</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/StackStorm/st2docs/blob/master/docs/source/changelog.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document">
            <div id="version-warning" class="admonition warning hide">
              <p class="first admonition-title">Note</p>
              <p class="last">
                The documentation you're currently reading is for version 2.7dev.
                Click <a href="/">here</a> to view documentation for the latest stable version.
              </p>
            </div>
            
  <div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="in-development">
<h2>in development<a class="headerlink" href="#in-development" title="Permalink to this headline">¶</a></h2>
<div class="section" id="added">
<h3>Added<a class="headerlink" href="#added" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Update <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">tail</span></code> command so it supports double nested workflows (workflow -&gt;
workflow -&gt; execution). Previously, only top-level executions and single nested workflows
(workflow -&gt; execution) were supported. (improvement) #3962 #3960</p>
</li>
<li><p class="first">Add support for utf-8 / unicode characters in the pack config files. (improvement) #3980 #3989</p>
<p>Contributed by &#64;sumkire.</p>
</li>
</ul>
</div>
<div class="section" id="changed">
<h3>Changed<a class="headerlink" href="#changed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Modified RabbitMQ connection error message to make clear that it is an MQ connection issue. #3992</li>
<li>Additional refactor which makes action runners fully standalone and re-distributable Python
packages. Also add support for multiple runners (runner modules) inside a single Python package
and consolidate Python packages from two to one for the following runners: local runners, remote
runners, windows runners. (improvement) #3999</li>
<li>Upgrade eventlet library to the latest stable version (0.22.1) (improvement) #4007</li>
<li>Increase maximum retry delay for <code class="docutils literal"><span class="pre">action.retry</span></code> policy from 5 seconds to 120 seconds. Because
of the way retries are currently implemented (they are not st2notifier service restart safe),
long retry delays are not recommended. For more information on this limitation please refer to
the documentation - <a class="reference external" href="https://docs.stackstorm.com/reference/policies.html#retry">https://docs.stackstorm.com/reference/policies.html#retry</a>.
#3630</li>
</ul>
</div>
<div class="section" id="fixed">
<h3>Fixed<a class="headerlink" href="#fixed" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix Python runner actions and <code class="docutils literal"><span class="pre">Argument</span> <span class="pre">list</span> <span class="pre">too</span> <span class="pre">long</span></code> error when very large parameters are
passed into the action. The fix utilizes <code class="docutils literal"><span class="pre">stdin</span></code> to pass parameters to the Python action wrapper
process instead of CLI argument list. (bug fix) #1598 #3976</p>
</li>
<li><p class="first">Fix a regression in <code class="docutils literal"><span class="pre">POST</span> <span class="pre">/v1/webhooks/&lt;webhook</span> <span class="pre">name&gt;</span></code> API endpoint introduced in v2.4.0
and add back support for arrays. In 2.4.0 support for arrays was inadvertently removed and
only objects were supported. Keep in mind that this only applies to custom user-defined
webhooks and system <code class="docutils literal"><span class="pre">st2</span></code> webhook still requires input to be an object (dictionary).
(bug fix) #3956 #3955</p>
</li>
<li><p class="first">Fix a bug in the CLI causing <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">pause</span></code> and <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">resume</span></code>
to not work. (bugfix) #4001</p>
<p>Contributed by Nick Maludy (Encore Technologies).</p>
</li>
</ul>
</div>
</div>
<div class="section" id="january-19-2018">
<h2>2.6.0 - January 19, 2018<a class="headerlink" href="#january-19-2018" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Added<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">get_user_info</span></code> method to action and sensor service. With this method, user can
retrieve information about the user account which is used to perform datastore operations inside
the action and sensor service. (new feature) #3831</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">/api/v1/user</span></code> API endpoint. This API endpoint is only available to the authenticated
users and returns various metadata on the authenticated user (which method did the user use to
authenticate, under which username the user is authenticated, which RBAC roles are assignment to
this user in case RBAC is enabled, etc.) (new feature) #3831</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">/api/v1/match_and_execute</span></code> API endpoint matches a single alias and executes multiple times
if the alias format has a <code class="docutils literal"><span class="pre">match_multiple</span></code> key set to <code class="docutils literal"><span class="pre">true</span></code>. Please refer to the
documentation for usage. #3884</p>
<p>Contributed by &#64;ahubl-mz.</p>
</li>
<li><p class="first">Add ability to share common code between python sensors and python actions. You can now place
common code inside a <code class="docutils literal"><span class="pre">lib</span></code> directory inside a pack (with an <code class="docutils literal"><span class="pre">__init__.py</span></code> inside <code class="docutils literal"><span class="pre">lib</span></code>
directory to declare it a python package). You can then import the common code in sensors and
actions. Please refer to documentation for samples and guidelines. #3490</p>
</li>
<li><p class="first">Add support for password protected sudo to the local and remote runner. Password can be provided
via the new <code class="docutils literal"><span class="pre">sudo_password</span></code> runner parameter. (new feature) #3867</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">--tail</span></code> flag to the <code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span></code> / <code class="docutils literal"><span class="pre">st2</span> <span class="pre">action</span> <span class="pre">execute</span></code> and <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">re-run</span></code>
CLI command. When this flag is provided, new execution will automatically be followed and tailed
after it has been scheduled. (new feature) #3867</p>
</li>
<li><p class="first">Added flag <code class="docutils literal"><span class="pre">--auto-dict</span></code> to <code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span></code> and <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">re-run</span></code> commands. This flag must now
be specified in order to automatically convert list items to dicts based on presence of colon
(<cite>:</cite>) in all of the list items (new feature) #3909</p>
</li>
<li><p class="first">Allow user to set default log level used by all the Python runner actions by setting
<code class="docutils literal"><span class="pre">actionrunner.pythonrunner``</span></code> option in <code class="docutils literal"><span class="pre">st2.conf</span></code> (new feature) #3929</p>
</li>
<li><p class="first">Update <code class="docutils literal"><span class="pre">st2client</span></code> package which is also utilized by the CLI so it also works under Python 3.</p>
<p>Note: Python 2.7 is only officially supported and tested Python version. Using Python 3 is at
your own risk - they are likely still many bugs related to Python 3 compatibility. You have been warned.
(new feature) #3929 #3932</p>
<p>Contributed by Anthony Shaw.</p>
</li>
<li><p class="first">Add <code class="docutils literal"><span class="pre">?limit=-1</span></code> support for the API to fetch full result set (CLI equivalent flag
<code class="docutils literal"><span class="pre">--last/-n</span></code>). Post error message for <code class="docutils literal"><span class="pre">limit=0</span></code> and fix corner case where negative values for
limit query param were not handled correctly. #3761 #3708 #3735</p>
</li>
<li><p class="first">Only allow RBAC admins to retrieve all the results at once using <code class="docutils literal"><span class="pre">?limit=-1</span></code> query param, upate
the code so <code class="docutils literal"><span class="pre">api.max_page_size</span></code> config option only applies to non-admin users, meaning users
with admin permission can specify arbitrary value for <code class="docutils literal"><span class="pre">?limit</span></code> query param which can also be
larger than <code class="docutils literal"><span class="pre">api.max_page_size</span></code>. (improvement) #3939</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">?include_attributes</span></code> query param filter to <code class="docutils literal"><span class="pre">/v1/executions/</span></code> API endpoint
With this filter user can select which fields to include in the response (whitelist approach,
opposite of the existing <code class="docutils literal"><span class="pre">?exclude_attributes</span></code> filter).</p>
<p>For example, if you only want to retrieve <code class="docutils literal"><span class="pre">id</span></code> and <code class="docutils literal"><span class="pre">status</span></code> field, the URL would look like
this - <code class="docutils literal"><span class="pre">/v1/executions?include_attributes=id,status</span></code>. (new feature) #3953 #3858 #3856</p>
</li>
</ul>
</div>
<div class="section" id="id2">
<h3>Changed<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">st2actions.runners.pythonrunner.Action</span></code> class path for base Python runner actions has been
deprecated since StackStorm v1.6.0 and will be fully removed in StackStorm v2.7.0. If you have
any actions still using this path you are encouraged to update them to use
<code class="docutils literal"><span class="pre">st2common.runners.base_action.Action</span></code> path. #3803</li>
<li>Refactor <code class="docutils literal"><span class="pre">st2common</span></code> Python package so it’s fully self sustaining and can be used in a
standalone manner. (improvement) #3803</li>
<li>Refactor Python action runner so it only depends on <code class="docutils literal"><span class="pre">st2common</span></code> Python package (previously it
also depended on <code class="docutils literal"><span class="pre">st2actions</span></code>) and can be used in a standalone mode. Previously pack config and
and some other parameters were retrieved inside the Python process wrapper, but now they are
retrieved inside the runner container and passed to the runner. This also makes it easier to add
support for pack configs to other runners in the future. (improvement) #3803</li>
<li>Update various Python dependencies to the latest stable versions (kombu, amqp, apscheduler,
gitpython, pymongo, stevedore, paramiko, prompt-toolkit, flex). #3830</li>
<li>Mask values in an Inquiry response displayed to the user that were marked as “secret” in the
inquiry’s response schema. #3825</li>
<li>Real-time action output streaming is now enabled by default. For more information on this
feature, please refer to the documentation - <a class="reference external" href="https://docs.stackstorm.com/latest/reference/action_output_streaming.html">https://docs.stackstorm.com/latest/reference/action_output_streaming.html</a>.
You can disable this functionality by setting <code class="docutils literal"><span class="pre">actionrunner.stream_output</span></code> config option in
<code class="docutils literal"><span class="pre">st2.conf</span></code> to <code class="docutils literal"><span class="pre">False</span></code> and restart the services (<code class="docutils literal"><span class="pre">sudo</span> <span class="pre">st2ctl</span> <span class="pre">restart</span></code>).</li>
</ul>
</div>
<div class="section" id="id3">
<h3>Fixed<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fully fix performance regressions for short Python runner actions introduced in the past and
partially fixed in #3809. (bug fix) #3803</p>
</li>
<li><p class="first">Fix ‘NameError: name ‘cmd’ is not defined’ error when using <code class="docutils literal"><span class="pre">linux.service</span></code> with CentOS systems.
#3843. Contributed by &#64;shkadov</p>
</li>
<li><p class="first">Fix bugs with newlines in execution formatter (client) (bug fix) #3872</p>
</li>
<li><p class="first">Fixed <code class="docutils literal"><span class="pre">st2ctl</span> <span class="pre">status</span></code> to use better match when checking running process status. #3920</p>
</li>
<li><p class="first">Removed invalid <code class="docutils literal"><span class="pre">st2ctl</span></code> option to re-open Mistral log files. #3920</p>
</li>
<li><p class="first">Update garbage collection service and <code class="docutils literal"><span class="pre">st2-purge-executions</span></code> CLI tool and make deletion more
efficient. Previously we incorrectly loaded all the execution fields in memory, but there was no
need for that and now we only retrieve and load id which is the only field we need. #3936</p>
<p>Reported by &#64;kevin-vh.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="december-14-2017">
<h2>2.5.1 - December 14, 2017<a class="headerlink" href="#december-14-2017" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3>Added<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">log_level</span></code> runner parameter to Python runner. With this parameter, user can control
which log messages generated by Python runner actions are output to action <code class="docutils literal"><span class="pre">stderr</span></code>. For
backward compatibility reasons it defaults to <code class="docutils literal"><span class="pre">debug</span></code>.
This functionality comes handy in situations when an action depends on an external library which
logs a lot of information under <code class="docutils literal"><span class="pre">debug</span></code>, but you only want to see messages with log level
<code class="docutils literal"><span class="pre">error</span></code> or higher (or similar). (new feature) #3824</p>
</li>
<li><p class="first">Add stevedore related metadata to Python package setup.py files for runner packages. This way
runners can be installed using pip and dynamically enumerated and loaded using stevedore and
corresponding helper functions.</p>
<p>All runners are now also fully fledged Python packages (previously they were single module
Python packages which caused various install and distribution related issues when installing
them via pip) (new feature)</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">search</span></code> rule criteria comparison operator. Please refer to the documentation for
usage. (new feature) #3833</p>
<p>Contributed by &#64;ahubl-mz.</p>
</li>
<li><p class="first">Now a more user-friendly error message is thrown if a cycle is found inside the Jinja template
string (e.g. when parameter / variable references itself). (improvement) #3908</p>
</li>
<li><p class="first">Jinja templates in default parameter values now render as live parameters, if no “real” live
parameter was provided. This allows the template to render pre-schema validation, resulting
in the intended value type. (improvement) #3892</p>
</li>
</ul>
</div>
<div class="section" id="id5">
<h3>Changed<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Update the output of <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">{run,get}</span></code> CLI command to colorize the value of the
<code class="docutils literal"><span class="pre">status</span></code> attribute (green for <code class="docutils literal"><span class="pre">succeeded</span></code>, red for <code class="docutils literal"><span class="pre">failed</span></code>, etc. aka the same as for the
output of <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">list</span></code> command). (improvement) #3810</p>
<p>Contributed by Nick Maludy (Encore Technologies).</p>
</li>
<li><p class="first">Update log messages in the datastore service to correctly use <code class="docutils literal"><span class="pre">DEBUG</span></code> log level instead of
<code class="docutils literal"><span class="pre">AUDIT</span></code>. #3845</p>
</li>
<li><p class="first">Add the ability of <code class="docutils literal"><span class="pre">st2</span> <span class="pre">key</span> <span class="pre">load</span></code> to load keys from both JSON and YAML files. Files can now
contain a single KeyValuePair, or an array of KeyValuePairs. (improvement) #3815</p>
</li>
<li><p class="first">Add the ability of <code class="docutils literal"><span class="pre">st2</span> <span class="pre">key</span> <span class="pre">load</span></code> to load non-string values (objects, arrays, integers,
booleans) and convert them to JSON before going into the datastore, this conversion requires the
user passing in the <code class="docutils literal"><span class="pre">-c/--convert</span></code> flag. (improvement) #3815</p>
</li>
<li><p class="first">Update <code class="docutils literal"><span class="pre">st2</span> <span class="pre">key</span> <span class="pre">load</span></code> to load all properties of a key/value pair, now secret values can be
loaded. (improvement) #3815</p>
<p>Contributed by Nick Maludy (Encore Technologies).</p>
</li>
</ul>
</div>
<div class="section" id="id6">
<h3>Fixed<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix log messages generated by Python runner actions to include the correct action class name.
Previously they always incorrectly used “ABCMeta” instead of the actual action class name.
(bug fix) #3824</p>
</li>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">tail</span> <span class="pre">[last]</span></code> CLI command so it doesn’t throw an exception if there are no
executions in the database. (bug fix) #3760 #3802</p>
</li>
<li><p class="first">Fix edge case for workflows stuck in running state. When Mistral receives a connection error from
the st2 API on requesting action execution, there’s a duplicate action execution stuck in
requested state. This leads to the st2resultstracker assuming the workflow is still running.</p>
</li>
<li><p class="first">Fix a regression and a bug with no API validation being performed and API returning 500 instead
of 400 status code if user didn’t include any request payload (body) when hitting POST and PUT
API endpoints where body is mandatory. (bug fix) #3864</p>
</li>
<li><p class="first">Fix a bug in Python runner which would cause action log messages to be duplicated in action
stderr output when utilizing action service / datastore service inside actions. (bug fix)</p>
</li>
<li><p class="first">Fix performance issue on the CLI when formatting the output as JSON or YAML. (bug fix) #3697</p>
<p>Contributed by Nick Maludy (Encore Technologies).</p>
</li>
</ul>
</div>
</div>
<div class="section" id="october-25-2017">
<h2>2.5.0 - October 25, 2017<a class="headerlink" href="#october-25-2017" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3>Added<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Add new feature which allows runner action output (stdout and stderr) to be streamed
and consumed in real-time by using one of the following approaches:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">/v1/executions/&lt;execution</span> <span class="pre">id&gt;/output[?type=stdout/stderr]</span></code> API endpoint.</li>
<li><code class="docutils literal"><span class="pre">/v1/stream/</span></code> stream endpoint and listening for <code class="docutils literal"><span class="pre">st2.execution.stdout__create</span></code> and
<code class="docutils literal"><span class="pre">st2.execution.output__create</span></code> <code class="docutils literal"><span class="pre">/v1/stream</span></code> stream API endpoint events.</li>
<li><code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">tail</span> <span class="pre">&lt;execution</span> <span class="pre">id&gt;</span> <span class="pre">[--type=stdout/stderr]</span></code> CLI command (underneath it uses
stream API endpoint).</li>
</ul>
<p>Right now this functionality is available for the following runners:</p>
<ul class="simple">
<li>local command runner</li>
<li>local script runner</li>
<li>remote command runner</li>
<li>remote script runner</li>
<li>python runner</li>
</ul>
<p>Note: This feature is still experimental and it’s disabled by default (opt-in). To enable it,
set <code class="docutils literal"><span class="pre">actionrunner.stream_output</span></code> config option to <code class="docutils literal"><span class="pre">True</span></code>.</p>
<p>(new feature) #2175 #3657 #3729</p>
</li>
<li><p class="first">Update <code class="docutils literal"><span class="pre">st2</span> <span class="pre">role-assignment</span> <span class="pre">list</span></code> RBAC CLI command to include information about where a
particular assignment comes from (from which local assignment or mapping file). (improvement)
#3763</p>
</li>
<li><p class="first">Add support for overlapping RBAC role assignments for assignments via remote LDAP group to
StackStorm role mappings. This means that the same role can now be granted via multiple RBAC
mapping files.
#3763</p>
</li>
<li><p class="first">Add new Jinja filters <code class="docutils literal"><span class="pre">from_json_string</span></code>, <code class="docutils literal"><span class="pre">from_yaml_string</span></code>, and <code class="docutils literal"><span class="pre">jsonpath_query</span></code>.
#3763</p>
</li>
<li><p class="first">Add new “Inquiry” capability, which adds ability to “ask a question”, usually in a workflow.
Create a new runner type: “inquirer” to support this, as well as new API endpoints and
client commands for interacting with Inquiries</p>
<p>Contributed by mierdin. #3653</p>
</li>
<li><p class="first">Added two new rule operators, <cite>inside</cite> and <cite>ninside</cite> which allow for the reverse intent of
the <cite>contains</cite> and <cite>ncontains</cite> operators. #3781</p>
<p>Contributed by &#64;lampwins.</p>
</li>
<li><p class="first">Allow user to use more expressive regular expressions inside action alias format string by
allowing them to specify start (<code class="docutils literal"><span class="pre">^</span></code>) and end (<code class="docutils literal"><span class="pre">$</span></code>) anchors. Previously, those anchors were
automatically added at the beginning and end of the alias format string. Now they are only added
if a format string doesn’t already contain them. #3789</p>
<p>Contributed by &#64;ahubl-mz.</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">POST</span> <span class="pre">/v1/aliasexecution/match_and_execute</span></code> API endpoint which allows user to
schedule an execution based on a command string if a matching alias is found in the database.</p>
<p>This API endpoint is meant to be used with chat bot plugins. It allows them to be simple thin
wrappers around this API endpoint which send each chat line to this API endpoint and handle the
response. #3773</p>
</li>
<li><p class="first">Add several improvements to the installation scripts: They support using proxy servers.
<code class="docutils literal"><span class="pre">~stanley</span></code> no longer has to be <code class="docutils literal"><span class="pre">/home/stanley</span></code>. In addition to the on-screen display, the
output from the installation script is now logged to a file beginning with <code class="docutils literal"><span class="pre">st2-install</span></code> under
<code class="docutils literal"><span class="pre">/var/log/st2/</span></code>. Furthermore, the script handles re-runs better, although it’s
not fully idempotent yet. More improvements are expected in the near future.
st2-packages: #505, #506, #507, #508, #509, #510, #512, #517.</p>
</li>
</ul>
</div>
<div class="section" id="id8">
<h3>Fixed<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix a bug where sensor watch queues were not deleted after sensor container process was shut
down. This resulted in spurious queues left behind. This should not have caused performance
impact but just messes with rabbitmqadmin output and maybe tedious for operators. (bug fix) #3628</p>
<p>Reported by Igor.</p>
</li>
<li><p class="first">Make sure all the temporary RabbitMQ queues used by the stream service are deleted once the
connection to RabbitMQ is closed. Those queues are temporary and unique in nature and new ones
are created on each service start-up so we need to make sure to correctly clean up old queues.</p>
<p>#3746</p>
</li>
<li><p class="first">Fix cancellation of subworkflow and subchain. Cancel of Mistral workflow or Action Chain is
cascaded down to subworkflows appropriately. Cancel from tasks in the workflow or chain is
cascaded up to the parent. (bug fix)</p>
</li>
<li><p class="first">Fix delays in st2resultstracker on querying workflow status from Mistral. Make sleep time for
empty queue and no workers configurable. Reduce the default sleep times to 5 seconds. StackStorm
instances that handle more workflows should consider increasing the query interval for better
CPU utilization.</p>
</li>
<li><p class="first">Fix missing type for the parameters with enum in the core st2 packs.(bug fix) #3737</p>
<p>Reported by Nick Maludy.</p>
</li>
<li><p class="first">Add missing <code class="docutils literal"><span class="pre">-h</span></code> / <code class="docutils literal"><span class="pre">--help</span></code> CLI flag to the following execution CLI commands: cancel, pause,
resume. (bug fix) #3750</p>
</li>
<li><p class="first">Fix execution cancel and pause CLI commands and make id a required argument. (bug fix) #3750</p>
</li>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">st2</span> <span class="pre">role-assignment</span> <span class="pre">list</span></code> CLI command and allow <code class="docutils literal"><span class="pre">--user</span></code>, <code class="docutils literal"><span class="pre">--remote</span></code> and <code class="docutils literal"><span class="pre">--role</span></code>
arguments to be used together. Previously they were mutually exclusive so it wasn’t possible to
use them together. (bug fix) #3763</p>
</li>
<li><p class="first">Update default event name whitelist for <code class="docutils literal"><span class="pre">/v1/stream</span></code> API endpoint and make sure
<code class="docutils literal"><span class="pre">st2.announcement__errbot</span></code> and other event names starting with <code class="docutils literal"><span class="pre">st2.announcement__*</span></code> prefix
are not filtered out. #3769 (bug fix)</p>
<p>Reported by Carlos.</p>
</li>
<li><p class="first">Fix action-alias execute response to show execution id and matching action-alias #3231 (bug fix)
Reported by Carlos.</p>
</li>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">st2</span> <span class="pre">apikey</span> <span class="pre">load</span></code> command to update an existing entry if items in input file contain <code class="docutils literal"><span class="pre">id</span></code>
attribute and item already exists on the server. This way the behavior is consistent with
<code class="docutils literal"><span class="pre">st2</span> <span class="pre">key</span> <span class="pre">load</span></code> command and the command is idempotent if each item contains <code class="docutils literal"><span class="pre">id</span></code> attribute.
#3748 #3786</p>
<p>Reported by Christopher Baklid.</p>
</li>
<li><p class="first">Don’t log MongoDB database password if user specifies URI for <code class="docutils literal"><span class="pre">database.db_host</span></code> config
parameter and that URI also includes a password. Default and a common scenario is specifying
password as a separate <code class="docutils literal"><span class="pre">database.password</span></code> config parameter. #3797</p>
<p>Reported by Igor Cherkaev.</p>
</li>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">POST</span> <span class="pre">/v1/actionalias/match</span></code> API endpoint to correctly return a dictionary instead of an
array. We had a correct OpenAPI definition for the response, but the code incorrectly returned
an array instead of a dictionary.</p>
<p>Note: This is a breaking change so if your code utilizes this API endpoint you need to update
to treat response as a dictionary and not as an array with a single item. #377</p>
</li>
<li><p class="first">Partially fix performance overhead and regression for short and simple Python runner actions.
Full / complete fix will be included in v2.6.0. #3809</p>
</li>
</ul>
</div>
<div class="section" id="id9">
<h3>Changed<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Minor language and style tidy up of help strings and error messages. #3782</li>
</ul>
</div>
</div>
<div class="section" id="september-12-2017">
<h2>2.4.1 - September 12, 2017<a class="headerlink" href="#september-12-2017" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id10">
<h3>Fixed<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix a bug with <code class="docutils literal"><span class="pre">/v1/packs/install</span></code> and <code class="docutils literal"><span class="pre">/v1/packs/uninstall</span></code> API endpoints incorrectly using
system user for scheduled pack install and pack uninstall executions instead of the user which
performed the API operation.(bug fix) #3693 #3696</p>
<p>Reported by theuiz.</p>
</li>
<li><p class="first">Fix mistral callback failure when result contains unicode. (bug fix)</p>
</li>
<li><p class="first">Fix cancellation of delayed action execution for tasks in workflow. (bug fix)</p>
</li>
<li><p class="first">Fix timeout of mistral shutdown in systemd service. The fix is done upstream.
<a class="reference external" href="https://review.openstack.org/#/c/499853/">https://review.openstack.org/#/c/499853/</a> (bug fix)</p>
</li>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">st2ctl</span> <span class="pre">clean</span></code> not using database connection information from config.
This now uses the new <code class="docutils literal"><span class="pre">st2-cleanup-db</span></code> command. (bug fix) #3659</p>
<p>Contributed by Nick Maludy (Encore Technologies).</p>
</li>
</ul>
</div>
<div class="section" id="id11">
<h3>Changed<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Update <code class="docutils literal"><span class="pre">st2</span></code> CLI command to print a more user-friendly usage / help string if no arguments are
passed to the CLI. (improvement) #3710</p>
</li>
<li><p class="first">Allow user to specify multiple values for a parameter of type array of dicts when using
<code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span></code> CLI command. #3670</p>
<p>Contributed by Hiroyasu OHYAMA.</p>
</li>
<li><p class="first">Added new command <code class="docutils literal"><span class="pre">st2-cleanup-db</span></code> that drops the current StackStorm MongoDB database. #3659</p>
<p>Contributed by Nick Maludy (Encore Technologies).</p>
</li>
</ul>
</div>
</div>
<div class="section" id="august-23-2017">
<h2>2.4.0 - August 23, 2017<a class="headerlink" href="#august-23-2017" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id12">
<h3>Added<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Add sample passive sensor at <code class="docutils literal"><span class="pre">contrib/examples/sensors/echo_flask_app</span></code>. (improvement) #3667</p>
</li>
<li><p class="first">Add pack config into action context. This is made available under the <code class="docutils literal"><span class="pre">config_context</span></code> key.
#3183</p>
</li>
<li><p class="first">Add limit/<code class="docutils literal"><span class="pre">-n</span></code> flag and pagination note(stderr) in the CLI for <code class="docutils literal"><span class="pre">st2</span> <span class="pre">key</span> <span class="pre">list</span></code>.
Default limit is 50. #3641</p>
</li>
<li><p class="first">Implement pause and resume for Mistral workflow and Action Chain. Pause and resume will cascade
down to subworkflows and/or subchains. Pause from a subworkflow or subchain will cascade up to
the parent workflow. (new feature)</p>
</li>
<li><p class="first">Add pack index endpoint. It will make a request for every index defined in st2.conf and return
the combined list of available packs.</p>
</li>
<li><p class="first">Added a new field <code class="docutils literal"><span class="pre">timestamp_f</span></code> to the GELF logging formatter that represents
the time of the logging even in fractional time (resolution is dependent on your
system). This allows adjacent logging events to be distinguished more accurately
by the time they occurred.
Contributed by Nick Maludy (Encore Technologies) #3362</p>
</li>
<li><p class="first">Require new <code class="docutils literal"><span class="pre">STREAM_VIEW</span></code> RBAC permission type to be able to view <code class="docutils literal"><span class="pre">/v1/stream</span></code> stream API
endpoint. (improvement) #3676</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">?events</span></code>, <code class="docutils literal"><span class="pre">?action_refs</span></code> and <code class="docutils literal"><span class="pre">?execution_ids</span></code> query params to <code class="docutils literal"><span class="pre">/v1/stream/</span></code>
API endpoint. These query parameters allow users to filter out which events to receive based
on the event type, action ref and execution id. By default, when no filters are provided, all
events are returned. (new feature) #3677</p>
</li>
<li><p class="first">Show count of pack content (actions, sensors, triggers, rules and aliases) to be registered
before the <code class="docutils literal"><span class="pre">st2</span> <span class="pre">pack</span> <span class="pre">install</span></code> so that the delay in install is not mistaken as no response
or hanging command. (improvement) #3586 #3675</p>
</li>
<li><p class="first">Allow users to specify value for “array of objects” parameter type using a simple notation
when using the <code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span></code> CLI command. (improvement) #3646 #3670</p>
<p>Contributed by Hiroyasu OHYAMA.</p>
</li>
<li><p class="first">Copy nearly all existing Jinja filters and make them available in both Jinja and YAQL within
Mistral workflows (<a class="reference external" href="https://github.com/StackStorm/st2mistral/pull/30">https://github.com/StackStorm/st2mistral/pull/30</a>). Modify st2kv default
behavior (BREAKING CHANGE) to not decrypt ciphertext in datastore by default (now explicitly
enabled via optional parameter).</p>
<p>Contributed by mierdin. #3565</p>
</li>
<li><p class="first">Add <code class="docutils literal"><span class="pre">regex_substring</span></code> Jinja filter for searching for a pattern in a provided string and
returning the result. (improvement)</p>
<p>Contributed by mierdin. #3482</p>
</li>
</ul>
</div>
<div class="section" id="id13">
<h3>Changed<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Rename ST2 action runner cancel queue from <code class="docutils literal"><span class="pre">st2.actionrunner.canel</span></code>
to <code class="docutils literal"><span class="pre">st2.actionrunner.cancel</span></code>. (improvement) #3247</li>
<li>Install scripts and documentation have been updated to install MongoDB 3.4 by default (previously
3.2 was installed by default). If you want to upgrade an existing installation, please follow
the official instructions at <a class="reference external" href="https://docs.mongodb.com/v3.4/release-notes/3.4-upgrade-standalone/">https://docs.mongodb.com/v3.4/release-notes/3.4-upgrade-standalone/</a>.
(improvement)</li>
<li>Update garbage collector service to delete corresponding stdout and stderr objects which belong
to executions which are to be deleted. #2175 #3657</li>
</ul>
</div>
<div class="section" id="removed">
<h3>Removed<a class="headerlink" href="#removed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support for pack <code class="docutils literal"><span class="pre">config.yaml</span></code> has been removed. Pack configuration should use the new
style, at <code class="docutils literal"><span class="pre">/opt/stackstorm/configs/&lt;pack&gt;.yaml</span></code>. Packs containing <code class="docutils literal"><span class="pre">config.yaml</span></code> will generate
a fatal ERROR on pack registration.</li>
</ul>
</div>
<div class="section" id="id14">
<h3>Fixed<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix retrying in message bus exchange registration. (bug fix) #3635 #3638</p>
<p>Reported by John Arnold.</p>
</li>
<li><p class="first">Fix message bus related race condition which could, under some rare scenarios, cause first
published message to be ignored because there were no consumers for that particular queue yet.
This could happen in a scenario when API service came online and served a request before action
runner service came online.</p>
<p>This also fixes an issue with Redis kombu backend not working. (bug fix) #3635 #3639 #3648</p>
</li>
<li><p class="first">Fix logrotate configuration to delete stale compressed st2actionrunner logs #3647</p>
</li>
<li><p class="first">Fix trace list API endpoint sorting by <cite>start_timestamp</cite>, using <code class="docutils literal"><span class="pre">?sort_desc=True|False</span></code> query
parameters and by passing <code class="docutils literal"><span class="pre">--sort=asc|desc</span></code> parameter to the <code class="docutils literal"><span class="pre">st2</span> <span class="pre">trace</span> <span class="pre">list</span></code> CLI command.
Descending order by default.(bug fix) #3237 #3665</p>
</li>
<li><p class="first">Fix pack index health endpoint. It now points to the right controller. #3672</p>
</li>
<li><p class="first">Fix ‘pack register content’ failures appearing on some slower systems by lifting action timeout.
#3685</p>
</li>
</ul>
</div>
</div>
<div class="section" id="july-28-2017">
<h2>2.3.2 - July 28, 2017<a class="headerlink" href="#july-28-2017" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id15">
<h3>Added<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Add test coverage and test timing capabilities to <code class="docutils literal"><span class="pre">st2-run-pack-tests</span></code>.
The <code class="docutils literal"><span class="pre">-c</span></code> option enables test coverage and the <code class="docutils literal"><span class="pre">-t</span></code> option enables test timings.
These capabilities have also been enabled in the ci pipeline for packs in the exchange.</p>
<p>Contributed by Nick Maludy. #3508</p>
</li>
<li><p class="first">Add ability to explicitly set <code class="docutils literal"><span class="pre">stream_url</span></code> in st2client. (improvement) #3432</p>
</li>
<li><p class="first">Add support for handling arrays of dictionaries to <code class="docutils literal"><span class="pre">st2</span> <span class="pre">config</span></code> CLI command. (improvement)
#3594</p>
<p>Contributed by Hiroyasu OHYAMA.</p>
</li>
</ul>
</div>
<div class="section" id="id16">
<h3>Changed<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Update <code class="docutils literal"><span class="pre">st2</span></code> CLI so it also displays “there are more results” note when <code class="docutils literal"><span class="pre">-n</span></code> flag is
used and there are more items available. (improvement) #3552</li>
</ul>
</div>
<div class="section" id="id17">
<h3>Fixed<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix st2client to display unicode characters in pack content description. (bug-fix) #3511</p>
</li>
<li><p class="first">Don’t automatically append <code class="docutils literal"><span class="pre">.git</span></code> suffix to repo URIs passed to <code class="docutils literal"><span class="pre">packs.download</span></code> action.
This fixes a bug and now action also works with repo urls which don’t contain <code class="docutils literal"><span class="pre">.git</span></code> suffix.
(bug fix)</p>
<p>Contributed by carbineneutral. #3534 #3544</p>
</li>
<li><p class="first">st2 pack commands now work when StackStorm servers are behind a HTTP/HTTPS proxy. You can set
<code class="docutils literal"><span class="pre">http_proxy</span></code> or <code class="docutils literal"><span class="pre">https_proxy</span></code> environment variables for <code class="docutils literal"><span class="pre">st2api</span></code> and <code class="docutils literal"><span class="pre">st2actionrunner</span></code>
processes and pack commands will work with proxy. Refer to documentation for details on
proxy configuration. (bug-fix) #3137</p>
</li>
<li><p class="first">Fix API validation regression so all input data sent to some POST and PUT API endpoints is
correctly validated. (bug fix) #3580</p>
</li>
<li><p class="first">Fix an API bug and allow users to create rules which reference actions which don’t yet exist in
the system when RBAC is enabled and user doesn’t have system admin permission. (bug fix)
#3572 #3573</p>
<p>Reported by sibirajal.</p>
</li>
<li><p class="first">Add a check to make sure action exists in the POST of the action execution API. (bug fix)</p>
</li>
<li><p class="first">Fix api key generation, to use system user, when auth is disabled. (bug fix) #3578 #3593</p>
</li>
<li><p class="first">Fix invocation of Mistral workflow from Action Chain with jinja in params. (bug fix) #3440</p>
</li>
<li><p class="first">Fix st2client API bug, a backward incompatible change in <code class="docutils literal"><span class="pre">query()</span></code> method, introduced in note
implementation (#3514) in 2.3.1. The <code class="docutils literal"><span class="pre">query()</span></code> method is now backward compatible (pre 2.3) and
<code class="docutils literal"><span class="pre">query_with_count()</span></code> method is used for results pagination and note. #3616</p>
</li>
<li><p class="first">Fix logrotate script so that it no longer prints the <code class="docutils literal"><span class="pre">st2ctl</span></code> PID status to stdout
for each file that it rotates. Also, it will no longer print an error if
<code class="docutils literal"><span class="pre">/var/log/st2/st2web.log</span></code> is missing.</p>
<p>Contributed by Nick Maludy. #3633</p>
</li>
</ul>
</div>
</div>
<div class="section" id="july-07-2017">
<h2>2.3.1 - July 07, 2017<a class="headerlink" href="#july-07-2017" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id18">
<h3>Added<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Add support for <code class="docutils literal"><span class="pre">passphrase</span></code> parameter to <code class="docutils literal"><span class="pre">remote-shell-script</span></code> runner and as such, support
for password protected SSH key files. (improvement)</p>
<p>Reported by Sibiraja L, Nick Maludy.</p>
</li>
<li><p class="first">Add <code class="docutils literal"><span class="pre">json_escape</span></code> Jinja filter for escaping JSON strings. (improvement)</p>
<p>Contributed by mierdin. #3480</p>
</li>
<li><p class="first">Print a note to stderr if there are more entries / results on the server side which are displayed
to the user for the following <code class="docutils literal"><span class="pre">list</span></code> CLI commands: <code class="docutils literal"><span class="pre">rule</span></code>, <code class="docutils literal"><span class="pre">execution</span></code>,
<code class="docutils literal"><span class="pre">rule-enforcment</span></code>, <code class="docutils literal"><span class="pre">trace</span></code> and <code class="docutils literal"><span class="pre">trigger-instance</span></code>.
Default limit is 50. (improvement)</p>
<p>Reported by Eugen C. #3488</p>
</li>
</ul>
</div>
<div class="section" id="id19">
<h3>Changed<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Update <code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span></code> / <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">run</span></code> command to display result of workflow actions when
they finish. In the workflow case, result of the last task (action) of the workflow is used.
(improvement) #3481</p>
</li>
<li><p class="first">Update Python runner so it mimics behavior from StackStorm pre 1.6 and returns action result as
is (serialized as string) in case we are unable to serialize action result because it contains
non-simple types (e.g. class instances) which can’t be serialized.</p>
<p>In v1.6 we introduced a change when in such instances, we simply returned <code class="docutils literal"><span class="pre">None</span></code> as result
and didn’t log anything which was confusing. (improvement) #3489</p>
<p>Reported by Anthony Shaw.</p>
</li>
<li><p class="first">Add missing pagination support to <code class="docutils literal"><span class="pre">/v1/apikeys</span></code> API endpoint. (improvement) #3486</p>
</li>
<li><p class="first">Update action-chain runner so a default value for <code class="docutils literal"><span class="pre">display_published</span></code> runner parameter is
<code class="docutils literal"><span class="pre">True</span></code>. This way it’s consistent with Mistral runner behavior and intermediate variables
published inside action-chain workflow are stored and displayed by default. #3518 #3519</p>
<p>Reported by Jacob Floyd.</p>
</li>
<li><p class="first">Reduce API service (<code class="docutils literal"><span class="pre">st2api</span></code>) log clutter and log whole API response (API controller method
return value / response body) under <code class="docutils literal"><span class="pre">DEBUG</span></code> log level instead of <code class="docutils literal"><span class="pre">INFO</span></code>. (improvement) #3539</p>
<p>Reported by Sibiraja L.</p>
</li>
<li><p class="first">Enforce validation on <code class="docutils literal"><span class="pre">position</span></code> parameter for action parameters. If position values are not
sequential or not unique, action registration will now fail. (bug-fix)
(improvement) #3317 #3474</p>
</li>
</ul>
</div>
<div class="section" id="deprecated">
<h3>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deprecate <code class="docutils literal"><span class="pre">results_tracker</span></code> config group and move configuration variables to <code class="docutils literal"><span class="pre">resultstracker</span></code>
group instead. If you have <code class="docutils literal"><span class="pre">results_tracker</span></code> config group in the config, it is recommended
to switch to <code class="docutils literal"><span class="pre">resultstracker</span></code> instead. (bug-fix) #3500</li>
</ul>
</div>
<div class="section" id="id20">
<h3>Fixed<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">?name</span></code> query param filter in <code class="docutils literal"><span class="pre">/v1/actionalias</span></code> API endpoint. (bug fix) #3503</p>
</li>
<li><p class="first">Notifier now consumes <code class="docutils literal"><span class="pre">ActionExecution</span></code> queue as opposed to <code class="docutils literal"><span class="pre">LiveAction</span></code> queue. With this
change, the Jinja templates used in notify messages that refer to keys in <code class="docutils literal"><span class="pre">ActionExecution</span></code>
resolve reliably. Previously, there was a race condition in which a <code class="docutils literal"><span class="pre">LiveAction</span></code> would have
been updated but <code class="docutils literal"><span class="pre">ActionExecution</span></code> was not and therefore, the jinja templates weren’t reliably
resolved. (bug-fix) #3487 #3496</p>
<p>Reported by Chris Katzmann, Nick Maludy.</p>
</li>
<li><p class="first">Update config loader so it correctly handles config schema default values which are falsey
(<code class="docutils literal"><span class="pre">False</span></code>, <code class="docutils literal"><span class="pre">None</span></code>, <code class="docutils literal"><span class="pre">0</span></code>, etc.) (bug-fix) #3504 #3531</p>
<p>Reported by Simas Čepaitis.</p>
</li>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">st2ctl</span> <span class="pre">register</span></code> failure to register rules in some race conditions.
<code class="docutils literal"><span class="pre">st2-register-content</span></code> will now register internal trigger types by default. (bug-fix) #3542</p>
</li>
<li><p class="first">Correctly use service token TTL when generating temporary token for datastore service. This
fixes a bug and allows user to set TTL value for non service tokens to less than 24 hours.
(bug fix) #3523 #3524</p>
<p>Reported by theuiz.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="june-19-2017">
<h2>2.3.0 - June 19, 2017<a class="headerlink" href="#june-19-2017" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id21">
<h3>Added<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Introduce new <code class="docutils literal"><span class="pre">CAPABILITIES</span></code> constant on auth backend classes. With this constant, auth
backends can advertise functionality they support (e.g. authenticate a user, retrieve information
about a particular user, retrieve a list of groups a particular user is a member of).
(new feature)</p>
</li>
<li><p class="first">Add support for automatic RBAC role assignment based on the remote auth backend groups user is a
member of (e.g. LDAP groups) and mappings defined in <code class="docutils literal"><span class="pre">/opt/stackstorm/rbac/mappings</span></code> directory.</p>
<p>Note: This functionality is currently implemented for enterprise LDAP auth backend and only
available in enterprise edition.
(new feature)</p>
</li>
<li><p class="first">Allow user to specify a custom list of attribute names which are masked in the log messages by
setting <code class="docutils literal"><span class="pre">log.mask_secrets_blacklist</span></code> config option. (improvement)</p>
</li>
<li><p class="first">Add webhook payload to the Jinja render context when rendering Jinja variable inside rule
criteria section.</p>
</li>
<li><p class="first">Implement RBAC for traces API endpoints. (improvement)</p>
</li>
<li><p class="first">Implement RBAC for <code class="docutils literal"><span class="pre">API_KEY_CREATE</span></code> permission type. (improvement)</p>
</li>
<li><p class="first">Implement RBAC for timers API endpoints. (improvement)</p>
</li>
<li><p class="first">Implement RBAC for webhooks get all and get one API endpoint. (improvement)</p>
</li>
<li><p class="first">Implement RBAC for policy types and policies get all and get one API endpoint. (improvement)</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">/v1/rbac/role_assignments</span></code> API endpoint for retrieving user role assignment
information. (new feature)</p>
</li>
<li><p class="first">Add CLI commands for listing RBAC roles:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">st2</span> <span class="pre">role</span> <span class="pre">list</span> <span class="pre">[--system]</span></code></li>
<li><code class="docutils literal"><span class="pre">st2</span> <span class="pre">role</span> <span class="pre">get</span> <span class="pre">&lt;role</span> <span class="pre">id</span> <span class="pre">or</span> <span class="pre">name&gt;</span></code></li>
</ul>
</li>
<li><p class="first">Add CLI commands for listing RBAC user role assignments:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">st2</span> <span class="pre">role-assignment</span> <span class="pre">list</span> <span class="pre">[--role=&lt;role</span> <span class="pre">name&gt;]</span> <span class="pre">[--user=&lt;username&gt;]</span></code></li>
<li><code class="docutils literal"><span class="pre">st2</span> <span class="pre">role-assignment</span> <span class="pre">get</span> <span class="pre">&lt;role</span> <span class="pre">assignment</span> <span class="pre">id&gt;</span></code></li>
</ul>
</li>
<li><p class="first">Add the following new actions to <code class="docutils literal"><span class="pre">chatops</span></code> pack:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">chatops.match</span></code></li>
<li><code class="docutils literal"><span class="pre">chatops.match_and_execute</span></code></li>
<li><code class="docutils literal"><span class="pre">chatops.run</span></code></li>
</ul>
<p>#3425 [Anthony Shaw]</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">examples.forloop_chain</span></code> action-chain workflow to the examples pack which demonstrates
how to iterate over multiple pages inside a workflow. #3328
[Carles Figuerola]</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">core.uuid</span></code> action for generating type 1 and type 4 UUIDs. [John Anderson] #3414</p>
</li>
</ul>
</div>
<div class="section" id="id22">
<h3>Changed<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Refactor the action execution asynchronous callback functionality into the runner plugin
architecture. (improvement)</p>
</li>
<li><p class="first">Linux file watch sensor is now disabled by default. To enable it, set <code class="docutils literal"><span class="pre">enabled:</span> <span class="pre">true</span></code> in
<code class="docutils literal"><span class="pre">/opt/stackstorm/packs/linux/sensors/file_watch_sensor.yaml</span></code></p>
</li>
<li><p class="first">Update the code so user can specify arbitrary default TTL for access tokens in <code class="docutils literal"><span class="pre">st2.conf</span></code> and
all the StackStorm services which rely on access tokens still work.</p>
<p>Previously, the lowest TTL user could specify for all the services to still work was 24 hours.
This has been fixed and the default TTL specified in the config now only affects user access
tokens and services use special service access tokens with no max TTL limit. (bug fix)</p>
<p>Reported by Jiang Wei. #3314 #3315</p>
</li>
<li><p class="first">Update <code class="docutils literal"><span class="pre">/executions/views/filters</span></code> API endpoint so it excludes null / None from filter values
for fields where <code class="docutils literal"><span class="pre">null</span></code> is not a valid field value. (improvement)</p>
<p>Contributed by Cody A. Ray. #3193</p>
</li>
<li><p class="first">Require <code class="docutils literal"><span class="pre">ACTION_VIEW</span></code> permission type to be able to access entry_point and parameters actions
view controller. (improvement)</p>
</li>
<li><p class="first">Update <code class="docutils literal"><span class="pre">/v1/rbac/permission_types</span></code> and <code class="docutils literal"><span class="pre">/v1/rbac/permission_types/&lt;resource</span> <span class="pre">type&gt;</span></code> API
endpoint to return a dictionary which also includes a description for each available
permission type. (improvement)</p>
</li>
<li><p class="first">Require <code class="docutils literal"><span class="pre">EXECUTION_VIEWS_FILTERS_LIST</span></code> RBAC permission type to be able to access
<code class="docutils literal"><span class="pre">/executions/views/filters</span></code> API endpoint. (improvement)</p>
</li>
<li><p class="first">Add webhook payload to the Jinja render context when rendering Jinja variable inside rule criteria section</p>
</li>
<li><p class="first">Switch file_watch_sensor in Linux pack to use trigger type with parameters. Now you can add a
rule with <code class="docutils literal"><span class="pre">file_path</span></code> and sensor will pick up the <code class="docutils literal"><span class="pre">file_path</span></code> from the rule. A sample rule
is provided in <code class="docutils literal"><span class="pre">contrib/examples/rules/sample_rule_file_watch.yaml</span></code>. (improvement)</p>
</li>
<li><p class="first">Cancel actions that are Mistral workflow when the parent workflow is cancelled. (improvement)</p>
</li>
<li><p class="first">Upgrade various internal Python library dependencies to the latest stable versions (pyyaml,
requests, appscheduler, gitpython, paramiko, mongoengine, tooz).</p>
</li>
<li><p class="first">Update <code class="docutils literal"><span class="pre">/v1/rbac/roles</span></code> API endpoint so it includes corresponding permission grant objects.
Previously it only included permission grant ids. (improvement)</p>
</li>
<li><p class="first">When RBAC is enabled and action is scheduled (ran) through the API, include <code class="docutils literal"><span class="pre">rbac</span></code> dictionary
with <code class="docutils literal"><span class="pre">user</span></code> and <code class="docutils literal"><span class="pre">roles</span></code> <code class="docutils literal"><span class="pre">action_context</span></code> attribute. (improvement)</p>
</li>
<li><p class="first">Make the query interval to third party workflow systems (including mistral) a configurable
value. You can now set <code class="docutils literal"><span class="pre">query_interval</span></code> in <code class="docutils literal"><span class="pre">[results_tracker]</span></code> section in <code class="docutils literal"><span class="pre">/etc/st2/st2.conf</span></code>.
With this, the default query interval is set to 20s as opposed to 0.1s which was rather aggressive
and could cause CPU churn when there is a large number of outstanding workflows. (improvement)</p>
</li>
<li><p class="first">Let <code class="docutils literal"><span class="pre">st2</span> <span class="pre">pack</span> <span class="pre">install</span></code> register all available content in pack by default to be consistent with
<code class="docutils literal"><span class="pre">st2</span> <span class="pre">pack</span> <span class="pre">register</span></code>. (improvement) #3452</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">dest_server</span></code> parameter has been removed from the <code class="docutils literal"><span class="pre">linux.scp</span></code> action. Going forward simply
specify the server as part of the <code class="docutils literal"><span class="pre">source</span></code> and / or <code class="docutils literal"><span class="pre">destination</span></code> arguments. (improvement)
#3335 #3463 [Nick Maludy]</p>
</li>
<li><p class="first">Add missing database indexes which should speed up various queries on production deployments with
large datasets. (improvement)</p>
</li>
<li><p class="first">Use a default value for a config item from config schema even if that config item is not required
(<code class="docutils literal"><span class="pre">required:</span> <span class="pre">false</span></code>). (improvement)</p>
<p>Reported by nmlaudy. #3468 #3469</p>
</li>
<li><p class="first">Removing empty <code class="docutils literal"><span class="pre">config.yaml</span></code> for packs pack so warning isn’t thrown by default now that deprecation
warning is in place. (improvement)</p>
</li>
</ul>
</div>
<div class="section" id="id23">
<h3>Removed<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Drop support for invalid semver versions strings (e.g. <code class="docutils literal"><span class="pre">2.0</span></code>) in pack.yaml pack metadata. Only
full semver version strings are supported, e.g. <code class="docutils literal"><span class="pre">2.1.1</span></code>. This was originally deprecated in
v2.1.0.</li>
</ul>
</div>
<div class="section" id="id24">
<h3>Deprecated<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Packs containing <code class="docutils literal"><span class="pre">config.yaml</span></code> will now generate a WARNING log on pack registration. Support for
<code class="docutils literal"><span class="pre">config.yaml</span></code> will be removed in StackStorm 2.4. Migrate your pack configurations now.</li>
</ul>
</div>
<div class="section" id="id25">
<h3>Fixed<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Update st2rulesengine to exit non-0 on failure (bug fix) #3394 [Andrew Regan]</li>
<li>Fix a bug where trigger parameters and payloads were being validated regardless of the relevant settings
in the configuration (<code class="docutils literal"><span class="pre">system.validate_trigger_payload</span></code>, <code class="docutils literal"><span class="pre">system.validate_trigger_parameters</span></code>). (bug fix)</li>
<li>Fix <code class="docutils literal"><span class="pre">system=True</span></code> filter in the <code class="docutils literal"><span class="pre">/v1/rbac/roles</span></code> API endpoint so it works correctly. (bug fix)</li>
<li>Fix a bug where keyvalue objects weren’t properly cast to numeric types. (bug fix)</li>
<li>When action worker is being shutdown and action executions are being abandoned, invoke post run
on the action executions to ensure operations such as callback is performed. (bug fix)</li>
<li>Fix action chain runner workflows so variables (vars) and parameter values
support non-ascii (unicode) characters. (bug fix)</li>
<li>Fix a bug in query base module when outstanding queries to mistral or other workflow engines
could cause a tight loop without cooperative yield leading to 100% CPU usage by st2resultstracker
process. (bug-fix)</li>
<li>Ignore unicode related encoding errors which could occur in some circumstances when
<code class="docutils literal"><span class="pre">packs.setup_virtualenv</span></code> fails due to a missing dependency or similar. (improvement, bug fix)
#3337 [Sean Reifschneider]</li>
<li>Update <code class="docutils literal"><span class="pre">st2-apply-rbac-definitions</span></code> so it also removes assignments for users which don’t exist
in the database. (improvement, bug fix)</li>
<li>Fix a bug where action runner throws KeyError on abandoning action executions
during process shutdown. (bug fix)</li>
<li>Fix URL parsing bug where percent encoded URLs aren’t decoded properly (bug fix)</li>
<li>The API endpoint for searching or showing packs has been updated to return an empty list
instead of <code class="docutils literal"><span class="pre">None</span></code> when the pack was not found in the index. (bug fix)</li>
</ul>
</div>
<div class="section" id="security">
<h3>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make sure all the role assignments for a particular user are correctly deleted from the database
after deleting an assignment file from <code class="docutils literal"><span class="pre">/opt/stackstorm/rbac/assignments</span></code> directory and running
<code class="docutils literal"><span class="pre">st2-apply-rbac-definitions</span></code> tool. (bug fix)</li>
</ul>
</div>
</div>
<div class="section" id="april-3-2017">
<h2>2.2.1 - April 3, 2017<a class="headerlink" href="#april-3-2017" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id26">
<h3>Added<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow user to specify which branch of <code class="docutils literal"><span class="pre">st2tests</span></code> repository to use by passing <code class="docutils literal"><span class="pre">-b</span></code> option to
<code class="docutils literal"><span class="pre">st2-self-check</span></code> script. (improvement)</li>
<li>Update <code class="docutils literal"><span class="pre">tooz</span></code> library to the latest version (v1.15.0). Using the latest version means
StackStorm now also supports using <code class="docutils literal"><span class="pre">consul</span></code>, <code class="docutils literal"><span class="pre">etcd</span></code> and other new backends supported by
tooz for coordination. (improvement)</li>
</ul>
</div>
<div class="section" id="id27">
<h3>Fixed<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">st2ctl</span> <span class="pre">reload</span></code> command so it preserves exit code from <cite>st2-register-content</cite> script and
correctly fails on failure by default.</p>
</li>
<li><p class="first">Fix base action alias test class (<code class="docutils literal"><span class="pre">BaseActionAliasTestCase</span></code>) so it also works if the local pack
directory name doesn’t match the pack name (this might be the case with new pack management
during development where local git repository directory name doesn’t match pack name) (bug fix)</p>
</li>
<li><p class="first">Fix a bug with default values from pack config schema not being passed via config to Python
runner actions and sensors if pack didn’t contain a config file in <code class="docutils literal"><span class="pre">/opt/stackstorm/configs</span></code>
directory. (bug fix)</p>
<p>Reported by Jon Middleton.</p>
</li>
<li><p class="first">Make various improvements and changes to <code class="docutils literal"><span class="pre">st2-run-pack-tests</span></code> script so it works out of the box
on servers where StackStorm has been installed using packages. (improvement)</p>
</li>
<li><p class="first">Fix a bug with authentication middleware not working correctly when supplying credentials in an
Authorization header using basic auth format when password contained a colon (<code class="docutils literal"><span class="pre">:</span></code>).</p>
<p>Note: Usernames with colon are still not supported. (bug fix)</p>
<p>Contributed by Carlos.</p>
</li>
<li><p class="first">Update <code class="docutils literal"><span class="pre">st2-run-pack-tests</span></code> script so it doesn’t try to install global pack test dependencies
(mock, unittest2, nose) when running in an environment where those dependencies are already
available.</p>
</li>
<li><p class="first">Make sure remote command and script runner correctly close SSH connections after the action
execution has completed. (bug fix)</p>
<p>Reported by Nagy Krisztián.</p>
</li>
<li><p class="first">Fix a bug with pack configs API endpoint (<code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/v1/configs/</span></code>) not working when RBAC was
enabled. (bug fix)</p>
<p>Reported by efenian.</p>
</li>
<li><p class="first">Fix concurrency related unit tests to support upgrade of the tooz library. (bug fix)</p>
</li>
<li><p class="first">Fix a bug with config schema validation not being performed upon registration which could cause
bad or empty config schema to end up in the system. (bug fix)</p>
</li>
</ul>
</div>
<div class="section" id="id28">
<h3>Security<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Removed support for medium-strength ciphers from default nginx configuration (#3244)</li>
<li>Various security related improvements in the enterprise LDAP auth backend. (improvement,
bug fix)</li>
</ul>
</div>
</div>
<div class="section" id="february-27-2017">
<h2>2.2.0 - February 27, 2017<a class="headerlink" href="#february-27-2017" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id29">
<h3>Added<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Use the newly introduced CANCELLED state in mistral for workflow cancellation. Currently, st2
put the workflow in a PAUSED state in mistral. (improvement)</p>
</li>
<li><p class="first">Add support for evaluating Jinja expressions in mistral workflow definition where yaql
expressions are typically accepted. (improvement)</p>
</li>
<li><p class="first">Update the dependencies and the code base so we now also support MongoDB 3.4. Officially
supported MongoDB versions are now MongoDB 3.2 and 3.4. Currently default version installed by
the installer script still is 3.2. (improvement)</p>
</li>
<li><p class="first">Introduce validation of trigger parameters when creating a rule for non-system (user-defined)
trigger types.</p>
<p>Validation is only performed if <code class="docutils literal"><span class="pre">system.validate_trigger_parameters</span></code> config option is enabled
(it’s disabled by default) and if trigger object defines <code class="docutils literal"><span class="pre">parameters_schema</span></code> attribute.</p>
<p>Contribution by Hiroyasu OHYAMA. #3094</p>
</li>
<li><p class="first">Introduce validation of trigger payload for non-system and user-defined triggers which is
performed when dispatching a trigger inside a sensor and when sending a trigger via custom
webhook.</p>
<p>Validation is only performed if <code class="docutils literal"><span class="pre">system.validate_trigger_payload</span></code> config option is enabled
(it’s disabled by default) and if trigger object defines <code class="docutils literal"><span class="pre">payload_schema</span></code> attribute.</p>
<p>Contribution by Hiroyasu OHYAMA. #3094</p>
</li>
<li><p class="first">Add support for <cite>st2 login</cite> and <cite>st2 whoami</cite> commands. These add some additional functionality
beyond the existing <cite>st2 auth</cite> command and actually works with the local configuration so that
users do not have to.</p>
</li>
<li><p class="first">Add support for complex rendering inside of array and object types. This allows the user to
nest Jinja variables in array and object types.</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">-j</span></code> flag to the <code class="docutils literal"><span class="pre">st2-run-pack-tests</span></code> script. When this flag is specified script will
just try to run the tests and it won’t set up the virtual environment and install the
dependencies. This flag can be used when virtual environment for pack tests already exists and
when you know dependencies are already installed and up to date. (new feature)</p>
</li>
</ul>
</div>
<div class="section" id="id30">
<h3>Changed<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Mistral fork is updated to match the master branch at OpenStack Mistral. (improvement)</li>
<li>Update Python runner to throw a more user-friendly exception in case action metadata file
references a script file which doesn’t exist or which contains invalid syntax. (improvement)</li>
<li>Update <code class="docutils literal"><span class="pre">st2auth</span></code> service so it includes more context and throws a more user-friendly exception
when retrieving an auth backend instance fails. This makes it easier to debug and spot various
auth backend issues related to typos, misconfiguration and similar. (improvement)</li>
<li>Let querier plugin decide whether to delete state object on error. Mistral querier will
delete state object on workflow completion or when the workflow or task references no
longer exists. (improvement)`</li>
</ul>
</div>
<div class="section" id="id31">
<h3>Removed<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">{{user.}}</span></code> and <code class="docutils literal"><span class="pre">{{system.}}</span></code> notations to access user and system
scoped items from datastore are now unsupported. Use  <code class="docutils literal"><span class="pre">{{st2kv.user.}}</span></code>
and <code class="docutils literal"><span class="pre">{{st2kv.system.}}</span></code> instead. Please update all your content (actions, rules and
workflows) to use the new notation. (improvement)</li>
</ul>
</div>
<div class="section" id="id32">
<h3>Fixed<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix returning a tuple from the Python runner so it also works correctly, even if action returns
a complex type (e.g. Python class instance) as a result. (bug fix)</p>
<p>Reported by skjbulcher #3133</p>
</li>
<li><p class="first">Fix a bug with <code class="docutils literal"><span class="pre">packs.download</span></code> action and as such as <code class="docutils literal"><span class="pre">pack</span> <span class="pre">install</span></code> command not working with
git repositories which used a default branch which was not <code class="docutils literal"><span class="pre">master</span></code>. (bug fix)</p>
</li>
<li><p class="first">Fix a bug with not being able to apply some global permission types (permissions which are global
and not specific to a resource) such as pack install, pack remove, pack search, etc. to a role
using <code class="docutils literal"><span class="pre">st2-apply-rbac-definitions</span></code>. (bug fix)</p>
</li>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">/v1/packs/views/files/&lt;pack</span> <span class="pre">ref</span> <span class="pre">or</span> <span class="pre">id&gt;</span></code> and
<code class="docutils literal"><span class="pre">/v1/packs/views/file/&lt;pack</span> <span class="pre">ref</span> <span class="pre">or</span> <span class="pre">id&gt;/&lt;file</span> <span class="pre">path&gt;</span></code> API endpoint so it
works correctly for packs where pack name is not equal to the pack ref. (bug fix)</p>
<p>Reported by skjbulcher #3128</p>
</li>
<li><p class="first">Improve binary file detection and fix “pack files” API controller so it works correctly for
new-style packs which are also git repositories. (bug fix)</p>
</li>
<li><p class="first">Fix cancellation specified in concurrency policies to cancel actions appropriately. Previously,
mistral workflow is orphaned and left in a running state. (bug fix)</p>
</li>
<li><p class="first">If a retry policy is defined, action executions under the context of a workflow will not be
retried on timeout or failure. Previously, action execution will be retried but workflow is
terminated. (bug fix)</p>
</li>
<li><p class="first">Fix how mistral client and resource managers are being used in the mistral runner. Authentication
has changed in the mistral client. Fix unit test accordingly. (bug fix)</p>
</li>
<li><p class="first">Fix issue where passing a single integer member for an array parameter for an action would
cause a type mismatch in the API (bug fix)</p>
</li>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">--config-file</span></code> st2 CLI argument not correctly expanding the provided path if the path
contained a reference to the user home directory (<code class="docutils literal"><span class="pre">~</span></code>, e.g. <code class="docutils literal"><span class="pre">~/.st2/config.ini</span></code>) (bug fix)</p>
</li>
<li><p class="first">Fix action alias update API endpoint. (bug fix)</p>
</li>
<li><p class="first">Fix a bug with <code class="docutils literal"><span class="pre">--api-token</span></code> / <code class="docutils literal"><span class="pre">-t</span></code> and other CLI option values not getting correctly
propagated to all the API calls issued in the <code class="docutils literal"><span class="pre">st2</span> <span class="pre">pack</span> <span class="pre">install</span></code>, <code class="docutils literal"><span class="pre">st2</span> <span class="pre">pack</span> <span class="pre">remove</span></code> and
<code class="docutils literal"><span class="pre">st2</span> <span class="pre">pack</span> <span class="pre">config</span></code> commands. (bug fix)</p>
</li>
</ul>
</div>
</div>
<div class="section" id="december-16-2016">
<h2>2.1.1 - December 16, 2016<a class="headerlink" href="#december-16-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id33">
<h3>Added<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">core.http</span></code> action now also supports HTTP basic auth and digest authentication by passing
<code class="docutils literal"><span class="pre">username</span></code> and <code class="docutils literal"><span class="pre">password</span></code> parameter to the action. (new feature)</li>
<li>After running <code class="docutils literal"><span class="pre">st2</span> <span class="pre">pack</span> <span class="pre">install</span></code> CLI command display which packs have been installed.
(improvement)</li>
</ul>
</div>
<div class="section" id="id34">
<h3>Changed<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Update <code class="docutils literal"><span class="pre">/v1/packs/register</span></code> API endpoint so it throws on failure (e.g. invalid pack or resource
metadata). This way the default behavior is consistent with default
<code class="docutils literal"><span class="pre">st2ctl</span> <span class="pre">reload</span> <span class="pre">--register-all</span></code> behavior.
If user doesn’t want the API endpoint to fail on failure, they can pass
<code class="docutils literal"><span class="pre">&quot;fail_on_failure&quot;:</span> <span class="pre">false</span></code> attribute in the request payload. (improvement)</li>
<li>Throw a more user-friendly exception when registering packs (<code class="docutils literal"><span class="pre">st2ctl</span> <span class="pre">reload</span></code>) if pack ref /
name is invalid. (improvement)</li>
<li>Update <code class="docutils literal"><span class="pre">packs.load</span></code> action to also register triggers by default. (improvement)</li>
</ul>
</div>
<div class="section" id="id35">
<h3>Fixed<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">GET</span> <span class="pre">/v1/packs/&lt;pack</span> <span class="pre">ref</span> <span class="pre">or</span> <span class="pre">id&gt;</span></code> API endpoint - make sure pack object is correctly returned
when pack ref doesn’t match pack name. Previously, 404 not found was thrown. (bug fix)</p>
</li>
<li><p class="first">Update local action runner so it supports and works with non-ascii (unicode) parameter keys and
values. (bug fix)</p>
<p>Contribution by Hiroyasu OHYAMA. #3116</p>
</li>
<li><p class="first">Update <code class="docutils literal"><span class="pre">/v1/packs/register</span></code> API endpoint so it registers resources in the correct order which
is the same as order used in <code class="docutils literal"><span class="pre">st2-register-content</span></code> script. (bug fix)</p>
</li>
</ul>
</div>
</div>
<div class="section" id="december-05-2016">
<h2>2.1.0 - December 05, 2016<a class="headerlink" href="#december-05-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id36">
<h3>Added<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">New pack management:</p>
<ul class="simple">
<li>Add new <code class="docutils literal"><span class="pre">stackstorm_version</span></code> and <code class="docutils literal"><span class="pre">system</span></code> fields to the pack.yaml metadata file. Value of
the first field can contain a specific StackStorm version with which the pack is designed to
work with (e.g. <code class="docutils literal"><span class="pre">&gt;=1.6.0,&lt;2.2.0</span></code> or <code class="docutils literal"><span class="pre">&gt;2.0.0</span></code>). This field is checked when installing /
registering a pack and installation is aborted if pack doesn’t support the currently running
StackStorm version. Second field can contain an object with optional system / OS level
dependencies. (new feature)</li>
<li>Add new <code class="docutils literal"><span class="pre">contributors</span></code> field to the pack metadata file. This field can contain a list of
people who have contributed to the pack. The format is <code class="docutils literal"><span class="pre">Name</span> <span class="pre">&lt;email&gt;</span></code>, e.g.
<code class="docutils literal"><span class="pre">Tomaz</span> <span class="pre">Muraus</span> <span class="pre">&lt;tomaz&#64;stackstorm.com&gt;</span></code> (new feature)</li>
<li>Add support for default values and dynamic config values for nested config objects.
(new feature, improvement)</li>
<li>Add new <code class="docutils literal"><span class="pre">st2-validate-pack-config</span></code> tool for validating config file against a particular
config schema file. (new-feature)</li>
</ul>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">POST</span> <span class="pre">/v1/actionalias/match</span></code> API endpoint which allows users to perform ChatOps action
alias matching server-side. This makes it easier to build and maintain StackStorm ChatOps
clients / adapters for various protocols and mediums. Clients can now be very thin wrappers
around this new API endpoint.</p>
<p>Also add two new corresponding CLI commands - <code class="docutils literal"><span class="pre">st2</span> <span class="pre">alias-execution</span> <span class="pre">match</span></code> and
<code class="docutils literal"><span class="pre">st2</span> <span class="pre">alias-execution</span> <span class="pre">execute</span></code>. Contribution by Anthony Shaw. (new feature) #2895.</p>
</li>
<li><p class="first">Adding ability to pass complex array types via CLI by first trying to
seralize the array as JSON and then falling back to comma separated array.</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">core.pause</span></code> action. This action behaves like sleep and can be used inside the action
chain or Mistral workflows where waiting / sleeping is desired before proceeding with a next
task. Contribution by Paul Mulvihill. (new feature) #2933.</p>
</li>
<li><p class="first">Allow user to supply multiple resource ids using <code class="docutils literal"><span class="pre">?id</span></code> query parameter when filtering
“get all” API endpoint result set (e.g. <cite>?id=1,2,3,4</cite>). This allows for a better client and
servers performance when user is polling and interested in multiple resources such as polling on
multiple action executions. (improvement)</p>
</li>
<li><p class="first">Add support for ssh config file for ParamikoSSHrunner. Now <code class="docutils literal"><span class="pre">ssh_config_file_path</span></code> can be set
in st2 config and can be used to access remote hosts when <code class="docutils literal"><span class="pre">use_ssh_config</span></code> is set to
<code class="docutils literal"><span class="pre">True</span></code>. However, to access remote hosts, action parameters like username and
password/private_key, if provided with action, will have precedence over the config file
entry for the host. #2941 #3032 #3058 [Eric Edgar] (improvement)</p>
</li>
</ul>
</div>
<div class="section" id="id37">
<h3>Changed<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Improved pack validation - now when the packs are registered we check that:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">version</span></code> attribute in the pack metadata file matches valid semver format (e.g
<code class="docutils literal"><span class="pre">0.1.0</span></code>, <code class="docutils literal"><span class="pre">2.0.0</span></code>, etc.)</li>
<li><code class="docutils literal"><span class="pre">email</span></code> attribute (if specified) contains a valid email address. (improvement)</li>
<li>Only valid word characters (<code class="docutils literal"><span class="pre">a-z</span></code>, <code class="docutils literal"><span class="pre">0-9</span></code> and <code class="docutils literal"><span class="pre">_</span></code>) used for action parameter
names. Previously, due to bug in the code, any character was allowed.</li>
</ul>
<p>If validation fails, pack registration will fail. If you have an existing action or pack
definition which uses invalid characters, pack registration will fail. <strong>You must update
your packs</strong>.</p>
</li>
<li><p class="first">For consistency with new pack name validation changes, sample <code class="docutils literal"><span class="pre">hello-st2</span></code> pack has been
renamed to <code class="docutils literal"><span class="pre">hello_st2</span></code>.</p>
</li>
<li><p class="first">Update <code class="docutils literal"><span class="pre">packs.install</span></code> action (<code class="docutils literal"><span class="pre">pack</span> <span class="pre">install</span></code> command) to only load resources from the
packs which are being installed. Also update it and remove “restart sensor container” step from
the install workflow. This step hasn’t been needed for a while now because sensor container
dynamically reads a list of available sensors from the database and starts the sub processes.
(improvement)</p>
</li>
<li><p class="first">Improve API exception handling and make sure 400 status code is returned instead of 500 on
mongoengine field validation error. (improvement)</p>
</li>
<li><p class="first">Throw a more user-friendly exception if rendering a dynamic configuration value inside the config
fails. (improvement)</p>
</li>
<li><p class="first">Change st2api so that a full execution object is returned instead of an error message, when an
API client requests cancellation of an execution that is already canceled</p>
</li>
<li><p class="first">Speed up short-lived Python runner actions by up to 70%. This way done by re-organizing and
re-factoring code to avoid expensive imports such as jsonschema, jinja2, kombu and mongoengine
in the places where those imports are not actually needed and by various other optimizations.
(improvement)</p>
</li>
<li><p class="first">Improve performance of <code class="docutils literal"><span class="pre">GET</span> <span class="pre">/executions/views/filters</span></code> by creating additional indexes on
executions collection</p>
</li>
<li><p class="first">Upgrade various internal Python library dependencies to the latest stable versions (gunicorn,
kombu, six, appscheduler, passlib, python-gnupg, semver, paramiko, python-keyczar, virtualenv).</p>
</li>
</ul>
</div>
<div class="section" id="id38">
<h3>Removed<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove <code class="docutils literal"><span class="pre">packs.info</span></code> action because <code class="docutils literal"><span class="pre">.gitinfo</span></code> file has been deprecated with the new pack
management approach. Now pack directories are actual checkouts of the corresponding pack git
repositories so this file is not needed anymore.</li>
</ul>
</div>
<div class="section" id="id39">
<h3>Fixed<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="first docutils">
<dt>Fix <code class="docutils literal"><span class="pre">packs.uninstall</span></code> action so it also deletes <code class="docutils literal"><span class="pre">configs</span></code> and <code class="docutils literal"><span class="pre">policies</span></code> which belong to</dt>
<dd>the pack which is being uninstalled. (bug fix)</dd>
</dl>
</li>
<li>When a policy cancels a request due to concurrency, it leaves end_timestamp set to None which
the notifier expects to be a date. This causes an exception in “isotime.format()”. A patch was
released that catches this exception, and populates payload[‘end_timestamp’] with the equivalent
of “datetime.now()” when the exception occurs.</li>
<li>Adding check for datastore Client expired tokens used in sensor container</li>
<li>Fix python action runner actions and make sure that modules from <code class="docutils literal"><span class="pre">st2common/st2common/runners</span></code>
directory don’t pollute <code class="docutils literal"><span class="pre">PYTHONPATH</span></code> for python runner actions. (bug fix)</li>
</ul>
</div>
</div>
<div class="section" id="september-30-2016">
<h2>2.0.1 - September 30, 2016<a class="headerlink" href="#september-30-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id40">
<h3>Added<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow users to specify sort order when listing traces using the API endpoint by specifying
<code class="docutils literal"><span class="pre">?sort_desc=True|False</span></code> query parameters and by passing <code class="docutils literal"><span class="pre">--sort=asc|desc</span></code> parameter to
the <code class="docutils literal"><span class="pre">st2</span> <span class="pre">trace</span> <span class="pre">list</span></code> CLI command. (improvement)</li>
<li>Retry connecting to RabbitMQ on services start-up if connecting fails because
of an intermediate network error or similar. (improvements)</li>
<li>Allow jinja expressions <code class="docutils literal"><span class="pre">{{st2kv.system.foo}}</span></code> and <code class="docutils literal"><span class="pre">{{st2kv.user.foo}}</span></code> to access
datastore items from workflows, actions and rules. This is in addition to supporting
expressions <code class="docutils literal"><span class="pre">{{system.foo}}</span></code> and <code class="docutils literal"><span class="pre">{{user.foo}}</span></code>.</li>
</ul>
</div>
<div class="section" id="id41">
<h3>Changed<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Update traces list API endpoint and <code class="docutils literal"><span class="pre">st2</span> <span class="pre">trace</span> <span class="pre">list</span></code> so the traces are sorted by
<code class="docutils literal"><span class="pre">start_timestamp</span></code> in descending order by default. This way it’s consistent with executions
list and <code class="docutils literal"><span class="pre">-n</span></code> CLI parameter works as expected. (improvement)</li>
</ul>
</div>
<div class="section" id="id42">
<h3>Deprecated<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>In subsequent releases, the expressions <code class="docutils literal"><span class="pre">{{system.}}</span></code> and <code class="docutils literal"><span class="pre">{{user.}}</span></code> for accessing
datastore items will be deprecated. It is recommended to switch to using
<code class="docutils literal"><span class="pre">{{st2kv.system.}}</span></code> and <code class="docutils literal"><span class="pre">{{st2kv.user.}}</span></code> for your content. (improvement)</li>
</ul>
</div>
<div class="section" id="id43">
<h3>Fixed<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">get</span></code> command so now <code class="docutils literal"><span class="pre">--attr</span></code> argument correctly works with child
properties of the <code class="docutils literal"><span class="pre">result</span></code> and <code class="docutils literal"><span class="pre">trigger_instance</span></code> dictionary (e.g. <code class="docutils literal"><span class="pre">--attr</span>
<span class="pre">result.stdout</span> <span class="pre">result.stderr</span></code>). (bug fix)</li>
<li>Fix a bug with action default parameter values not supporting Jinja template
notation for parameters of type <code class="docutils literal"><span class="pre">object</span></code>. (bug fix, improvement)</li>
<li>Fix <code class="docutils literal"><span class="pre">--user</span></code> / <code class="docutils literal"><span class="pre">-u</span></code> argument in the <code class="docutils literal"><span class="pre">st2</span> <span class="pre">key</span> <span class="pre">delete</span></code> CLI command.</li>
</ul>
</div>
</div>
<div class="section" id="august-31-2016">
<h2>2.0.0 - August 31, 2016<a class="headerlink" href="#august-31-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id44">
<h3>Added<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Implement custom Jinja filter functions <code class="docutils literal"><span class="pre">to_json_string</span></code>, <code class="docutils literal"><span class="pre">to_yaml_string</span></code>,
<code class="docutils literal"><span class="pre">to_human_time_from_seconds</span></code> that can be used in actions and workflows. (improvement)</li>
<li>Default chatops message to include time taken to complete an execution. This uses
<code class="docutils literal"><span class="pre">to_human_time_from_seconds</span></code> function. (improvement)</li>
<li>Allow user to cancel multiple executions using a single invocation of <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">cancel</span></code>
command by passing multiple ids to the command -
<code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">cancel</span> <span class="pre">&lt;id</span> <span class="pre">1&gt;</span> <span class="pre">&lt;id</span> <span class="pre">2&gt;</span> <span class="pre">&lt;id</span> <span class="pre">n&gt;</span></code> (improvement)</li>
<li>We now execute –register-rules as part of st2ctl reload. PR raised by Vaishali:
<a class="reference external" href="https://github.com/StackStorm/st2/issues/2861#issuecomment-239275641">https://github.com/StackStorm/st2/issues/2861#issuecomment-239275641</a></li>
<li>Update <code class="docutils literal"><span class="pre">packs.uninstall</span></code> command to print a warning message if any rules in the system
reference a trigger from a pack which is being uninstalled. (improvement)</li>
<li>Allow user to list and view rules using the API even if a rule in the database references a
non-existent trigger. This shouldn’t happen during normal usage of StackStorm, but it makes it
easier for the user to clean up in case database ends up in a inconsistent state. (improvement)</li>
</ul>
</div>
<div class="section" id="id45">
<h3>Changed<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Refactor Jinja filter functions into appropriate modules. (improvement)</li>
<li>Bump default timeout for <code class="docutils literal"><span class="pre">packs.load</span></code> command from <code class="docutils literal"><span class="pre">60</span></code> to <code class="docutils literal"><span class="pre">100</span></code> seconds. (improvement)</li>
<li>Upgrade pip and virtualenv libraries used by StackStorm pack virtual environments to the latest
versions (8.1.2 and 15.0.3).</li>
<li>Change Python runner action and sensor Python module loading so the module is still loaded even if
the module name clashes with another module which is already in <code class="docutils literal"><span class="pre">PYTHONPATH</span></code>
(improvement)</li>
</ul>
</div>
<div class="section" id="id46">
<h3>Fixed<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Fix a bug when jinja templates with filters (for example,
<code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span> <span class="pre">core.local</span> <span class="pre">cmd='echo</span> <span class="pre">{{&quot;1.6.0&quot;</span> <span class="pre">|</span> <span class="pre">version_bump_minor}}'</span></code>) in parameters wasn’t rendered
correctly when executing actions. (bug-fix)</p>
</li>
<li><p class="first">Fix validation of the action parameter <code class="docutils literal"><span class="pre">type</span></code> attribute provided in the YAML metadata.
Previously we allowed any string value, now only valid types (object, string, number,
integer, array, null) are allowed. (bug fix)</p>
</li>
<li><p class="first">Fix disabling and enabling of a sensor through an API and CLI. (bug-fix)</p>
</li>
<li><p class="first">Fix HTTP runner so it works correctly when body is provided with newer versions of requests
library (&gt;= 2.11.0). (bug-fix) #2880</p>
<p>Contribution by Shu Sugimoto.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="august-8-2016">
<h2>1.6.0 - August 8, 2016<a class="headerlink" href="#august-8-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id47">
<h3>Added<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow user to specify an action which is performed on an execution (<code class="docutils literal"><span class="pre">delay</span></code>, <code class="docutils literal"><span class="pre">cancel</span></code>) when a
concurrency policy is used and a defined threshold is reached. For backward compatibility,
<code class="docutils literal"><span class="pre">delay</span></code> is the default behavior, but now users can also specify <code class="docutils literal"><span class="pre">cancel</span></code> and an execution will
be canceled instead of delayed when a threshold is reached.</li>
<li>Add support for sorting execution list results, allowing access to oldest items. (improvement)</li>
<li>Allow administrator to configure maximum limit which can be specified using <code class="docutils literal"><span class="pre">?limit</span></code>
query parameters when making API calls to get all / list endpoints. For backward compatibility
and safety reasons, the default value still is <code class="docutils literal"><span class="pre">100</span></code>. (improvement)</li>
<li>Include a chatops alias sample in <code class="docutils literal"><span class="pre">examples</span></code> pack that shows how to use <code class="docutils literal"><span class="pre">format</span></code> option to
display chatops messages in custom formatted way. (improvement)</li>
<li>Include a field <code class="docutils literal"><span class="pre">elapsed_seconds</span></code> in execution API response for GET calls. The clients using
the API can now use <code class="docutils literal"><span class="pre">elapsed_seconds</span></code> without having to repeat computation. (improvement)</li>
<li>Implement custom YAQL function <code class="docutils literal"><span class="pre">st2kv</span></code> in Mistral to get key-value pair from StackStorm’s
datastore. (new-feature)</li>
</ul>
</div>
<div class="section" id="id48">
<h3>Changed<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Upgrade to pymongo 3.2.2 and mongoengine 0.10.6 so StackStorm now also supports and works with
MongoDB 3.x. (improvement)</li>
<li>Update action runner to use two internal green thread pools - one for regular (non-workflow) and
one for workflow actions. Both pool sizes are user-configurable. This should help increase the
throughput of a single action runner when the system is not over-utilized. It can also help
prevent deadlocks which may occur when using delay policies with action-chain workflows.
(improvement)</li>
<li>Update CLI commands to make sure that all of them support <code class="docutils literal"><span class="pre">--api-key</span></code> option. (bug-fix)</li>
<li>Update <code class="docutils literal"><span class="pre">st2-register-content</span></code> script to exit with non-zero on failure (e.g. invalid resource
metadata, etc.) by default. For backward compatibility reasons, <code class="docutils literal"><span class="pre">--register-fail-on-failure</span></code>
flag was left there, but it now doesn’t do anything since this is the default behavior. For ease
of migrations, users can revert to the old behavior by using new
<code class="docutils literal"><span class="pre">--register-no-fail-on-failure</span></code> flag. (improvement)</li>
<li>Allow Python runner actions to return execution status (success, failure) by returning a tuple
from the <code class="docutils literal"><span class="pre">run()</span></code> method. First item in the tuple is a flag indicating success (<code class="docutils literal"><span class="pre">True</span></code> /
<code class="docutils literal"><span class="pre">False</span></code>) and the second one is the result. Previously, user could only cause action to fail by
throwing an exception or exiting which didn’t allow for a result to be returned. With this new
approach, user can now also return an optional result with a failure. (new feature)</li>
<li>Include testing for chatops <code class="docutils literal"><span class="pre">format_execution_result</span></code> python action. The tests cover various
action types. (improvement)</li>
<li>Update <code class="docutils literal"><span class="pre">st2-register-content</span></code> script so it validates new style configs in
<code class="docutils literal"><span class="pre">/opt/stackstorm/configs/</span></code> directory when using <code class="docutils literal"><span class="pre">--register-configs</span></code> flag if a pack contains
a config schema (<code class="docutils literal"><span class="pre">config.schema.yaml</span></code>). (improvement)</li>
</ul>
</div>
<div class="section" id="id49">
<h3>Fixed<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make sure policies which are disabled are not applied. (bug fix)
Reported by Brian Martin.</li>
<li>Fix <code class="docutils literal"><span class="pre">Internal</span> <span class="pre">Server</span> <span class="pre">Error</span></code> when an undefined jinja variable is used in action alias ack field.
We now send a http status code <code class="docutils literal"><span class="pre">201</span></code> but also explicitly say we couldn’t render the <code class="docutils literal"><span class="pre">ack</span></code>
field. The <code class="docutils literal"><span class="pre">ack</span></code> is anyways a nice-to-have message which is not critical. Previously, we still
kicked off the execution but sent out <code class="docutils literal"><span class="pre">Internal</span> <span class="pre">Server</span> <span class="pre">Error</span></code> which might confuse the user
whether execution was kicked off or not. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="july-13-2016">
<h2>1.5.1 - July 13, 2016<a class="headerlink" href="#july-13-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id50">
<h3>Added<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add support for default values when a new pack configuration is used. Now if a default value
is specified for a required config item in the config schema and a value for that item is not
provided in the config, default value from config schema is used. (improvement)</li>
<li>Add support for posixGroup to the enterprise LDAP auth backend. (improvement, bug-fix)</li>
</ul>
</div>
<div class="section" id="id51">
<h3>Changed<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow user to prevent execution parameter merging when re-running an execution by passing
<code class="docutils literal"><span class="pre">?no_merge=true</span></code> query parameter to the execution re-run API endpoint. (improvement)</li>
</ul>
</div>
<div class="section" id="id52">
<h3>Fixed<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix trigger registration when using st2-register-content script with <code class="docutils literal"><span class="pre">--register-triggers</span></code>
flag. (bug-fix)</li>
<li>Fix an issue with CronTimer sometimes not firing due to TriggerInstance creation failure.
(bug-fix)
Reported by Cody A. Ray</li>
</ul>
</div>
</div>
<div class="section" id="june-24-2016">
<h2>1.5.0 - June 24, 2016<a class="headerlink" href="#june-24-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id53">
<h3>Added<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>TriggerInstances now have statuses to help track if a TriggerInstance has been processed,
is being processed or failed to process. This bring out some visibility into parts of the
TriggerInstance processing pipeline and can help identify missed events. (new-feature)</li>
<li>Allow user to enable service debug mode by setting <code class="docutils literal"><span class="pre">system.debug</span></code> config file option to
<code class="docutils literal"><span class="pre">True</span></code>.
Note: This is an alternative to the existing <code class="docutils literal"><span class="pre">--debug</span></code> CLI flag which comes handy when running
API services under gunicorn. (improvement)</li>
<li>Add new API endpoint and corresponding CLI commands (<code class="docutils literal"><span class="pre">st2</span> <span class="pre">runner</span> <span class="pre">disable</span> <span class="pre">&lt;name&gt;</span></code>,
<code class="docutils literal"><span class="pre">st2</span> <span class="pre">runner</span> <span class="pre">enable</span> <span class="pre">&lt;name&gt;</span></code>) which allows administrator to disable (and re-enable) a runner.
(new feature)</li>
<li>Add RBAC support for runner types API endpoints. (improvement)</li>
<li>Add <code class="docutils literal"><span class="pre">get_fixture_content</span></code> method to all the base pack resource test classes. This method
enforces fixture files location and allows user to load raw fixture content from a file on disk.
(new feature)
future, pack configs will be validated against the schema (if available). (new feature)</li>
<li>Add data model and API changes for supporting user scoped variables. (new-feature, experimental)</li>
<li>Add <code class="docutils literal"><span class="pre">-y</span></code> / <code class="docutils literal"><span class="pre">--yaml</span></code> flag to the CLI <code class="docutils literal"><span class="pre">list</span></code> and <code class="docutils literal"><span class="pre">get</span></code> commands. If this flag is provided,
command response will be formatted as YAML. (new feature)</li>
<li>Ability to migrate api keys to new installs. (new feature)</li>
<li>Introduce a new concept of pack config schemas. Each pack can now contain a
<code class="docutils literal"><span class="pre">config.schema.yaml</span></code> file. This file can contain an optional schema for the pack config.
Site-specific pack configuration is then stored outside the pack directory, in
<code class="docutils literal"><span class="pre">/opt/stackstorm/configs/&lt;pack</span> <span class="pre">name&gt;.yaml</span></code>. Those files are similar to the existing pack
configs, but in addition to the static values they can also contain dynamic values. Dynamic value
is a value which contains a Jinja expression which is resolved to a datastore item during
run-time. (new feature)</li>
<li>Allow administrator user whose context will be used when running an action or re-running an
action execution. (new feature)</li>
<li>Store action execution state transitions (event log) in the <code class="docutils literal"><span class="pre">log</span></code> attribute on the
ActionExecution object. (new feature)</li>
<li>Admins will now be able pass <code class="docutils literal"><span class="pre">--show-secrets</span></code> when listing api keys to get the <code class="docutils literal"><span class="pre">key_hash</span></code>
un-masked on the CLI. (new-feature)</li>
<li>Add <code class="docutils literal"><span class="pre">--register-triggers</span></code> flag to the <code class="docutils literal"><span class="pre">st2-register-content</span></code> script and <code class="docutils literal"><span class="pre">st2ctl</span></code>.
When this flag is provided, all triggers contained within a pack triggers directory are
registered, consistent with the behavior of sensors, actions, etc. This feature allows users
to register trigger types outside the scope of the sensors. (new-feature) [Cody A. Ray]</li>
</ul>
</div>
<div class="section" id="id54">
<h3>Changed<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Lazily establish SFTP connection inside the remote runner when and if SFTP connection is needed.
This way, remote runner should now also work under cygwin on Windows if SFTP related
functionality (file upload, directory upload, etc.) is not used. (improvement)
Reported by  Cody A. Ray</li>
<li>API and CLI allow rules to be filtered by their enable state. (improvement)</li>
<li>Send out a clear error message when SSH private key is passphrase protected but user fails to
supply passphrase with private_key when running a remote SSH action. (improvement)</li>
</ul>
</div>
<div class="section" id="id55">
<h3>Removed<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove now deprecated Fabric based remote runner and corresponding
<code class="docutils literal"><span class="pre">ssh_runner.use_paramiko_ssh_runner</span></code> config option. (cleanup)</li>
<li>Remove support for JSON format for resource metadata files. YAML was introduced and support for
JSON has been deprecated in StackStorm v0.6. Now the only supported metadata file format is YAML.</li>
</ul>
</div>
<div class="section" id="id56">
<h3>Fixed<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix for <code class="docutils literal"><span class="pre">data`</span> <span class="pre">is</span> <span class="pre">dropped</span> <span class="pre">if</span> <span class="pre">``message</span></code> is not present in notification. (bug-fix)</li>
<li>Fix support for password protected private key files in the remote runner. (bug-fix)</li>
<li>Allow user to provide a path to the private SSH key file for the remote runner <code class="docutils literal"><span class="pre">private_key</span></code>
parameter. Previously only raw key material was supported. (improvement)</li>
<li>Allow <code class="docutils literal"><span class="pre">register-setup-virtualenvs</span></code> flag to be used in combination with <code class="docutils literal"><span class="pre">register-all</span></code> in the
<code class="docutils literal"><span class="pre">st2-register-content</span></code> script.</li>
<li>Add missing <cite>pytz</cite> dependency to <code class="docutils literal"><span class="pre">st2client</span></code> requirements file. (bug-fix)</li>
<li>Fix datastore access on Python runner actions (set <code class="docutils literal"><span class="pre">ST2_AUTH_TOKEN</span></code> and <code class="docutils literal"><span class="pre">ST2_API_URL</span></code> env
variables in Python runner actions to match sensors). (bug-fix)</li>
<li>Alias names are now correctly scoped to a pack. This means the same name for alias can be used
across different packs. (bug-fix)</li>
<li>Fix a regression in filtering rules by pack with CLI. (bug-fix)</li>
<li>Make sure <cite>st2-submit-debug-info</cite> cleans up after itself and deletes a temporary directory it
creates. (improvement) #2714
[Kale Blankenship]</li>
<li>Fix string parameter casting - leave actual <code class="docutils literal"><span class="pre">None</span></code> value as-is and don’t try to cast it to a
string which would fail. (bug-fix, improvement)</li>
<li>Add a work-around for trigger creation which would case rule creation for CronTrigger to fail
under some circumstances. (workaround, bug-fix)</li>
<li>Make sure <code class="docutils literal"><span class="pre">-a</span> <span class="pre">all</span></code> / <code class="docutils literal"><span class="pre">--attr=all</span></code> flag works for <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">list</span></code> command (bug-fix)</li>
<li>Fix SSH bastion host support by ensuring the bastion parameter is passed to the paramiko ssh
client. (bug-fix) #2543 [Adam Mielke]</li>
</ul>
</div>
<div class="section" id="id57">
<h3>Security<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>SSL support for mongodb connections. (improvement)</li>
</ul>
</div>
</div>
<div class="section" id="april-18-2016">
<h2>1.4.0 - April 18, 2016<a class="headerlink" href="#april-18-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id58">
<h3>Added<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Passphrase support for the SSH runner. (improvement)</li>
<li>Add <code class="docutils literal"><span class="pre">extra</span></code> field to the ActionAlias schema for adapter-specific parameters. (improvement)</li>
<li>Allow user to pass a boolean value for the <code class="docutils literal"><span class="pre">cacert</span></code> st2client constructor argument. This way
it now mimics the behavior of the <code class="docutils literal"><span class="pre">verify</span></code> argument of the <code class="docutils literal"><span class="pre">requests.request</span></code> method.
(improvement)</li>
<li>Add datastore access to Python runner actions via the <code class="docutils literal"><span class="pre">action_service</span></code> which is available
to all the Python runner actions after instantiation. (new-feature) #2396 #2511
[Kale Blankenship]</li>
<li>Update <code class="docutils literal"><span class="pre">st2actions.runners.pythonrunner.Action</span></code> class so the constructor also takes
<code class="docutils literal"><span class="pre">action_service</span></code> as the second argument.</li>
<li>Display number of seconds which have elapsed for all the executions which have completed
when using <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">get</span></code> CLI command. (improvement)</li>
<li>Display number of seconds elapsed for all the child tasks of a workflow action when using
<code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">get</span></code> CLI command. (improvement)</li>
<li>Various improvements in the <code class="docutils literal"><span class="pre">linux.wait_for_ssh</span></code> action:<ul>
<li>Support for password based authentication.</li>
<li>Support for non-RSA SSH keys.</li>
<li>Support for providing a non-default (22) SSH server port.</li>
<li>Support for using default system user (stanley) ssh key if neither <code class="docutils literal"><span class="pre">password</span></code> nor
<code class="docutils literal"><span class="pre">keyfile</span></code> parameter is provided.</li>
</ul>
</li>
<li>Support for leading and trailing slashes in the webhook urls. (improvement)</li>
<li>Introduce new <code class="docutils literal"><span class="pre">matchwildcard</span></code> rule criteria operator. This operator provides supports for Unix
shell-style wildcards (<code class="docutils literal"><span class="pre">*</span></code>, <code class="docutils literal"><span class="pre">?</span></code>). (new feature)</li>
<li>Allow user to pass <code class="docutils literal"><span class="pre">verbose</span></code> parameter to <code class="docutils literal"><span class="pre">linux.rm</span></code> action. For backward compatibility
reasons it defaults to <code class="docutils literal"><span class="pre">true</span></code>. (improvement)</li>
<li>Add <code class="docutils literal"><span class="pre">--output</span></code> and <code class="docutils literal"><span class="pre">--existing-file</span></code> options to <code class="docutils literal"><span class="pre">st2-submit-debug-info</span></code>. [Kale Blankenship]</li>
<li>Allow user to specify a timezone in the CLI client config (<code class="docutils literal"><span class="pre">~/.st2/config</span></code>). If the timezone is
specified, all the timestamps displayed by the CLI will be shown in the configured timezone
instead of a default UTC display. (new feature)</li>
<li>Add <code class="docutils literal"><span class="pre">attachments</span></code> parameter to the <code class="docutils literal"><span class="pre">core.sendmail</span></code> action. (improvement) [Cody A. Ray]</li>
<li>Add <code class="docutils literal"><span class="pre">--register-setup-virtualenvs</span></code> flag to the <code class="docutils literal"><span class="pre">register-content</span></code> script and <code class="docutils literal"><span class="pre">st2ctl</span></code>.
When this flag is provided, Python virtual environments are created for all the registered packs.
This option is to be used with distributed setup where action runner services run on multiple
hosts to ensure virtual environments exist on all those hosts. (new-feature)</li>
<li>Update <code class="docutils literal"><span class="pre">core.st2.CronTimer</span></code> so it supports more of the cron-like expressions (<code class="docutils literal"><span class="pre">a-b</span></code>, <code class="docutils literal"><span class="pre">*/a</span></code>,
<code class="docutils literal"><span class="pre">x,y,z</span></code>, etc.). (improvement)</li>
<li>Add new <code class="docutils literal"><span class="pre">regex</span></code> and <code class="docutils literal"><span class="pre">iregex</span></code> rule criteria operator and deprecate <code class="docutils literal"><span class="pre">matchregex</span></code> in favor of
those two new operators. (new-feature) [Jamie Evans]</li>
<li>Add support for better serialization of the following parameter types for positional parameters
used in the local and remote script runner actions: <code class="docutils literal"><span class="pre">integer</span></code>, <code class="docutils literal"><span class="pre">float</span></code>, <code class="docutils literal"><span class="pre">boolean</span></code>,
<code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">object</span></code>. Previously those values were serialized as Python literals which made
parsing them in the shell scripts very cumbersome. Now they are serialized based on the simple
rules described in the documentation which makes it easy to use just by using simple shell
primitives such as if statements and <code class="docutils literal"><span class="pre">IFS</span></code> for lists. (improvement, new feature)</li>
<li>Add <code class="docutils literal"><span class="pre">-v</span></code> flag (verbose mode) to the <code class="docutils literal"><span class="pre">st2-run-pack-tests</span></code> script. (improvement)</li>
<li>Add support for additional SSH key exchange algorithms to the remote runner via upgrade to
paramiko 1.16.0. (new feature)</li>
<li>Add initial code framework for writing unit tests for action aliases. For the usage, please refer
to the “Pack Testing” documentation section. (new feature)</li>
<li>Add custom <code class="docutils literal"><span class="pre">use_none</span></code> Jinja template filter which can be used inside rules when invoking an
action. This filter ensures that <code class="docutils literal"><span class="pre">None</span></code> values are correctly serialized and is to be used when
TriggerInstance payload value can be <code class="docutils literal"><span class="pre">None</span></code> and <code class="docutils literal"><span class="pre">None</span></code> is also a valid value for a particular
action parameter. (improvement, workaround)</li>
</ul>
</div>
<div class="section" id="id59">
<h3>Changed<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Improvements to ChatOps deployments of packs via <code class="docutils literal"><span class="pre">pack</span> <span class="pre">deploy</span></code> [Jon Middleton]</li>
<li>Allow <code class="docutils literal"><span class="pre">/v1/webhooks</span></code> API endpoint request body to either be JSON or url encoded form data.
Request body type is determined and parsed accordingly based on the value of
<code class="docutils literal"><span class="pre">Content-Type</span></code> header.
Note: For backward compatibility reasons we default to JSON if <code class="docutils literal"><span class="pre">Content-Type</span></code> header is
not provided. #2473 [David Pitman]</li>
<li>Update <code class="docutils literal"><span class="pre">matchregex</span></code> rule criteria operator so it uses “dot all” mode where dot (<code class="docutils literal"><span class="pre">.</span></code>)
character will match any character including new lines. Previously <code class="docutils literal"><span class="pre">*</span></code> didn’t match
new lines. (improvement)</li>
<li>Move stream functionality from <code class="docutils literal"><span class="pre">st2api</span></code> into a new standalone <code class="docutils literal"><span class="pre">st2stream</span></code> service. Similar to
<code class="docutils literal"><span class="pre">st2api</span></code> and <code class="docutils literal"><span class="pre">st2auth</span></code>, stream is now a standalone service and WSGI app. (improvement)</li>
<li>Record failures to enforce rules due to missing actions or parameter validation errors. A
RuleEnforcement object will be created for failed enforcements that do not lead to an
ActionExecution creation. (improvement)</li>
<li>The list of required and optional configuration arguments for the LDAP auth backend has changed.
The LDAP auth backend supports other login name such as sAMAccountName. This requires a separate
service account for the LDAP backend to query for the DN related to the login name for bind to
validate the user password. Also, users must be in one or more groups specified in group_dns to
be granted access.</li>
<li>For consistency rename <code class="docutils literal"><span class="pre">deploy_pack</span></code> alias to <code class="docutils literal"><span class="pre">pack_deploy</span></code>.</li>
</ul>
</div>
<div class="section" id="id60">
<h3>Deprecated<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Drop deprecated and unused <code class="docutils literal"><span class="pre">system.admin_users</span></code> config option which has been replaced with
RBAC.</li>
<li>The <code class="docutils literal"><span class="pre">matchregex</span></code> rule criteria operator has been deprecated in favor of <code class="docutils literal"><span class="pre">regex</span></code> and
<code class="docutils literal"><span class="pre">iregex</span></code>.</li>
<li>Mistral has deprecated the use of task name (i.e. <code class="docutils literal"><span class="pre">$.task1</span></code>) to reference task result. It is
replaced with a <code class="docutils literal"><span class="pre">task</span></code> function that returns attributes of the task such as id, state, result,
and additional information (i.e. <code class="docutils literal"><span class="pre">task(task1).result</span></code>).</li>
</ul>
</div>
<div class="section" id="id61">
<h3>Fixed<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Bug fixes to allow Sensors to have their own log files. #2487 [Andrew Regan]</p>
</li>
<li><p class="first">Make sure that the <code class="docutils literal"><span class="pre">filename</span></code>, <code class="docutils literal"><span class="pre">module</span></code>, <code class="docutils literal"><span class="pre">funcName</span></code> and <code class="docutils literal"><span class="pre">lineno</span></code> attributes which are
available in the log formatter string contain the correct values. (bug-fix)</p>
<p>Reported by Andrew Regan.</p>
</li>
<li><p class="first">Make sure that sensor container child processes take into account <code class="docutils literal"><span class="pre">--use-debugger</span></code> flag passed
to the sensor container. This fixes support for remote debugging for sensor processes. (bug-fix)</p>
</li>
<li><p class="first">Fix <code class="docutils literal"><span class="pre">linux.traceroute</span></code> action. (bug fix)</p>
</li>
<li><p class="first">Fix a bug with positional argument handling in the local script runner. Now the arguments with a
no value or value of <code class="docutils literal"><span class="pre">None</span></code> are correctly passed to the script. (bug fix)</p>
</li>
<li><p class="first">Fix rule criteria comparison and make sure that false criteria pattern values such as integer
<code class="docutils literal"><span class="pre">0</span></code> are handled correctly. (bug-fix)</p>
<p>Reported by Igor Cherkaev.</p>
</li>
<li><p class="first">Fix alias executions API endpoint and make sure an exception is thrown if the user provided
command string doesn’t match the provided format string. Previously, a non-match was silently
ignored. (bug fix)</p>
</li>
</ul>
</div>
</div>
<div class="section" id="february-12-2016">
<h2>1.3.2 - February 12, 2016<a class="headerlink" href="#february-12-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id62">
<h3>Removed<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove <code class="docutils literal"><span class="pre">get_open_ports</span></code> action from Linux pack.</li>
</ul>
</div>
</div>
<div class="section" id="january-25-2016">
<h2>1.3.1 - January 25, 2016<a class="headerlink" href="#january-25-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id63">
<h3>Changed<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Dev environment by default now uses gunicorn to spin API and AUTH processes. (improvement)</li>
<li>Allow user to pass a boolean value for the <code class="docutils literal"><span class="pre">cacert</span></code> st2client constructor argument. This way
it now mimics the behavior of the <code class="docutils literal"><span class="pre">verify</span></code> argument of the <code class="docutils literal"><span class="pre">requests.request</span></code> method.
(improvement)</li>
</ul>
</div>
<div class="section" id="id64">
<h3>Fixed<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Make sure <code class="docutils literal"><span class="pre">setup.py</span></code> of <code class="docutils literal"><span class="pre">st2client</span></code> package doesn’t rely on functionality which is only
available in newer versions of pip.</li>
<li>Fix an issue where trigger watcher cannot get messages from queue if multiple API processes
are spun up. Now each trigger watcher gets its own queue and therefore there are no locking
issues. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="january-22-2016">
<h2>1.3.0 - January 22, 2016<a class="headerlink" href="#january-22-2016" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id65">
<h3>Added<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Allow user to pass <code class="docutils literal"><span class="pre">env</span></code> parameter to <code class="docutils literal"><span class="pre">packs.setup_virtualenv</span></code> and <code class="docutils literal"><span class="pre">packs.install</span></code>
action.</p>
<p>This comes in handy if a user wants pip to use an HTTP(s) proxy (HTTP_PROXY and HTTPS_PROXY
environment variable) when installing pack dependencies. (new feature)</p>
</li>
<li><p class="first">Ability to view causation chains in Trace. This helps reduce the noise when using Trace to
identify specific issues. (new-feature)</p>
</li>
<li><p class="first">Filter Trace components by model types to only view ActionExecutions, Rules or TriggerInstances.
(new-feature)</p>
</li>
<li><p class="first">Include ref of the most meaningful object in each trace component. (new-feature)</p>
</li>
<li><p class="first">Ability to hide trigger-instance that do not yield a rule enforcement. (new-feature)</p>
</li>
<li><p class="first">Action and Trigger filters for rule list (new-feature)</p>
</li>
<li><p class="first">Add <code class="docutils literal"><span class="pre">--register-fail-on-failure</span></code> flag to <code class="docutils literal"><span class="pre">st2-register-content</span></code> script. If this flag is
provided, the script will fail and exit with non-zero status code if registering some resource
fails. (new feature)</p>
</li>
<li><p class="first">Introduce a new <code class="docutils literal"><span class="pre">abandoned</span></code> state that is applied to executions that we cannot guarantee as
completed. Typically happen when an actionrunner currently running some executions quits or is
killed via TERM.</p>
</li>
<li><p class="first">Add new <code class="docutils literal"><span class="pre">st2garbagecollector</span></code> service which periodically deletes old data from the database
as configured in the config. By default, no old data is deleted unless explicitly configured in
the config.</p>
</li>
<li><p class="first">All published variables can be available in the result of ActionChain execution under the
<code class="docutils literal"><span class="pre">published</span></code> property if <code class="docutils literal"><span class="pre">display_published</span></code> property is specified.</p>
</li>
<li><p class="first">Allow user to specify TTL when creating datastore item using CLI with the <code class="docutils literal"><span class="pre">--ttl</span></code> option.
(improvement)</p>
</li>
<li><p class="first">Add option to rerun one or more tasks in mistral workflow that has errored. (new-feature)</p>
</li>
</ul>
</div>
<div class="section" id="id66">
<h3>Changed<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Change the rule list columns in the CLI from ref, pack, description and enabled to ref,
trigger.ref, action.ref and enabled. This aligns closer the UI and also brings important
information front and center. (improvement)</li>
<li>Support for object already present in the DB for <code class="docutils literal"><span class="pre">st2-rule-tester</span></code> (improvement)</li>
<li>Throw a more friendly error message if casting parameter value fails because the value contains
an invalid type or similar. (improvement)</li>
<li>Display execution parameters when using <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">get</span> <span class="pre">&lt;execution</span> <span class="pre">id&gt;</span></code> CLI command for
workflow executions. (improvement)</li>
<li>The <code class="docutils literal"><span class="pre">--tasks</span></code> option in the CLI for <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">get</span></code> and <code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span></code> will be renamed to
<code class="docutils literal"><span class="pre">--show-tasks</span></code> to avoid conflict with the tasks option in st2 execution re-run.</li>
<li>Replace <code class="docutils literal"><span class="pre">chatops.format_result</span></code> with <code class="docutils literal"><span class="pre">chatops.format_execution_result</span></code> and remove dependency
on st2 pack from st2contrib.</li>
<li>Trace also maintains causation chain through workflows.</li>
</ul>
</div>
<div class="section" id="id67">
<h3>Deprecated<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Deprecated <code class="docutils literal"><span class="pre">params</span></code> action attribute in the action chain definition in favor of the new
<code class="docutils literal"><span class="pre">parameters</span></code> attribute. (improvement)</li>
</ul>
</div>
<div class="section" id="id68">
<h3>Fixed<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add missing logrotate config entry for <code class="docutils literal"><span class="pre">st2auth</span></code> service. #2294 [Vignesh Terafast]</li>
<li>Add a missing <code class="docutils literal"><span class="pre">get_logger</span></code> method to the <cite>MockSensorService`</cite>. This method now returns an
instance of <code class="docutils literal"><span class="pre">Mock</span></code> class which allows user to assert that a particular message has been
logged. [Tim Ireland, Tomaz Muraus]</li>
<li>Fix validation error when None is passed explicitly to an optional argument on action
execution. (bug fix)</li>
<li>Fix action parameters validation so that only a selected set of attributes can be overriden for
any runner parameters. (bug fix)</li>
<li>Fix type in the headers parameter for the http-request runner. (bug fix)</li>
<li>Fix runaway action triggers caused by state miscalculation for mistral workflow. (bug fix)</li>
<li>Use <code class="docutils literal"><span class="pre">--always-copy</span></code> option when creating virtualenv for packs from packs.setup_virtualenv
action. This is required when st2actionrunner is kicked off from python within a virtualenv.</li>
<li>Fix a bug in the remote script runner which would throw an exception if a remote script action
caused a top level failure (e.g. copying artifacts to a remote host failed). (bug-fix)</li>
<li>Fix execution cancellation for task of mistral workflow. (bug fix)</li>
<li>Fix runaway action triggers caused by state miscalculation for mistral workflow. (bug fix)</li>
<li>Fix a bug when removing notify section from an action meta and registering it never removed
the notify section from the db. (bug fix)</li>
<li>Make sure action specific short lived authentication token is deleted immediately when execution
is cancelled. (improvement)</li>
<li>Ignore lock release errors which could occur while reopening log files. This error could simply
indicate that the lock was never acquired.</li>
</ul>
</div>
</div>
<div class="section" id="december-07-2015">
<h2>1.2.0 - December 07, 2015<a class="headerlink" href="#december-07-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id69">
<h3>Added<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add SSH bastion host support to the paramiko SSH runner. Utilizes same connection parameters as
the targeted box. (new feature, improvement) #2144, #2150 [Logan Attwood]</li>
<li>Introduce a new <code class="docutils literal"><span class="pre">timeout</span></code> action execution status which represents an action execution
timeout. Previously, executions which timed out had status set to <code class="docutils literal"><span class="pre">failure</span></code>. Keep in mind
that timeout is just a special type of a failure. (new feature)</li>
<li>Allow jinja templating to be used in <code class="docutils literal"><span class="pre">message</span></code> and <code class="docutils literal"><span class="pre">data</span></code> field for notifications.(new feature)</li>
<li>Add tools for purging executions (also, liveactions with it) and trigger instances older than
certain UTC timestamp from the db in bulk.</li>
<li>Introducing <code class="docutils literal"><span class="pre">noop</span></code> runner and <code class="docutils literal"><span class="pre">core.noop</span></code> action. Returns consistent success in a WF regardless of
user input. (new feature)</li>
<li>Add mock classes (<code class="docutils literal"><span class="pre">st2tests.mocks.*</span></code>) for easier unit testing of the packs. (new feature)</li>
<li>Add a script (<code class="docutils literal"><span class="pre">./st2common/bin/st2-run-pack-tests</span></code>) for running pack tests. (new feature)</li>
<li>Support for formatting of alias acknowledgement and result messages in AliasExecution. (new feature)</li>
<li>Support for “representation+value” format strings in aliases. (new feature)</li>
<li>Support for disabled result and acknowledgement messages in aliases. (new feature)</li>
<li>Add ability to write rule enforcement (models that represent a rule evaluation that resulted
in an action execution) to db to help debugging rules easier. Also, CLI bindings to list
and view these models are added. (new-feature)</li>
</ul>
</div>
<div class="section" id="id70">
<h3>Changed<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Refactor retries in the Mistral action runner to use exponential backoff. Configuration options
for Mistral have changed. (improvement)</li>
<li>Update action chain runner so it performs on-success and on-error task name validation during
pre_run time. This way common errors such as typos in the task names can be spotted early on
since there is no need to wait for the run time.</li>
<li>Change <code class="docutils literal"><span class="pre">headers</span></code> and <code class="docutils literal"><span class="pre">params</span></code> <code class="docutils literal"><span class="pre">core.http</span></code> action paramer type from <code class="docutils literal"><span class="pre">string</span></code> to
<code class="docutils literal"><span class="pre">object</span></code>.</li>
<li>Don’t allow action parameter <code class="docutils literal"><span class="pre">type</span></code> attribute to be an array since rest of the code doesn’t
support parameters with multiple types. (improvement)</li>
<li>Update local runner so all the commands which are executed as a different user and result in
using sudo set $HOME variable to the home directory of the target user. (improvement)</li>
<li>Include state_info for Mistral workflow and tasks in the action execution result. (improvement)</li>
<li><code class="docutils literal"><span class="pre">--debug</span></code> flag no longer implies profiling mode. If you want to enable profiling mode, you need
to explicitly pass <code class="docutils literal"><span class="pre">--profile</span></code> flag to the binary. To reproduce the old behavior, simply pass
both flags to the binary - <code class="docutils literal"><span class="pre">--debug</span> <span class="pre">--profile</span></code>.</li>
<li>Modify ActionAliasFormatParser to work with regular expressions and support more flexible parameter matching. (improvement)</li>
<li>Move ChatOps pack to st2 core.</li>
<li>Purge tool now uses delete_by_query and offloads delete to mongo and doesn’t perform app side
explicit model deletion to improve speed. (improvement)</li>
</ul>
</div>
<div class="section" id="id71">
<h3>Fixed<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix trigger parameters validation for system triggers during rule creation - make sure we
validate the parameters before creating a TriggerDB object. (bug fix)</li>
<li>Fix a bug with a user inside the context of the live action which was created using alias
execution endpoint incorrectly being set to the system user (<code class="docutils literal"><span class="pre">stanley</span></code>) instead of the
authenticated user which triggered the execution. (bug fix)</li>
<li>Fix policy loading and registering - make sure we validate policy parameters against the
parameters schema when loading / registering policies. (bug fix, improvement)</li>
<li>Fix policy trigger for action execution cancellation. (bug fix)</li>
<li>Improve error reporting for static error in ActionChain definition e.g. incorrect reference
in default etc. (improvement)</li>
<li>Fix action chain so it doesn’t end up in an infinite loop if an action which is part of the chain
is canceled. (bug fix)</li>
<li>Fix json representation of trace in cli. (bug fix)</li>
<li>Add missing indexes on trigger_instance_d_b collection. (bug fix)</li>
</ul>
</div>
</div>
<div class="section" id="november-13-2015">
<h2>1.1.1 - November 13, 2015<a class="headerlink" href="#november-13-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id72">
<h3>Added<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow user to specify URL which Mistral uses to talk to StackStorm API using <code class="docutils literal"><span class="pre">mistral.api_url</span></code>
configuration option. If this option is not provided it defaults to the old behavior of using the
public API url (<code class="docutils literal"><span class="pre">auth.api_url</span></code> setting). (improvement)</li>
</ul>
</div>
<div class="section" id="id73">
<h3>Changed<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Improve speed of <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">list</span></code> command by not requesting <code class="docutils literal"><span class="pre">result</span></code> and
<code class="docutils literal"><span class="pre">trigger_instance</span></code> attributes. The effect of this change will be especially pronounced for
installations with a lot of large executions (large execution for this purpose is an execution
with a large result).</li>
<li>Improve speed of <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">get</span></code> command by not requesting <code class="docutils literal"><span class="pre">result</span></code> and
<code class="docutils literal"><span class="pre">trigger_instance</span></code> attributes.</li>
<li>Now when running <code class="docutils literal"><span class="pre">st2api</span></code> service in debug mode (<code class="docutils literal"><span class="pre">--debug</span></code>) flag, all the JSON responses are
pretty indented.</li>
<li>When using <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">list</span></code> and <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">get</span></code> CLI commands, display execution
elapsed time in seconds for all the executions which are currently in “running” state.</li>
</ul>
</div>
<div class="section" id="id74">
<h3>Fixed<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a race condition in sensor container where a sensor which takes &lt;= 5 seconds to shut down
could be respawned before it exited. (bug fix) #2187 [Kale Blankenship]</li>
<li>Add missing entry for <code class="docutils literal"><span class="pre">st2notifier</span></code> service to the logrotate config. (bug fix)</li>
<li>Allow action parameter values with type <code class="docutils literal"><span class="pre">object</span></code> to contain special characters such as
<code class="docutils literal"><span class="pre">.</span></code> and <code class="docutils literal"><span class="pre">$</span></code> in the parameter value. (bug fix, improvement)</li>
</ul>
</div>
</div>
<div class="section" id="october-27-2015">
<h2>1.1.0 - October 27, 2015<a class="headerlink" href="#october-27-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id75">
<h3>Added<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add YAQL v1.0 support to Mistral. Earlier versions are deprecated. (improvement)</li>
<li>Move st2auth service authentication backends to a “repo per backend” model. Backends are now also
dynamically discovered and registered which makes it possible to easily create and use custom
backends. For backward compatibility reasons, <code class="docutils literal"><span class="pre">flat_file</span></code> backend is installed and available by
default. (new feature, improvement)</li>
<li>New st2auth authentication backend for authenticating against LDAP servers -
<a class="reference external" href="https://github.com/StackStorm/st2-auth-backend-ldap">https://github.com/StackStorm/st2-auth-backend-ldap</a>. (new feature)</li>
<li>Enable Mistral workflow cancellation via <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">cancel</span></code>. (improvement)</li>
<li>Allow action-alias to be created and deleted from CLI.</li>
<li>Add support for <code class="docutils literal"><span class="pre">--profile</span></code> flag to all the services. When this flag is provided service runs
in the profiling module which means all the MongoDB queries and query related profile data is
logged. (new-feature)</li>
<li>Introduce API Keys that do not expire like Authentication tokens. This makes it easier to work
with webhook based integrations. (new-feature)</li>
<li>Allow user to define trigger tags in sensor definition YAML files. (new feature) #2000
[Tom Deckers]</li>
<li>Update CLI so it supports caching tokens for different users (it creates a different file for each
user). This means you can now use <code class="docutils literal"><span class="pre">ST2_CONFIG_FILE</span></code> option without disabling token cache.
(improvement)</li>
<li>Add option to verify SSL cert for HTTPS request to the core.http action. (new feature)</li>
<li>Allow user to update / reinstall Python dependencies listed in <code class="docutils literal"><span class="pre">requirements.txt</span></code> inside the
pack virtual environment by passing <code class="docutils literal"><span class="pre">update=True</span></code> parameter to <code class="docutils literal"><span class="pre">packs.setup_virtualenv</span></code>
action or by using new <code class="docutils literal"><span class="pre">packs.update_virtualenv</span></code> action. (new feature)
[jsjeannotte]</li>
<li>Pack on install are now assigned an owner group. The <code class="docutils literal"><span class="pre">pack_group</span></code> property allows to pick this
value and default is <code class="docutils literal"><span class="pre">st2packs</span></code>. (new feature)</li>
</ul>
</div>
<div class="section" id="id76">
<h3>Changed<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Update CLI so <code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span></code> / <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">run</span></code> and <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">re-run</span></code> commands exit with
non-zero code if the action fails. (improvement)</li>
<li>Default to rule being disabled if the user doesn’t explicitly specify <code class="docutils literal"><span class="pre">enabled</span></code> attribute when
creating a rule via the API or inside the rule metadata file when registering local content
(previously it defaulted to enabled).</li>
<li>Include parameters when viewing execution via the CLI. (improvement)</li>
<li>CLI renders parameters and output as yaml for better readability. (improvement)</li>
<li>Support versioned APIs for auth controller. For backward compatibility, unversioned API calls
get redirected to versioned controllers by the server. (improvement)</li>
<li>Update remote runner to include stdout and stderr which was consumed so far when a timeout
occurs. (improvement)</li>
<li>Reduce the wait time between message consumption by TriggerWatcher to avoid latency (improvement)</li>
<li>Allow user to specify value for the <code class="docutils literal"><span class="pre">From</span></code> field in the <code class="docutils literal"><span class="pre">sendmail</span></code> action by passing <code class="docutils literal"><span class="pre">from</span></code>
parameter to the action. (improvement)
[pixelrebel]</li>
</ul>
</div>
<div class="section" id="id77">
<h3>Deprecated<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>YAQL versions &lt; 1.0 are deprecated.</li>
</ul>
</div>
<div class="section" id="id78">
<h3>Fixed<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix <code class="docutils literal"><span class="pre">timestamp_lt</span></code> and <code class="docutils literal"><span class="pre">timestamp_gt</span></code> filtering in the <cite>/executions</cite> API endpoint. Now we
return a correct result which is expected from a user-perspective. (bug-fix)</li>
<li>Make sure that alias execution endpoint returns a correct status code and error message if the
referenced action doesn’t exist.</li>
<li>Allow user to select <code class="docutils literal"><span class="pre">keystone</span></code> backend in the st2auth service. (bug-fix)</li>
<li>Fix <code class="docutils literal"><span class="pre">packs.info</span></code> action so it correctly exits with a non-zero status code if the pack doesn’t
exist or if it doesn’t contain a valid <code class="docutils literal"><span class="pre">.gitinfo</span></code> file. (bug-fix)</li>
<li>Fix <code class="docutils literal"><span class="pre">packs.info</span></code> action so it correctly searches all the packs base dirs. (bug-fix)</li>
<li>Fix a bug in <code class="docutils literal"><span class="pre">stdout</span></code> and <code class="docutils literal"><span class="pre">stderr</span></code> consumption in paramiko SSH runner where reading a fixed
chunk byte array and decoding it could result in multi-byte UTF-8 character being read half way
resulting in UTF-8 decode error. This happens only when output is greater than default chunk size
(1024 bytes) and script produces utf-8 output. We now collect all the bytes from channel
and only then decode the byte stream as utf-8.</li>
<li>Cleanup timers and webhook trigger definitions once all rules referencing them are removed. (bug-fix)</li>
<li>Enable pseudo tty when running remote SSH commands with the paramiko SSH runner. This is done
to match existing Fabric behavior. (bug-fix)</li>
<li>Fix CLI so it skips automatic authentication if credentials are provided in the config on “auth”
command. (bug fix)</li>
<li>Strip the last ‘r’ or ‘rn’ from both <code class="docutils literal"><span class="pre">stdout</span></code> and <code class="docutils literal"><span class="pre">stderr</span></code> streams from paramiko and local
runner output. This is done to be compatible with fabric output of those streams. (bug-fix)</li>
<li>Set env variables (user provided and system assigned) before running remote command or script
action with paramiko. (bug-fix)</li>
<li>Fix a bug in Paramiko SSH runner where <code class="docutils literal"><span class="pre">cwd</span></code> could just be accessed in sudo mode but <code class="docutils literal"><span class="pre">cd</span></code>
was outside scope of <code class="docutils literal"><span class="pre">sudo</span></code> in the command generated. Now, <code class="docutils literal"><span class="pre">cd</span></code> is inside the scope of
<code class="docutils literal"><span class="pre">sudo</span></code>. (bug-fix)</li>
<li>Fix a bug in Paramiko SSH runner where kwargs keys in script arguments were not shell
injection safe. For example, kwarg key could contain spaces. (bug-fix)</li>
<li>Fix a bug in Paramiko SSH runner where JSON output in <code class="docutils literal"><span class="pre">stdout</span></code> or <code class="docutils literal"><span class="pre">stderr</span></code> wasn’t transformed
to object automatically. (bug-fix)</li>
<li>Paramiko SSH runner no longer runs a remote command with <code class="docutils literal"><span class="pre">sudo</span></code> if local user and remote user
differ. (bug-fix)</li>
<li>Fix a bug with the CLI token precedence - now the auth token specified as an environment variable
or as a command line argument has precedence over credentials in the CLI config. (bug fix)</li>
<li>Fix st2-self-check script to check whether to use http/https when connecting to st2, to disable
Windows test by default, and to check test status correctly. (bug-fix)</li>
<li>Use exclusive messaging Qs for TriggerWatcher to avoid having to deal with old messages
and related migration scripts. (bug-fix)</li>
<li>Make sure sensor container child processes (sensor instance processes) are killed and cleaned up
if the sensor container is forcefully terminated (SIGKILL). (bug fix, improvement)</li>
</ul>
</div>
</div>
<div class="section" id="september-09-2015">
<h2>0.13.2 - September 09, 2015<a class="headerlink" href="#september-09-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id79">
<h3>Changed<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Last newline character (<code class="docutils literal"><span class="pre">\n</span></code>) is now stripped from <code class="docutils literal"><span class="pre">stdout</span></code> and <code class="docutils literal"><span class="pre">stderr</span></code> fields in local
and remote command/shell runners. (improvement)</li>
<li>Make sure sensor processes correctly pick up parent <code class="docutils literal"><span class="pre">--debug</span></code> flag. This makes debugging a lot
easier since user simply needs to start sensor container with <code class="docutils literal"><span class="pre">--debug</span></code> flag and all the sensor
logs with level debug or higher will be routed to the container log. (improvement)</li>
</ul>
</div>
<div class="section" id="id80">
<h3>Fixed<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">private_key</span></code> supplied for remote_actions is now used to auth correctly. The <code class="docutils literal"><span class="pre">private_key</span></code>
argument should be the contents of private key file (of user specified in username argument).
(bug-fix)</li>
<li>Fix sensor container service so the <code class="docutils literal"><span class="pre">config</span></code> argument is correctly passed to the sensor
instances in the system packs. Previously, this argument didn’t get passed correctly to the
FileWatchSensor from the system linux pack. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="august-28-2015">
<h2>0.13.1 - August 28, 2015<a class="headerlink" href="#august-28-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id81">
<h3>Fixed<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">cwd</span></code> for paramiko script runner should use <code class="docutils literal"><span class="pre">cwd</span></code> provided as runner parameter.
(bug-fix)</li>
<li>Fix timer regression; bring brack broken timers. (bug-fix)</li>
<li>Updates to trace objects are done via non-upsert updates by adding to the array. This
makes it safer to update trace objects from multiple processes. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="august-24-2015">
<h2>0.13.0 - August 24, 2015<a class="headerlink" href="#august-24-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id82">
<h3>Added<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add new OpenStack Keystone authentication backend.
[Itxaka Serrano]</li>
<li>Support for RabbitMQ cluster. StackStorm works with a RabbitMQ cluster and switches
nodes on failover. (feature)</li>
<li>Introduce a Paramiko SSH runner that uses eventlets to run scripts or commands in parallel.
(improvement) (experimental)</li>
<li>Add action parameters validation to Mistral workflow on invocation. (improvement)</li>
<li>Allow user to include files which are written on disk inside the action create API payload.
(new feature)</li>
<li>Allow user to retrieve content of a file inside a pack by using the new
<code class="docutils literal"><span class="pre">/packs/views/files/</span></code> API endpoint. (new feature)</li>
<li>Add OpenStack Keystone authentication configuration for Mistral. (improvement)</li>
<li>Ability to add trace tag to TriggerInstance from Sensor. (feature)</li>
<li>Ability to view trace in CLI with list and get commands. (feature)</li>
<li>Add ability to add trace tag to <code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span></code> CLI command. (feature)</li>
<li>Add ability to specify trace id in <code class="docutils literal"><span class="pre">st2</span> <span class="pre">run</span></code> CLI command. (feature)</li>
<li>Add <code class="docutils literal"><span class="pre">X-Request-ID</span></code> header to all API calls for easier debugging. (improvement)</li>
<li>Add new CLI commands for disabling and enabling content pack resources
(<code class="docutils literal"><span class="pre">{sensor,action,rule}</span> <span class="pre">{enable,</span> <span class="pre">disable}</span> <span class="pre">&lt;ref</span> <span class="pre">or</span> <span class="pre">id&gt;</span></code>) (feature)</li>
</ul>
</div>
<div class="section" id="id83">
<h3>Changed<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Information about parent workflow is now a dict in child’s context field. (improvement)</li>
<li>Add support for restarting sensors which exit with a non-zero status code to
the sensor container. Sensor container will now automatically try to restart
(up to 2 times) sensor processes which die with a non-zero status code. (improvement)</li>
<li>Add index to the ActionExecution model to speed up query. (improvement)</li>
<li>Rename notification “channels” to “routes”. (improvement)</li>
<li>Turn on paramiko ssh runner as the default ssh runner in prod configuration.
To switch to fabric runner, set <code class="docutils literal"><span class="pre">use_paramiko_ssh_runner</span></code> to false in <code class="docutils literal"><span class="pre">st2.conf</span></code>.
(improvement)</li>
</ul>
</div>
<div class="section" id="id84">
<h3>Fixed<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug when some runner parameter default values were not overridden when a
false value was used in the action metadata parameter override (e.g. False, 0).
[Eugen C.]</li>
<li>Correctly return 404 if user requests an invalid path which partially maps to an existing
path. (bug-fix)</li>
<li>Fix sort key in the ActionExecution API controller. (bug-fix)</li>
<li>Fix key name for error message in liveaction result. (bug-fix)</li>
<li>Fix 500 API response when rule with no pack info is supplied. (bug-fix)</li>
<li>Fix bug in trigger-instance re-emit (extra kwargs passed to manager is now handled). (bug-fix)</li>
<li>Make sure auth hook and middleware returns JSON and “Content-Type: application/json” header
in every response. (improvement, bug-fix)</li>
<li>Fix bug in triggers emitted on key value pair changes and sensor spawn/exit. When
dispatching those triggers, the reference used didn’t contain the pack names
which meant it was invalid and lookups in the rules engine would fail. (bug-fix)</li>
<li>Handle <code class="docutils literal"><span class="pre">sudo</span></code> in paramiko remote script runner. (bug-fix)</li>
<li>Update <code class="docutils literal"><span class="pre">st2ctl</span></code> to correctly start <code class="docutils literal"><span class="pre">st2web</span></code> even if Mistral is not installed.
(bug-fix, improvement)</li>
<li>Fix a bug in handling positional arguments with spaces. (bug-fix)</li>
<li>Make sure that the <code class="docutils literal"><span class="pre">$PATH</span></code> environment variable which is set for the sandboxed Python
process contains <code class="docutils literal"><span class="pre">&lt;virtualenv</span> <span class="pre">path&gt;/bin</span></code> directory as the first entry. (bug fix)</li>
</ul>
</div>
</div>
<div class="section" id="august-11-2015">
<h2>0.12.2 - August 11, 2015<a class="headerlink" href="#august-11-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id85">
<h3>Added<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Support local ssh config file in remote runners. (feature)</li>
</ul>
</div>
<div class="section" id="id86">
<h3>Changed<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Changes to htpasswd file used in <code class="docutils literal"><span class="pre">flat_file</span></code> auth backend do not require
a restart of st2auth and consequently StackStorm. (feature)</li>
</ul>
</div>
</div>
<div class="section" id="july-31-2015">
<h2>0.12.1 - July 31, 2015<a class="headerlink" href="#july-31-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id87">
<h3>Fixed<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Un-registering a pack also removes <code class="docutils literal"><span class="pre">rules</span></code> and <code class="docutils literal"><span class="pre">action</span> <span class="pre">aliases</span></code> from the pack. (bug-fix)</li>
<li>Disable parallel SSH in fabric runner which causes issues with eventlets. (bug-fix)</li>
<li>Fix executions stuck in <code class="docutils literal"><span class="pre">running</span></code> state if runner container throws exception. (bug-fix)</li>
<li>Fix cases where liveaction result in dict are escaped and passed to Mistral. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="july-20-2015">
<h2>0.12.0 - July 20, 2015<a class="headerlink" href="#july-20-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id88">
<h3>Added<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add support for script arguments to the Windows script runner. (new feature)
[James Sigurðarson]</li>
<li>Allow user to filter executions on trigger instance id.
[Sayli Karmarkar]</li>
<li>By default the following environment variables are now available to the actions executed by
local, remote and python runner: <code class="docutils literal"><span class="pre">ST2_ACTION_API_URL</span></code>, <code class="docutils literal"><span class="pre">ST2_ACTION_AUTH_TOKEN</span></code>. (new-feature)</li>
<li>Jinja filter to make working with regex and semver possible in any place that
support jinja (improvement)</li>
<li>New experimental workflow runner based on the open-source CloudSlang project. (new-feature)
[Eliya Sadan, Meir Wahnon, Sam Markowitz]</li>
<li>Allow user to specify new <code class="docutils literal"><span class="pre">secret</span></code> attribute (boolean) for each action parameters. Values of
parameters which have this attribute set to true will be masked in the log files. (new-feature)</li>
<li>Support for masking secret parameters in the API responses. Secret parameters can only be viewed
through the API by admin users. (new-feature)</li>
<li><code class="docutils literal"><span class="pre">six</span></code> library is now available by default in the Python sandbox to all the newly installed
packs. (improvement)</li>
<li>Dispatch an internal trigger when a datastore item has been created, updated, deleted and when
it’s value has changed. (new-feature)</li>
<li>Add new <code class="docutils literal"><span class="pre">/v1/packs</span></code> API endpoint for listing installed packs. (new-feature)</li>
<li>Ability to partition sensors across sensor nodes using various partition schemes. (new-feature)</li>
<li>Add ability to use action context params as action params in meta. (new-feature)</li>
</ul>
</div>
<div class="section" id="id89">
<h3>Changed<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow users to use <code class="docutils literal"><span class="pre">timediff_lt</span></code> and <code class="docutils literal"><span class="pre">timediff_gt</span></code> rule comparison operator with many string
date formats - previously it only worked with ISO8601 date strings. (improvement)</li>
<li>API server now gracefully shuts down on SIGINT (CTRL-C). (improvement)</li>
<li>Single sensor mode of Sensor Container uses <code class="docutils literal"><span class="pre">--sensor-ref</span></code> instead of <code class="docutils literal"><span class="pre">--sensor-name</span></code>.</li>
<li>Move <code class="docutils literal"><span class="pre">/exp/actionalias/</span></code> and <code class="docutils literal"><span class="pre">/exp/aliasexecution</span></code> to <code class="docutils literal"><span class="pre">/v1/actionalias/</span></code> and
<code class="docutils literal"><span class="pre">/v1/aliasexecution/</span></code> respectively. (upgrade)</li>
<li>Display friendly message for error in parameters validation on action execution. (improvement)</li>
</ul>
</div>
<div class="section" id="id90">
<h3>Fixed<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug with with reinstalling a pack with no existing config - only try to move the config
file over if it exists. (bug fix)</li>
<li>Fix a bug with <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">list</span></code> CLI command throwing an exception on failed Mistral
workflows. (bug-fix)</li>
<li>Fix a bug with <code class="docutils literal"><span class="pre">st2</span> <span class="pre">execution</span> <span class="pre">list</span></code> CLI command not displaying <code class="docutils literal"><span class="pre">end_timestamp</span></code> attribute for
Mistral workflows. (bug-fix)</li>
<li>Fix a bug in action container where rendering params was done twice. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="july-2-2015">
<h2>0.11.6 - July 2, 2015<a class="headerlink" href="#july-2-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id91">
<h3>Changed<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Update all the code to handle all the datetime objects internally in UTC. (improvement, bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="july-1-2015">
<h2>0.11.5 - July 1, 2015<a class="headerlink" href="#july-1-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id92">
<h3>Fixed<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug where <code class="docutils literal"><span class="pre">end_timestamp</span></code> is not captured for Mistral workflow executions (bug-fix)</li>
<li>Fix a bug where the CLI failed to display Mistral workflow that errored (bug-fix)</li>
<li>Fix a bug where the published variables are not captured in the Mistral workflow result (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="june-30-2015">
<h2>0.11.4 - June 30, 2015<a class="headerlink" href="#june-30-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id93">
<h3>Removed<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Remove unnecessary rule notify_hubot from core.</li>
</ul>
</div>
</div>
<div class="section" id="june-16-2015">
<h2>0.11.3 - June 16, 2015<a class="headerlink" href="#june-16-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id94">
<h3>Fixed<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix RHEL6 packaging issues</li>
</ul>
</div>
</div>
<div class="section" id="june-12-2015">
<h2>0.11.2 - June 12, 2015<a class="headerlink" href="#june-12-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id95">
<h3>Fixed<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug with <code class="docutils literal"><span class="pre">start_timestamp</span></code> and <code class="docutils literal"><span class="pre">end_timestamp</span></code> sometimes returning an invalid value in
a local instead of UTC timezone. (bug-fix)</li>
<li>Fix to get PollingSensor working again. Sensors of type PollingSensor were not being treated
as such and as a result would fail after the 1st poll. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="june-8-2015">
<h2>0.11.1 - June 8, 2015<a class="headerlink" href="#june-8-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id96">
<h3>Changed<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Action aliases are registered by default. (improvement)</li>
</ul>
</div>
<div class="section" id="id97">
<h3>Fixed<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Repair failing pack installation. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="june-5-2015">
<h2>0.11.0 - June 5, 2015<a class="headerlink" href="#june-5-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id98">
<h3>Added<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow user to configure the CLI using an ini style config file located at <code class="docutils literal"><span class="pre">~/.st2rc</span></code>.
(new-feature)</li>
<li>Add support for caching of the retrieved auth tokens to the CLI. (new-feature)</li>
<li>Update CLI so it displays the error at the top level when using <code class="docutils literal"><span class="pre">run</span></code>, <code class="docutils literal"><span class="pre">execution</span> <span class="pre">run</span></code> or
<code class="docutils literal"><span class="pre">execution</span> <span class="pre">get</span></code> when executed workflow fails. (improvement)</li>
<li>Add new API endpoint for re-running an execution (<code class="docutils literal"><span class="pre">POST</span> <span class="pre">/executions/&lt;id&gt;/re_run/</span></code>).
(new-feature)</li>
<li>CLI now has <code class="docutils literal"><span class="pre">get</span></code> and <code class="docutils literal"><span class="pre">list</span></code> commands for triggerinstance. (new-feature)</li>
<li>CLI now has <code class="docutils literal"><span class="pre">re-emit</span></code> command for triggerinstance. (new-feature)</li>
</ul>
</div>
<div class="section" id="id99">
<h3>Changed<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Throw a more-user friendly exception when enforcing a rule if an action referenced inside
the rule definition doesn’t exist. (improvement)</li>
<li>Rules should be part of a pack. (improvement)</li>
<li>Update Windows runner code so it also works with a newer versions of winexe (&gt; 1.0).
(improvement) [James Sigurðarson]</li>
<li>Validate parameters during rule creation for system triggers. (improvement)</li>
</ul>
</div>
<div class="section" id="id100">
<h3>Fixed<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug with the rule evaluation failing if the trigger payload contained a key with a
dot in the name. (bug-fix)</li>
<li>Fix a bug with publishing array (list) values as strings inside the action chain workflows.
(bug-fix)</li>
<li>Action trigger now contains execution id as opposed to liveaction id. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="v0-9-2-may-26-2015">
<h2>v0.9.2 - May 26, 2015<a class="headerlink" href="#v0-9-2-may-26-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id101">
<h3>Fixed<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix broken <code class="docutils literal"><span class="pre">packs.download</span></code> action. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="v0-9-1-may-12-2015">
<h2>v0.9.1 - May 12, 2015<a class="headerlink" href="#v0-9-1-may-12-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id102">
<h3>Added<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow option to bypass SSL Certificate Check (improvement)</li>
</ul>
</div>
<div class="section" id="id103">
<h3>Changed<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Return HTTP BAD REQUEST when TTL requested for token &gt; Max configured TTL (improvement)</li>
</ul>
</div>
<div class="section" id="id104">
<h3>Fixed<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug with alias parser to support empty formats (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="v0-9-0-april-29-2015">
<h2>v0.9.0 - April 29, 2015<a class="headerlink" href="#v0-9-0-april-29-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id105">
<h3>Added<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Sensor container now can dynamically load/reload/unload sensors on data model changes.
(new-feature)</li>
<li>Add <code class="docutils literal"><span class="pre">-t</span></code> / <code class="docutils literal"><span class="pre">--only-token</span></code> flag to the <code class="docutils literal"><span class="pre">st2</span> <span class="pre">auth</span></code> command. (new-feature)</li>
<li>Add ability to best-effort cancel actions and actionchain via API. (new-feature)</li>
<li>Add new <code class="docutils literal"><span class="pre">windows-cmd</span></code> and <code class="docutils literal"><span class="pre">windows-script</span></code> runners for executing commands
and PowerShell scripts on Windows hosts. (new-feature)</li>
<li>Update all the Python services to re-open log files on the <code class="docutils literal"><span class="pre">SIGUSR1</span></code> signal. (new-feature)</li>
</ul>
</div>
<div class="section" id="id106">
<h3>Changed<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Report a more user-friendly error if an action-chain task references an invalid or inexistent
action. Also treat invalid / inexistent action as a top-level action-chain error. (improvement)</li>
<li>Report a more user-friendly error if an action-chain definition contains an invalid type.
(improvement)</li>
<li>Rename all st2 processes to be prefixed by st2. (sensor_container is now st2sensorcontainer,
rules_engine is now st2rulesengine, actionrunner is now st2actionrunner) (improvement)</li>
<li>Return a user friendly error on no sensors found or typo in sensor class name in single
sensor mode. (improvement)</li>
<li>Check if internal trigger types are already registered before registering
them again. (improvement)</li>
<li>Update runner names so they follow a consistent naming pattern. For backward
compatibility reasons, runners can still be referenced using their old names.
(improvement)</li>
</ul>
</div>
<div class="section" id="id107">
<h3>Fixed<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Sensor container now returns non-zero exit codes for errors. (bug-fix)</li>
<li>Fix a bug in datastore operations exposed in st2client. (bug-fix)</li>
<li>Catch exception if rule operator functions throw excepton and ignore the rule. (bug-fix)</li>
<li>Remove expected “runnertype not found” error logs on action registration
in clean db. (improvement)</li>
<li>Clean up rule registrar logging. (improvement)</li>
<li><code class="docutils literal"><span class="pre">register</span></code> param in packs.install should be passed to packs.load. (bug-fix)</li>
<li>Fix validation code to validate value types correctly. (bug-fix)</li>
<li>Internal trigger types registered using APIs should use auth token. (bug-fix)</li>
</ul>
</div>
<div class="section" id="id108">
<h3>Security<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Enable authentication by default for package based installations.</li>
</ul>
</div>
</div>
<div class="section" id="v0-8-3-march-23-2015">
<h2>v0.8.3 - March 23, 2015<a class="headerlink" href="#v0-8-3-march-23-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id109">
<h3>Changed<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Don’t allow <code class="docutils literal"><span class="pre">run-remote-script</span></code> actions without an <code class="docutils literal"><span class="pre">entry_point</span></code> attribute - throw an
exception when running an action. (improvement)</li>
</ul>
</div>
<div class="section" id="id110">
<h3>Fixed<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix <code class="docutils literal"><span class="pre">packs.setup_virtualenv</span></code> command so it works correctly if user has specified multiple packs
search paths. (bug-fix)</li>
<li>Update sensor container to use <code class="docutils literal"><span class="pre">auth.api_url</span></code> setting when talking to the API (e.g. when
accessing a datastore, etc.). This way it also works correctly if sensor container is running
on a different host than the API. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="v0-8-2-march-10-2015">
<h2>v0.8.2 - March 10, 2015<a class="headerlink" href="#v0-8-2-march-10-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id111">
<h3>Fixed<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug with python-runner actions sometimes not correctly reporting the action’s <code class="docutils literal"><span class="pre">stdout</span></code>.
(bug-fix)</li>
<li>Fix a bug in the <code class="docutils literal"><span class="pre">run-remote-script</span></code> runner - the runner ignored environment variables and
authentication settings which were supplied to the action as parameters. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="v0-8-1-march-10-2015">
<h2>v0.8.1 - March 10, 2015<a class="headerlink" href="#v0-8-1-march-10-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id112">
<h3>Added<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow user to exclude particular attributes from a response by passing
<code class="docutils literal"><span class="pre">?exclude_attributes=result,trigger_instance</span></code> query parameter to the <code class="docutils literal"><span class="pre">/actionexecutions/</span></code>
and <code class="docutils literal"><span class="pre">/actionexecutions/&lt;execution</span> <span class="pre">id&gt;/</span></code> endpoint (new-feature)</li>
<li>Add new <code class="docutils literal"><span class="pre">/actionexecutions/&lt;id&gt;/attribute/&lt;attribute</span> <span class="pre">name&gt;</span></code> endpoint which allows user to
retrieve a value of a particular action execution attribute. (new-feature)</li>
</ul>
</div>
<div class="section" id="id113">
<h3>Changed<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Update <code class="docutils literal"><span class="pre">execution</span> <span class="pre">get</span></code> CLI command so it automatically detects workflows and returns more
user-friendly output by default. (improvement)</li>
<li>Update <code class="docutils literal"><span class="pre">run</span></code>, <code class="docutils literal"><span class="pre">action</span> <span class="pre">execute</span></code>, <code class="docutils literal"><span class="pre">execution</span> <span class="pre">get</span></code> and <code class="docutils literal"><span class="pre">execution</span> <span class="pre">re-run</span></code> CLI commands to
take the same options and return output in the same consistent format.</li>
<li>Throw a more friendly error in the action chain runner if it fails to parse the action chain
definition file. (improvement)</li>
</ul>
</div>
<div class="section" id="id114">
<h3>Fixed<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a bug with http runner not parsing JSON HTTP response body if the content-type header also
contained a charset. (bug-fix)</li>
<li>Indent workflow children properly in CLI (bug-fix)</li>
<li>Make sure that wait indicator is visible in CLI on some systems where stdout is buffered. (bug-fix)</li>
<li>Fix a bug with <code class="docutils literal"><span class="pre">end_timestamp</span></code> attribute on the <code class="docutils literal"><span class="pre">LiveAction</span></code> and <code class="docutils literal"><span class="pre">ActionExecution</span></code> model
containing an invalid value if the action hasn’t finished yet. (bug-fix)</li>
<li>Correctly report an invalid authentication information error in the remote runner. (bug-fix)</li>
<li>Fix a bug in the action chain runner and make sure action parameters are also available for
substitution in the <code class="docutils literal"><span class="pre">publish</span></code> scope. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="v0-8-0-march-2-2015">
<h2>v0.8.0 - March 2, 2015<a class="headerlink" href="#v0-8-0-march-2-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id115">
<h3>Added<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Allow user to specify current working directory (<code class="docutils literal"><span class="pre">cwd</span></code> parameter) when running actions using the
local or the remote runner (<code class="docutils literal"><span class="pre">run-local</span></code>, <code class="docutils literal"><span class="pre">run-local-script</span></code>, <code class="docutils literal"><span class="pre">run-remote</span></code>,
<code class="docutils literal"><span class="pre">run-remote-script</span></code>). (new-feature)</li>
<li>Default values of the parameter of an Action can be system values stored in kv-store. (new-feature)</li>
<li>Allow users to specify additional paths where StackStorm looks for integration packs using
<code class="docutils literal"><span class="pre">packs_base_paths</span></code> setting. (new-feature)</li>
<li>Allow user to specify which Python binary to use for the Python runner actions using
<code class="docutils literal"><span class="pre">actionrunner.python_binary</span></code> setting (new-feature)</li>
<li>Default Python binary which is used by Python runner actions to be the Python binary which is
used by the action runner service. Previous, system’s default Python binary was used.</li>
<li>Vars can be defined in the ActionChain. (new-feature)</li>
<li>Node in an ActionChain can publish global variables. (new-feature)</li>
<li>Allow user to provide authentication token either inside headers (<code class="docutils literal"><span class="pre">X-Auth-Token</span></code>) or via
<code class="docutils literal"><span class="pre">x-auth-token</span></code> query string parameter. (new-feature)</li>
<li>Allow user to override authentication information (username, password, private key) on per
action basis for all the remote runner actions. (new-feature)</li>
<li>Allow user to pass <code class="docutils literal"><span class="pre">--inherit-env</span></code> flag to the <code class="docutils literal"><span class="pre">st2</span> <span class="pre">action</span> <span class="pre">run</span></code> command which causes all
the environment variables accessible to the CLI to be sent as <code class="docutils literal"><span class="pre">env</span></code> parameter to the action
being executed. (new-feature)</li>
<li>Cast params of an execution before scheduling in the RulesEngine. This allows non-string
parameters in an action. (new-feature)</li>
<li>CLI commands to return non-zero exit codes for failed operations (new-feature)</li>
<li>Add new <code class="docutils literal"><span class="pre">nequals</span></code> (<code class="docutils literal"><span class="pre">neq</span></code>) rule criteria operator. This criteria operator
performs not equals check on values of an arbitrary type. (new-feature)</li>
<li>Add new <code class="docutils literal"><span class="pre">execution</span> <span class="pre">re-run</span> <span class="pre">&lt;execution</span> <span class="pre">id&gt;</span></code> CLI command for re-running an
existing action. (new-feature)</li>
<li>Dispatch an internal trigger when a sensor process is spawned / started
(<code class="docutils literal"><span class="pre">st2.sensor.process_spawn</span></code>) and when a process exits / is stopped
(<code class="docutils literal"><span class="pre">st2.sensor.process_exit</span></code>). (new-feature)</li>
<li>Update HTTP runner to automatically parse JSON response body if Content-Type is
<code class="docutils literal"><span class="pre">application/json</span></code> (new-feature)</li>
<li>Support for filtering by timestamp and status in executions list. (new-feature)</li>
<li>Ability to see child tasks of any execution. (new-feature)</li>
<li>Allow sensors to manage global datastore items via sensor_service by passing <code class="docutils literal"><span class="pre">local=False</span></code>
argument to the <code class="docutils literal"><span class="pre">get_value</span></code>, <code class="docutils literal"><span class="pre">set_value</span></code> and <code class="docutils literal"><span class="pre">delete_value</span></code> methods. (new-feature)</li>
<li>Allow sensors to list datastore items using <code class="docutils literal"><span class="pre">list_values</span></code> sensor_service method. (new-feature)</li>
<li>Allow users to filter datastore items by name prefix by passing <code class="docutils literal"><span class="pre">?prefix=&lt;value&gt;</span></code> query
parameter to the <code class="docutils literal"><span class="pre">/keys</span></code> endpoint. (new-feature)</li>
</ul>
</div>
<div class="section" id="id116">
<h3>Changed<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Rename ActionExecution to LiveAction. (refactor)</li>
<li>Rename ActionExecutionHistory to ActionExecution. (refactor)</li>
<li>POST to <code class="docutils literal"><span class="pre">/v1/executions</span></code> take LiveActionAPI but returns ActionExecutionAPI (refactor)</li>
<li>Execution list shows only top level executions by default to see full list use –showall. (refactor)</li>
</ul>
</div>
<div class="section" id="id117">
<h3>Removed<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A separate history process is no longer required. ActionExecution updates are carried at time of
update to LiveAction. (refactor)</li>
</ul>
</div>
<div class="section" id="id118">
<h3>Deprecated<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>API url <code class="docutils literal"><span class="pre">/v1/actionexecutions/</span></code> is now deprecated in favor of <code class="docutils literal"><span class="pre">/v1/executions/</span></code> (refactor)</li>
<li>API url change <code class="docutils literal"><span class="pre">/v1/history/execution</span></code> to <code class="docutils literal"><span class="pre">/v1/executions</span></code> (refactor)</li>
<li>API url change <code class="docutils literal"><span class="pre">/v1/history/execution/views/filters</span></code> to <code class="docutils literal"><span class="pre">/v1/executions/views/filters</span></code> (refactor)</li>
</ul>
</div>
<div class="section" id="id119">
<h3>Fixed<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix a race-condition / bug which would occur when multiple packs are installed at the same time.
(bug-fix)</li>
<li>Allow actions without parameters. (bug-fix)</li>
<li>Fix a bug with rule matching not working for any triggers with parameters. (bug-fix)</li>
<li>Require <code class="docutils literal"><span class="pre">cmd</span></code> parameter for the following actions: <code class="docutils literal"><span class="pre">core.remote</span></code>, <code class="docutils literal"><span class="pre">core.remote_sudo</span></code>,
<code class="docutils literal"><span class="pre">core.local</span></code>, <code class="docutils literal"><span class="pre">core.local_sudo</span></code> (bug-fix)</li>
<li>Use QuerySet.count() instead of len(QuerySet) to avoid the caching of the entire result which
improve running time of API request. (bug-fix)</li>
<li>Fix a bug with template rendering, under some conditions, ending in an infinite loop. (bug-fix)</li>
<li>Mistral subworkflows kicked off in st2 should include task name. (bug-fix)</li>
<li>Fix non-string types to be rendered correctly in action parameters when used in rule. (bug-fix)</li>
<li>Allow user to specify default value for required attributes in the definition of action
parameters. (bug-fix)</li>
<li>When running with auth enabled, correctly preserve the username of the authenticated user who
has triggered the action execution. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="v0-7-january-16-2015">
<h2>v0.7 - January 16, 2015<a class="headerlink" href="#v0-7-january-16-2015" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id120">
<h3>Added<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Python runner and all the fabric based runners (<code class="docutils literal"><span class="pre">run-local</span></code>, <code class="docutils literal"><span class="pre">run-local-script</span></code>,
<code class="docutils literal"><span class="pre">run-remote</span></code>, <code class="docutils literal"><span class="pre">run-remote-script</span></code>) now expose the <code class="docutils literal"><span class="pre">timeout</span></code> argument. With this argument
users can specify action timeout. Previously, the action timeout was not user-configurable and
a system-wide default value was used.</li>
<li>The time when an action execution has finished is now recorded and available via the
<code class="docutils literal"><span class="pre">end_timestamp</span></code> attribute on the <code class="docutils literal"><span class="pre">ActionExecution</span></code> model.</li>
<li>Allow polling sensors to retrieve current poll interval and change it using <code class="docutils literal"><span class="pre">get_poll_interval</span></code>
and <code class="docutils literal"><span class="pre">set_poll_interval</span></code> methods respectively. (new-feature)</li>
<li>Add support for a <code class="docutils literal"><span class="pre">standalone</span></code> mode to the st2auth service. In the standalone mode,
authentication is handled inside the st2auth service using the defined backend. (new feature)</li>
<li>Add new rule criteria comparison operators: <code class="docutils literal"><span class="pre">iequals</span></code>, <code class="docutils literal"><span class="pre">contains</span></code>, <code class="docutils literal"><span class="pre">icontains</span></code>,
<code class="docutils literal"><span class="pre">ncontains</span></code>, <code class="docutils literal"><span class="pre">incontains</span></code>, <code class="docutils literal"><span class="pre">startswith</span></code>, <code class="docutils literal"><span class="pre">istartswith</span></code>, <code class="docutils literal"><span class="pre">endswith</span></code>, <code class="docutils literal"><span class="pre">iendswith</span></code>,
<code class="docutils literal"><span class="pre">exists</span></code>, <code class="docutils literal"><span class="pre">nexists</span></code> (new-feature)</li>
<li>Allow sensors to store temporary data in the datastore using the <code class="docutils literal"><span class="pre">get_value</span></code>, <code class="docutils literal"><span class="pre">set_value</span></code> and
<code class="docutils literal"><span class="pre">delete_value</span></code> methods exposed by sensor_service. (new-feature)</li>
<li>Allow user to specify TTL for datastore values by sending <code class="docutils literal"><span class="pre">ttl</span></code> attribute in the body of a
<code class="docutils literal"><span class="pre">PUT</span> <span class="pre">/keys/&lt;key</span> <span class="pre">id&gt;</span></code> request. (new feature)</li>
<li>Add new <code class="docutils literal"><span class="pre">key</span> <span class="pre">delete_by_prefix</span> <span class="pre">--prefix=&lt;prefix&gt;</span></code> client command. This command allows deletion of
all the keys with names starting with the provided prefix. (new-feature)</li>
<li>Add ability to attach tags to Action, Rule and TriggerType.</li>
<li>Add ability to query results asynchronously from external services. (new-feature)</li>
<li>Add <code class="docutils literal"><span class="pre">rule_tester</span></code> tool which allows users to test rules in an offline mode without any services
running (new-feature)</li>
</ul>
</div>
<div class="section" id="id121">
<h3>Changed<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Refactor local runners so they are more robust, efficient and easier to debug. Previously, local
actions were executed through SSH, now they are executed directly without the overhead of SSH.</li>
<li>Timer is not a sensor anymore. It is launched as part of the <code class="docutils literal"><span class="pre">rules_engine</span></code> process (refactor)</li>
<li>Action models now use ContentPackResourceMixin so we can get them by ref. (refactor)</li>
<li>st2api only requires st2common and dependencies defined in <code class="docutils literal"><span class="pre">requirements.txt</span></code> to be available
on the pythonpath thus making it possible to run st2api standalone.</li>
<li>Change default mode for authentication to standalone. (refactor)</li>
</ul>
</div>
<div class="section" id="id122">
<h3>Fixed<a class="headerlink" href="#id122" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Status code 400 (bad request) is now returned if user doesn’t provide a body to API endpoints
which require it. Previously 500 internal server error was returned (bug-fix).</li>
<li>Fix local runner so it correctly executes a command under the provided system user if <code class="docutils literal"><span class="pre">user</span></code>
parameter is provided. (bug-fix)</li>
<li>Fix a bug with a Trigger database object in some cases being created twice when registering a
rule. (bug-fix)</li>
<li>Fix a bug with child processes which run sensor code not being killed when stopping a sensor
container service. (bug-fix)</li>
<li>Fix a bug and allow user to use non-ascii (unicode) values in the parameter substitution values.
(bug-fix)</li>
<li>Fix a bug with action registration where actions with invalid schema for parameters get
registered. (bug-fix)</li>
<li>Fix a bug with <code class="docutils literal"><span class="pre">default</span></code> param values inheritance in runner/actions. (bug-fix)</li>
<li>Fix a bug where trigger objects weren’t created for triggers with different parameters. (bug-fix)</li>
</ul>
</div>
</div>
<div class="section" id="v0-6-0-december-8-2014">
<h2>v0.6.0 - December 8, 2014<a class="headerlink" href="#v0-6-0-december-8-2014" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id123">
<h3>Added<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add Sensor and PollingSensor base classes. (NB: Sensors API change is non-backward compatible.)</li>
<li>YAML support for action, rules and chain meta.</li>
<li>Add sensor meta support (JSON/YAML) to specify trigger types.</li>
<li>Audit log messages are now saved in a structured format as JSON in
<code class="docutils literal"><span class="pre">st2actionrunner.{pid}.audit.log</span></code> log file.</li>
</ul>
</div>
<div class="section" id="id124">
<h3>Changed<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Separate virtualenv per pack. (Pythonic sensors and actions use them by default.)</li>
<li>Install pip requirements from <code class="docutils literal"><span class="pre">requirements.txt</span></code> in packs by default.</li>
<li>Sensors are now run in their own process for isolation.</li>
<li>Python Actions are now run in their own process for isolation.</li>
<li>Separate out <code class="docutils literal"><span class="pre">rules_engine</span></code> into own process.</li>
<li>Packs default path moves from <code class="docutils literal"><span class="pre">/opt/stackstorm</span></code> to <code class="docutils literal"><span class="pre">/opt/stackstorm/packs/</span></code>.</li>
<li>Webhooks are not part of a sensor. They are now part of core API. (Authentication may
be required.)</li>
<li>API URLs are now versioned. All the existing paths have been prefixed with <code class="docutils literal"><span class="pre">/v1</span></code>
(e.g. <code class="docutils literal"><span class="pre">/v1/actions</span></code>).</li>
</ul>
</div>
<div class="section" id="id125">
<h3>Fixed<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Numerous bug fixes.</li>
</ul>
</div>
</div>
<div class="section" id="v0-5-1-november-3rd-2014">
<h2>v0.5.1 - November 3rd, 2014<a class="headerlink" href="#v0-5-1-november-3rd-2014" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id126">
<h3>Added<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Initial public release</li>
</ul>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="upgrade_notes.html" class="btn btn-neutral float-right" title="Upgrade Notes">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="development/pack_testing.html" class="btn btn-neutral" title="Pack Testing"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014 - 2018, StackStorm.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  
  <div id="versions"></div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.7dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  

  <script type="text/javascript" src="/_static/js/versions.js"></script> 

</body>
</html>