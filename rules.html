

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="ovwnX0ej2kps4UuJ9NOzNjJcLOQD8JPDLNhe-hMYTMk" />
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NKZBMHZ');</script>
  <!-- End Google Tag Manager -->
  
  <title>Rules &mdash; StackStorm 2.8dev documentation</title>
  

  <link rel="shortcut icon" href="_static/favicon.ico?v4"/>
  
  
    <link rel="canonical" href="https://docs.stackstorm.com/rules.html"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="StackStorm 2.8dev documentation" href="index.html"/>
        <link rel="next" title="Workflows" href="workflows.html"/>
        <link rel="prev" title="Sensors and Triggers" href="sensors.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NKZBMHZ"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html">
            <svg class="logo"
                xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                viewBox="0 0 680 120"
                xml:space="preserve">
              <polygon points="116,0 56.8,0 116,48.6"/>
              <polygon points="0.7,120 64.7,120 0.7,69.9"/>
              <path d="M450.756 55.793l-8.824-2.206c-4.584-1.161-7.865-2.744-9.85-4.746c-1.982-1.999-2.977-4.727-2.977-8.181 c0-4.549 1.523-8.071 4.568-10.569c3.045-2.496 7.336-3.744 12.875-3.744c5.881 0 10.4 1.5 13.7 4.4 c3.248 2.9 4.9 7.1 5 12.44h7.031c-0.104-7.25-2.385-12.892-6.85-16.929c-4.465-4.034-10.664-6.053-18.596-6.053 c-7.49 0-13.475 1.846-17.955 5.54c-4.48 3.693-6.721 8.603-6.721 14.723c0 5.5 1.5 9.8 4.4 12.9 c2.957 3.1 8.3 5.6 16 7.567l7.184 1.796c7.047 1.8 11.8 3.8 14.1 6.104c2.361 2.3 3.5 5.5 3.5 9.8 c0 4.652-1.686 8.303-5.053 10.954c-3.369 2.649-7.996 3.975-13.879 3.975c-6.701 0-11.9-1.641-15.594-4.924 s-5.574-7.9-5.643-13.851h-6.926v0.512c0 7.9 2.4 13.9 7.3 18.136c4.855 4.2 11.8 6.3 20.8 6.3 c8.035 0 14.371-1.948 19.006-5.848c4.635-3.897 6.951-9.233 6.951-16.004c0-5.883-1.76-10.499-5.283-13.853 C465.598 60.8 459.5 58 450.8 55.8"/>
              <path d="M494.566 27.527h-6.311v15.648h-7.438v5.13h7.438v39.755c0 4.2 0.7 7.1 1.9 8.6 s3.523 2.4 6.7 2.386c1.129 0 2.328-0.096 3.592-0.281c1.268-0.189 2.666-0.489 4.207-0.899l-0.051-5.027 c-1.744 0.377-3.027 0.625-3.85 0.745c-0.82 0.119-1.555 0.179-2.203 0.179c-1.508 0-2.549-0.375-3.131-1.13 c-0.582-0.751-0.871-2.29-0.871-4.616V48.305h10.105v-5.13h-10.105V27.527z"/>
              <path d="M536.99 41.79c-7.934 0-14.082 2.505-18.443 7.514c-4.359 5.01-6.541 12.081-6.541 21.2 c0 9.1 2.2 16.1 6.5 21.11c4.361 5 10.5 7.5 18.4 7.465c8.002 0 14.189-2.496 18.57-7.491 c4.377-4.992 6.566-12.02 6.566-21.084c0-9.132-2.199-16.203-6.592-21.213C551.141 44.3 545 41.8 537 41.8 M550.686 87.6 c-3.215 4.001-7.779 6.001-13.695 6.001c-5.848 0-10.389-2.016-13.619-6.052c-3.234-4.035-4.85-9.713-4.85-17.032 c0-7.352 1.615-13.047 4.85-17.083c3.23-4.035 7.771-6.053 13.619-6.053c5.916 0 10.5 2 13.7 6 c3.217 4 4.8 9.7 4.8 17.109S553.902 83.6 550.7 87.6"/>
              <path d="M586.008 44.508c-2.789 1.812-4.969 4.549-6.541 8.207v-9.541h-6.105v54.531h6.514V67.644 c0-6.395 1.359-11.2 4.078-14.414c2.719-3.215 6.797-4.823 12.234-4.823h0.822V41.79h-0.717 C592.221 41.8 588.8 42.7 586 44.5"/>
              <path d="M675.166 46.227c-2.926-2.957-7.346-4.437-13.262-4.437c-3.898 0-7.346 0.915-10.338 2.7 s-5.395 4.489-7.207 7.977c-0.891-3.42-2.68-6.062-5.377-7.925c-2.699-1.864-6.08-2.796-10.143-2.796 c-3.791 0-7.162 0.897-10.113 2.693c-2.957 1.795-5.355 4.369-7.199 7.72v-9.029h-5.9v54.532h6.311V64.001 c0-4.925 1.477-8.907 4.428-11.954c2.955-3.042 6.82-4.566 11.6-4.566c3.893 0 6.8 1.1 8.7 3.3 c1.879 2.2 2.8 5.5 2.8 10.054v36.886h6.309V63.54c0-4.821 1.453-8.723 4.361-11.696c2.906-2.976 6.771-4.463 11.592-4.463 c4.07 0 7 1 8.8 2.976c1.775 2 2.7 5.3 2.7 9.85v37.5h6.412V59.692 C679.551 53.7 678.1 49.2 675.2 46.2"/>
              <path d="M118.944 67.886c-2.638-4.731-7.001-9.521-13.085-14.393L41.482 0.8 c-4.365 0.046-7.895 0.271-10.581 0.677c-2.734 0.466-5.502 1.227-8.287 2.282c-7.151 2.9-12.714 7.208-16.671 12.9 C1.991 22.4 0 29 0 36.76c0 2.8 0.4 5.8 1.2 8.973c0.762 3.2 1.8 6.1 3.2 8.8 c1.728 3.2 4.6 7 8.7 11.351c4.111 4.5 9.7 9.6 16.7 15.438c7.149 6.1 14.6 11.9 22.2 17.6 c4.731 3.4 8.8 6.4 12.3 8.825c3.447 2.4 9.3 6.5 17.5 12.247c3.098-0.096 5.736-0.263 7.912-0.451 c1.932-0.193 3.863-0.546 5.789-1.013c1.36-0.283 3.006-0.828 4.933-1.642c7.011-2.849 12.514-7.222 16.523-13.117 c4.048-5.868 6.093-12.454 6.093-19.776C122.984 78.1 121.6 72.7 118.9 67.9"/>
              <path d="M182.358 53.177c-7.319-1.88-12.124-3.735-14.416-5.566c-2.292-1.829-3.435-4.181-3.435-7.054 c0-2.838 1.297-5.215 3.896-7.13c2.599-1.915 5.952-2.873 10.056-2.873c4.958 0 8.9 1.2 11.9 3.6 c2.958 2.4 4.6 5.8 4.8 10.056l11.953-0.051c-0.07-7.352-2.559-13.192-7.466-17.519c-4.908-4.327-11.483-6.49-19.725-6.49 c-8.482 0-15.279 1.976-20.391 5.926c-5.112 3.95-7.669 9.073-7.669 15.363c0 5.9 1.7 10.6 5.2 14 c3.489 3.4 9.5 6.3 17.9 8.49c0.754 0.2 1.9 0.4 3.3 0.822c6.839 1.7 11.2 3.4 13.2 5.2 c1.197 1.1 2.2 2.4 2.9 3.924c0.77 1.5 1.2 2.9 1.2 4.079c0 3.044-1.375 5.609-4.128 7.7 c-2.754 2.087-6.285 3.131-10.595 3.131c-5.711 0-10.234-1.351-13.567-4.053c-3.336-2.702-5.174-6.498-5.514-11.389h-12.212 c0.378 8.5 3.2 15 8.4 19.494c5.214 4.5 12.5 6.8 21.9 6.771c8.893 0 15.997-2.163 21.315-6.49 c5.319-4.324 7.977-10.045 7.977-17.16c0-5.882-1.7-10.465-5.104-13.746C200.73 59 193.5 56 182.4 53.2"/>
              <path d="M233.915 27.117h-11.646v15.236h-7.9v8.721h7.9v34.012c0 5 0.9 8.5 2.8 10.4 c1.899 1.9 5.2 2.9 9.8 2.924c1.366 0 3.726-0.171 7.078-0.513c0.511-0.035 0.905-0.068 1.18-0.103v-9.335l-2.308 0.1 c-0.239 0-0.609 0.018-1.105 0.051c-0.494 0.035-0.895 0.053-1.206 0.053c-1.777 0-2.99-0.333-3.639-1 c-0.651-0.668-0.976-2.01-0.976-4.027V51.074h9.234v-8.721h-9.234V27.117z"/>
              <path d="M299.373 89.498c-1.267 0-2.147-0.325-2.643-0.977c-0.497-0.648-0.745-2.032-0.745-4.153V56.922 c0-5.404-1.871-9.481-5.617-12.234c-3.744-2.754-9.293-4.13-16.647-4.13c-7.011 0-12.541 1.599-16.594 4.8 c-4.053 3.2-6.081 7.551-6.081 13.058v0.923h11.134v-0.41c0-2.805 0.957-4.959 2.872-6.465c1.916-1.505 4.667-2.257 8.259-2.257 c3.865 0 6.7 0.6 8.6 1.897c1.845 1.3 2.8 3.2 2.8 5.9c0 3.283-3.711 5.404-11.133 6.4 c-0.513 0.069-0.908 0.12-1.18 0.153c-8.893 1.129-15.03 3.104-18.416 5.924c-3.386 2.822-5.079 7.038-5.079 12.6 c0 5.1 1.6 9.1 4.7 12.056c3.164 2.9 7.5 4.4 13.1 4.36c3.626 0 7.027-0.794 10.208-2.386 c3.18-1.591 5.899-3.838 8.158-6.746c0.068 2.8 1 4.9 2.7 6.311c1.726 1.4 4.4 2.1 7.9 2.1 c0.925 0 1.89-0.069 2.899-0.205c1.009-0.139 2.044-0.345 3.104-0.616v-8.567c-0.718 0.068-1.224 0.112-1.514 0.1 C299.876 89.5 299.6 89.5 299.4 89.5 M284.547 76.878c0 3.831-1.436 6.976-4.31 9.4 c-2.873 2.464-6.481 3.694-10.825 3.694c-2.873 0-5.095-0.692-6.668-2.079c-1.574-1.384-2.36-3.341-2.36-5.874 c0-2.256 0.667-4.077 2.001-5.463c1.333-1.384 3.368-2.333 6.105-2.847c0.922-0.171 2.36-0.41 4.31-0.717 c5.369-0.787 9.284-1.814 11.747-3.079V76.878z"/>
              <path d="M341.311 86.086c-2.174 2-5.021 3.002-8.542 3.002c-4.411 0-7.78-1.634-10.105-4.9s-3.489-8.01-3.489-14.236 c0-6.359 1.174-11.173 3.515-14.439c2.342-3.267 5.805-4.901 10.389-4.901c3.419 0 6.2 1 8.3 2.8 c2.119 1.9 3.3 4.5 3.6 7.774h11.541c-0.34-6.43-2.643-11.483-6.9-15.161c-4.256-3.676-9.891-5.514-16.902-5.514 c-8.036 0-14.337 2.625-18.902 7.874c-4.566 5.25-6.849 12.492-6.849 21.726c0 9 2.2 16.2 6.6 21.4 c4.411 5.3 10.4 7.9 18 7.899c7.355 0 13.246-1.957 17.675-5.872c4.428-3.917 6.916-9.312 7.463-16.186h-11.389 C344.822 81.2 343.5 84.1 341.3 86.1"/>
              <polygon points="414,42.4 399.7,42.4 377.9,64.9 377.9,22.1 366.4,22.1 366.4,97.7 377.9,97.7 377.9,79.2 385.8,71.2 400.7,97.7 414.4,97.7 394,62.7"/>
            </svg>
          </a>
        
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <p class="caption"><span class="caption-text">はじめに</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">StackStorm 概要</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#about">About</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#how-it-works">How it Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#what-s-next">What’s Next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install/index.html">インストールと設定</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install/overview.html">デプロイ後の構成</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/system_requirements.html">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/vagrant.html">Vagrant / OVA</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/deb.html">Ubuntu 14.04 / 16.04</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/rhel7.html">RHEL 7 / CentOS 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/rhel6.html">RHEL 6 / CentOS 6</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/docker.html">Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/ansible.html">Ansible Playbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/bwc.html">Extreme Workflow Composer</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/config/index.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/upgrades.html">Upgrades</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/uninstall.html">Uninstall</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="start.html">クイックスタート</a><ul>
<li class="toctree-l2"><a class="reference internal" href="start.html#explore-st2-with-cli">Explore StackStorm with CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#authenticate">Authenticate</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#work-with-actions">Work with Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#define-a-rule">Define a Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#deploy-a-rule">Deploy a Rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#deploy-examples">Deploy Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#datastore">Datastore</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">基本機能</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="actions.html#managing-and-running-actions">Managing and Running Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#action-runners">Action Runners</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#writing-custom-actions">Writing Custom Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#built-in-parameters">Built-in Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#overriding-runner-parameters">Overriding Runner Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#environment-variables-available-to-actions">Environment Variables Available to Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#converting-existing-scripts-into-actions">Converting Existing Scripts into Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#writing-custom-python-actions">Writing Custom Python Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html#pre-defined-actions">Pre-defined Actions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors and Triggers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#sensors">Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#triggers">Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#internal-triggers">Internal Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#creating-a-sensor">Creating a Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#how-sensors-are-run">How Sensors are Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#sensor-service">Sensor Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#common-operations">Common Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#datastore-management-operations">Datastore Management Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#running-your-first-sensor">Running Your First Sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#examples">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="sensors.html#debugging-a-sensor-from-a-pack">Debugging a Sensor From a Pack</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Rules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#rule-structure">Rule Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trigger">Trigger</a></li>
<li class="toctree-l2"><a class="reference internal" href="#criteria">Criteria</a></li>
<li class="toctree-l2"><a class="reference internal" href="#critera-comparison">Critera Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-comparison">Advanced Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="#action">Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variable-interpolation">Variable Interpolation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#managing-rules">Managing Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rule-location">Rule Location</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-rules">Testing Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#timers">Timers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Workflows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="actionchain.html">ActionChain</a></li>
<li class="toctree-l2"><a class="reference internal" href="mistral.html">Mistral</a></li>
<li class="toctree-l2"><a class="reference internal" href="mistral_yaql.html">Mistral + YAQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="mistral_jinja.html">Mistral + Jinja</a></li>
<li class="toctree-l2"><a class="reference internal" href="orchestra/index.html">Orchestra</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="packs.html">Packs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="packs.html#what-is-a-pack">What is a Pack?</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#managing-packs">Managing Packs</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#discovering-packs">Discovering Packs</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#installing-a-pack">Installing a Pack</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#configuring-a-pack">Configuring a Pack</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#developing-a-pack">Developing a Pack</a></li>
<li class="toctree-l2"><a class="reference internal" href="packs.html#advanced-topics">Advanced Topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webhooks.html">Webhooks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#sensors-vs-webhooks">Sensors vs Webhooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#authentication">認証(Authentication)</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#id2">リクエストボディ</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#webhook">Webhook の登録</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#generic-webhook">Generic Webhook の使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#id3">登録済み Webhook の一覧表示</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#id4">Webhook がうまく動かない場合</a></li>
<li class="toctree-l2"><a class="reference internal" href="webhooks.html#id5">Webhook を使わない場合</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="datastore.html">データストア</a><ul>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#cli-key-value">CLI による Key-Value ペアの登録と取得方法</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#cli">CLI からの数値、オブジェクト、配列値の登録・取得</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#key-value">ファイルから key-value ペアを読み込む方法</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#datastore-scopes-in-key-value-store">データのスコープ設定</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#ttl">登録データの TTL</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#python-client">Python Client から値を設定・取得</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#referencing-key-value-pairs-in-action-definitions">アクション定義ファイルから key-value ペアを取得する方法</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#id4">ルール定義ファイルから key-value ペアを参照する</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#admin-setup-for-encrypted-datastore">登録データの暗号化設定 (管理者のみ)</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#datastore-storing-secrets-in-key-value-store">暗号化データの保存</a></li>
<li class="toctree-l2"><a class="reference internal" href="datastore.html#id7">セキュリティノート</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="chatops/index.html">ChatOps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html">What is ChatOps?</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#architecture">Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#stackstorm-flavored-chatops">StackStorm-flavored ChatOps</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#adding-new-chatops-commands">Adding New ChatOps Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/chatops.html#logging">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/aliases.html">Action Aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/notifications.html">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="chatops/pack_deploy.html">Pack Deployment</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">応用トピック</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#configuring-the-service">Configuring the Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#standalone-auth-mode">Standalone Auth Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#proxy-auth-mode">Proxy Auth Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#auth-backends">Auth Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#ldap-enterprise-edition">LDAP (Enterprise Edition)</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#running-the-service">Running the Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="authentication.html#api-keys">API Keys</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rbac.html">Role Based Access Control</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#terminology">Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#system-roles">System Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#how-it-works">How it Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#enabling-rbac">Enabling RBAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#defining-roles-and-assignments">Defining Roles and Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#applying-rbac-definitions">Applying RBAC Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#automatically-granting-roles-based-on-ldap-group-membership">Automatically Granting Roles Based on LDAP Group Membership</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#restricting-users-to-only-view-resources-they-own-or-created">Restricting Users to Only View Resources They Own or Created</a></li>
<li class="toctree-l2"><a class="reference internal" href="rbac.html#using-rbac-example">Using RBAC Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inquiries.html">Inquiries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#new-core-ask-action">New <code class="docutils literal notranslate"><span class="pre">core.ask</span></code> Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#using-core-ask-in-a-workflow">Using <code class="docutils literal notranslate"><span class="pre">core.ask</span></code> in a Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#notifying-users-of-inquiries-using-rules">Notifying Users of Inquiries using Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#responding-to-an-inquiry">Responding to an Inquiry</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#securing-inquiries">Securing Inquiries</a></li>
<li class="toctree-l2"><a class="reference internal" href="inquiries.html#garbage-collection-for-inquiries">Garbage Collection for Inquiries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference/index.html">References and Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference/sharing_code_sensors_actions.html">Sharing code between Sensors and Python Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/cli.html">CLI Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/pack_configs.html">Pack Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/packs.html">Create and Contribute a Pack</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/pack_management_transition.html">Pack Management Transition</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/action_output_streaming.html">Real-time Action Output Streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/content_version.html">Using a Specific Version of Pack Content When Running an Action</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/jinja.html">Jinja</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/policies.html">Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/runners.html">Action Runners</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/traces.html">Traces</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/client_libraries.html">Client Libraries and Language Bindings</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/ha.html">High Availability Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/api.html">REST API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/monitoring.html">System Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/sensor_partitioning.html">Partitioning Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/history.html">History and Audit</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/secrets_masking.html">Secrets Masking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/self_verification.html">Running Self-Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/basic_chatops_troubleshooting.html">ChatOps Troubleshooting Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/rules.html">Rule is not Being Matched</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/sensors.html">Sensor Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/mistral.html">Mistral Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/ssh.html">SSH Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/database.html">Database Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/rest_api_access.html">REST API access</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/tuning_action_runner_dispatcher_pool.html">Tuning Action Runner Dispatcher Pool Size</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/purging_old_data.html">Purging Old Operational Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/private_networks.html">WebUI Access on Private Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/submit_debug_info.html">Submitting Debugging Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/debug_mode.html">Enabling Debug Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/ask_for_support.html">Ask for help!</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/webhooks.html">Troubleshooting Webhooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#contributing">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#setting-up-a-development-environment">Setting up a Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#general-contribution-guidelines">General Contribution Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#code-style-guide">Code Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#deprecation-policy">Deprecation Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="development/index.html#general-coding-guidelines">General Coding Guidelines</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#in-development">in development</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#may-16-2018">2.7.2 - May 16, 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#april-20-2018">2.7.1 - April 20, 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#april-12-2018">2.7.0 - April 12, 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#january-19-2018">2.6.0 - January 19, 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#december-14-2017">2.5.1 - December 14, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#october-25-2017">2.5.0 - October 25, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#september-12-2017">2.4.1 - September 12, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#august-23-2017">2.4.0 - August 23, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#july-28-2017">2.3.2 - July 28, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#july-07-2017">2.3.1 - July 07, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#june-19-2017">2.3.0 - June 19, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#april-3-2017">2.2.1 - April 3, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#february-27-2017">2.2.0 - February 27, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#december-16-2016">2.1.1 - December 16, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#december-05-2016">2.1.0 - December 05, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#september-30-2016">2.0.1 - September 30, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#august-31-2016">2.0.0 - August 31, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#august-8-2016">1.6.0 - August 8, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#july-13-2016">1.5.1 - July 13, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#june-24-2016">1.5.0 - June 24, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#april-18-2016">1.4.0 - April 18, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#february-12-2016">1.3.2 - February 12, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#january-25-2016">1.3.1 - January 25, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#january-22-2016">1.3.0 - January 22, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#december-07-2015">1.2.0 - December 07, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#november-13-2015">1.1.1 - November 13, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#october-27-2015">1.1.0 - October 27, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#september-09-2015">0.13.2 - September 09, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#august-28-2015">0.13.1 - August 28, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#august-24-2015">0.13.0 - August 24, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#august-11-2015">0.12.2 - August 11, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#july-31-2015">0.12.1 - July 31, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#july-20-2015">0.12.0 - July 20, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#july-2-2015">0.11.6 - July 2, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#july-1-2015">0.11.5 - July 1, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#june-30-2015">0.11.4 - June 30, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#june-16-2015">0.11.3 - June 16, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#june-12-2015">0.11.2 - June 12, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#june-8-2015">0.11.1 - June 8, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#june-5-2015">0.11.0 - June 5, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-9-2-may-26-2015">v0.9.2 - May 26, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-9-1-may-12-2015">v0.9.1 - May 12, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-9-0-april-29-2015">v0.9.0 - April 29, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-8-3-march-23-2015">v0.8.3 - March 23, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-8-2-march-10-2015">v0.8.2 - March 10, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-8-1-march-10-2015">v0.8.1 - March 10, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-8-0-march-2-2015">v0.8.0 - March 2, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-7-january-16-2015">v0.7 - January 16, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-6-0-december-8-2014">v0.6.0 - December 8, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#v0-5-1-november-3rd-2014">v0.5.1 - November 3rd, 2014</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upgrade_notes.html">Upgrade Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-8">StackStorm v2.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-7">StackStorm v2.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-6">StackStorm v2.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-5">StackStorm v2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-4">StackStorm v2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-3">StackStorm v2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-2">StackStorm v2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-1">StackStorm v2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v2-0">StackStorm v2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-6">StackStorm v1.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-5">StackStorm v1.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-4">StackStorm v1.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-3">StackStorm v1.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-2">StackStorm v1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v1-1">StackStorm v1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v-0-11">StackStorm v 0.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade_notes.html#st2-v0-9">StackStorm v0.9</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#eta-june-2018">2.8 - ETA June 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#eta-august-2018">2.9 - ETA August 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#eta-october-2018">3.0 - ETA October 2018</a></li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#backlog">Backlog</a></li>
<li class="toctree-l2"><a class="reference internal" href="roadmap.html#release-history">Release History</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">StackStorm</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs v2.8dev </a> &raquo;</li>
        
      <li>Rules</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/StackStorm/st2docs/blob/master/docs/source/rules.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document">
            <div id="version-warning" class="admonition warning hide">
              <p class="first admonition-title">Note</p>
              <p class="last">
                The documentation you're currently reading is for version 2.8dev.
                Click <a href="/">here</a> to view documentation for the latest stable version.
              </p>
            </div>
            
  <div class="section" id="rules">
<h1>Rules<a class="headerlink" href="#rules" title="Permalink to this headline">¶</a></h1>
<p>StackStorm uses rules and workflows to capture operational patterns as automations. Rules map triggers
to actions (or workflows), apply matching criteria and map trigger payloads to action inputs.</p>
<div class="section" id="rule-structure">
<h2>Rule Structure<a class="headerlink" href="#rule-structure" title="Permalink to this headline">¶</a></h2>
<p>Rules are defined in YAML. Rule definition structure, as well as required and optional elements are
listed below:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
    <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;rule_name&quot;</span>                      <span class="c1"># required</span>
    <span class="l l-Scalar l-Scalar-Plain">pack</span><span class="p p-Indicator">:</span> <span class="s">&quot;examples&quot;</span>                       <span class="c1"># optional</span>
    <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="s">&quot;Rule</span><span class="nv"> </span><span class="s">description.&quot;</span>       <span class="c1"># optional</span>
    <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>                          <span class="c1"># required</span>

    <span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>                               <span class="c1"># required</span>
        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;trigger_type_ref&quot;</span>

    <span class="l l-Scalar l-Scalar-Plain">criteria</span><span class="p p-Indicator">:</span>                              <span class="c1"># optional</span>
        <span class="l l-Scalar l-Scalar-Plain">trigger.payload_parameter_name1</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;regex&quot;</span>
            <span class="l l-Scalar l-Scalar-Plain">pattern</span> <span class="p p-Indicator">:</span> <span class="s">&quot;^value$&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">trigger.payload_parameter_name2</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;iequals&quot;</span>
            <span class="l l-Scalar l-Scalar-Plain">pattern</span> <span class="p p-Indicator">:</span> <span class="s">&quot;watchevent&quot;</span>

    <span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>                                <span class="c1"># required</span>
        <span class="l l-Scalar l-Scalar-Plain">ref</span><span class="p p-Indicator">:</span> <span class="s">&quot;action_ref&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>                        <span class="c1"># optional</span>
            <span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="s">&quot;bar&quot;</span>
            <span class="l l-Scalar l-Scalar-Plain">baz</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">trigger.payload_parameter_1</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<p>The generic form of a rule is:</p>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">name</span></code> of the rule.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pack</span></code> that the rule belongs to. <code class="docutils literal notranslate"><span class="pre">default</span></code> is assumed if a pack is not specified.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">description</span></code> of the rule.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">enabled</span></code> state of a rule (<code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>).</li>
<li>The type of <code class="docutils literal notranslate"><span class="pre">trigger</span></code> emitted from sensors to monitor, and optionally parameters associated
with that trigger.</li>
<li>An optional set of <code class="docutils literal notranslate"><span class="pre">criteria</span></code>, consisting of:<ul>
<li>An attribute of the trigger payload.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">type</span></code> of criteria comparison.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">pattern</span></code> to match against.</li>
</ul>
</li>
<li>The <code class="docutils literal notranslate"><span class="pre">action</span></code> to execute when a rule is matched, consisting of:<ul>
<li>The <code class="docutils literal notranslate"><span class="pre">ref</span></code> (action/workflow) to execute.</li>
<li>An optional set of <code class="docutils literal notranslate"><span class="pre">parameters</span></code> to pass to the action execution.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="trigger">
<h2>Trigger<a class="headerlink" href="#trigger" title="Permalink to this headline">¶</a></h2>
<p>The trigger in a rule specifies which incoming events should be inspected for potential match
against this rule. View all the triggers configured on a system via the command line with the
<code class="docutils literal notranslate"><span class="pre">st2</span> <span class="pre">trigger</span> <span class="pre">list</span></code> command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>vagrant@st2vagrant:~$ st2 trigger list
+--------------------------------+-----------+---------------------------+---------------------------------------------------------------------------------+
<span class="p">|</span> ref                            <span class="p">|</span> pack      <span class="p">|</span> name                      <span class="p">|</span> description                                                                     <span class="p">|</span>
+--------------------------------+-----------+---------------------------+---------------------------------------------------------------------------------+
<span class="p">|</span> core.st2.webhook               <span class="p">|</span> core      <span class="p">|</span> st2.webhook               <span class="p">|</span> Trigger <span class="nb">type</span> <span class="k">for</span> registering webhooks that can consume arbitrary payload.       <span class="p">|</span>
<span class="p">|</span> core.st2.generic.actiontrigger <span class="p">|</span> core      <span class="p">|</span> st2.generic.actiontrigger <span class="p">|</span> Trigger encapsulating the completion of an action execution.                    <span class="p">|</span>
<span class="p">|</span> core.st2.IntervalTimer         <span class="p">|</span> core      <span class="p">|</span> st2.IntervalTimer         <span class="p">|</span> Triggers on specified intervals. e.g. every 30s, 1week etc.                     <span class="p">|</span>
<span class="p">|</span> core.st2.DateTimer             <span class="p">|</span> core      <span class="p">|</span> st2.DateTimer             <span class="p">|</span> Triggers exactly once when the current <span class="nb">time</span> matches the specified time. e.g.    <span class="p">|</span>
<span class="p">|</span>                                <span class="p">|</span>           <span class="p">|</span>                           <span class="p">|</span> timezone:UTC date:2014-12-31 <span class="m">23</span>:59:59.                                          <span class="p">|</span>
<span class="p">|</span> core.st2.CronTimer             <span class="p">|</span> core      <span class="p">|</span> st2.CronTimer             <span class="p">|</span> Triggers whenever current <span class="nb">time</span> matches the specified <span class="nb">time</span> constaints like a     <span class="p">|</span>
<span class="p">|</span>                                <span class="p">|</span>           <span class="p">|</span>                           <span class="p">|</span> UNIX cron scheduler.                                                            <span class="p">|</span>
<span class="p">|</span> core.st2.sensor.process_spawn  <span class="p">|</span> core      <span class="p">|</span> st2.sensor.process_spawn  <span class="p">|</span> Trigger encapsulating spawning of a sensor process.                             <span class="p">|</span>
<span class="p">|</span> autoscale.ScaleDownPulse       <span class="p">|</span> autoscale <span class="p">|</span> ScaleDownPulse            <span class="p">|</span> Pulse trigger emitted when an ASG is eligible <span class="k">for</span> deflation                     <span class="p">|</span>
<span class="p">|</span> autoscale.ScaleUpPulse         <span class="p">|</span> autoscale <span class="p">|</span> ScaleUpPulse              <span class="p">|</span> Pulse trigger emitted when an ASG is eligible <span class="k">for</span> expansion                     <span class="p">|</span>
<span class="p">|</span> slack.message                  <span class="p">|</span> slack     <span class="p">|</span> message                   <span class="p">|</span> Trigger which indicates a new message has been posted to a channel              <span class="p">|</span>
<span class="p">|</span> linux.file_watch.line          <span class="p">|</span> linux     <span class="p">|</span> file_watch.line           <span class="p">|</span> Trigger which indicates a new line has been detected                            <span class="p">|</span>
<span class="p">|</span> core.st2.sensor.process_exit   <span class="p">|</span> core      <span class="p">|</span> st2.sensor.process_exit   <span class="p">|</span> Trigger encapsulating <span class="nb">exit</span> of a sensor process.                                 <span class="p">|</span>
<span class="p">|</span> newrelic.WebAppAlertTrigger    <span class="p">|</span> newrelic  <span class="p">|</span> WebAppAlertTrigger        <span class="p">|</span>                                                                                 <span class="p">|</span>
<span class="p">|</span> newrelic.WebAppNormalTrigger   <span class="p">|</span> newrelic  <span class="p">|</span> WebAppNormalTrigger       <span class="p">|</span>                                                                                 <span class="p">|</span>
<span class="p">|</span> newrelic.ServerAlertTrigger    <span class="p">|</span> newrelic  <span class="p">|</span> ServerAlertTrigger        <span class="p">|</span>                                                                                 <span class="p">|</span>
<span class="p">|</span> newrelic.ServerNormalTrigger   <span class="p">|</span> newrelic  <span class="p">|</span> ServerNormalTrigger       <span class="p">|</span>                                                                                 <span class="p">|</span>
<span class="p">|</span> dripstat.alert                 <span class="p">|</span> dripstat  <span class="p">|</span> alert                     <span class="p">|</span> Trigger representing an active alert                                            <span class="p">|</span>
+--------------------------------+-----------+---------------------------+---------------------------------------------------------------------------------+
</pre></div>
</div>
<p>To learn more about Sensors/Triggers, check the <a class="reference internal" href="sensors.html"><span class="doc">Sensors and Triggers</span></a> page.</p>
</div>
<div class="section" id="criteria">
<h2>Criteria<a class="headerlink" href="#criteria" title="Permalink to this headline">¶</a></h2>
<p>Rule criteria are the rule(s) needed to be matched against (logical <code class="docutils literal notranslate"><span class="pre">AND</span></code>). Criteria in the rule
is expressed as:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># more variables</span>
<span class="l l-Scalar l-Scalar-Plain">criteria</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">trigger.payload_parameter_name1</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;regex&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">pattern</span> <span class="p p-Indicator">:</span> <span class="s">&quot;^value$&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">trigger.payload_parameter_name2</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;iequals&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">pattern</span> <span class="p p-Indicator">:</span> <span class="s">&quot;watchevent&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can achieve logical <code class="docutils literal notranslate"><span class="pre">OR</span></code> behavior (either one of multiple criteria expressions needs to
match for the action execution to be triggered) by creating multiple independent rules (one per
criteria expression).</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">type</span></code> specifies which criteria comparison operator to use and <code class="docutils literal notranslate"><span class="pre">pattern</span></code> specifies a pattern
which gets passed to the operator function.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">regex</span></code> case, <code class="docutils literal notranslate"><span class="pre">pattern</span></code> is a regular expression pattern which the trigger value
needs to match.</p>
<p>A list of all the available criteria operators is described below.</p>
<p>If the criteria key contains any special characters (like <code class="docutils literal notranslate"><span class="pre">-</span></code>) then use the dictionary lookup
format for specifying the criteria key. In case of a webhook based rule it is typical for the
header of the posted event to contain such values:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">criteria</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">trigger.headers[&#39;X-Custom-Header&#39;]</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;eq&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">pattern</span> <span class="p p-Indicator">:</span> <span class="s">&quot;customvalue&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pattern</span></code> value can also reference a datastore value using Jinja variable access syntax:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">criteria</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">trigger.payload.build_number</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;equals&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">pattern</span> <span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">st2kv.system.current_build_number</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<p>In this example we are referencing the value of a datastore item with the name
<code class="docutils literal notranslate"><span class="pre">current_build_number</span></code>.</p>
</div>
<div class="section" id="critera-comparison">
<h2>Critera Comparison<a class="headerlink" href="#critera-comparison" title="Permalink to this headline">¶</a></h2>
<p>This section describes all the available operators which can be used in the criteria.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>For Developers:</strong> The criteria comparison functions are defined in
<a class="reference external" href="https://github.com/StackStorm/st2/tree/master/st2common/st2common/operators.py">st2/st2common/st2common/operators.py</a>.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">equals</span></code></td>
<td>Values are equal (for values of arbitrary type).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">nequals</span></code></td>
<td>Values are not equal (for values of arbitrary type).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">lessthan</span></code></td>
<td>Trigger value is less than the provided value.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">greaterthan</span></code></td>
<td>Trigger value is greater than the provided value.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">matchwildcard</span></code></td>
<td>Trigger value matches the provided wildcard-like string. This
operator provides support for Unix shell-style wildcards which
means you can use characters such as <code class="docutils literal notranslate"><span class="pre">*</span></code> and <code class="docutils literal notranslate"><span class="pre">?</span></code>. This
operator is preferred over <code class="docutils literal notranslate"><span class="pre">regex</span></code> for simple string
matches.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">regex</span></code></td>
<td>Trigger value matches the provided regular expression
pattern. This operator behaves like
<code class="docutils literal notranslate"><span class="pre">re.search('pattern',</span> <span class="pre">trigger_value)</span></code>.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">iregex</span></code></td>
<td>Trigger value matches the provided regular expression
pattern case insensitively. This operator behaves like
<code class="docutils literal notranslate"><span class="pre">re.search('pattern',</span> <span class="pre">trigger_value,</span> <span class="pre">re.IGNORECASE)</span></code>.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">matchregex</span></code></td>
<td>Trigger value matches the provided regular expression
pattern. This operator is deprecated in favor of <code class="docutils literal notranslate"><span class="pre">regex</span></code> and
<code class="docutils literal notranslate"><span class="pre">iregex</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">iequals</span></code></td>
<td>String trigger value equals the provided value case
insensitively.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">contains</span></code></td>
<td>Trigger value contains the provided value. Keep in mind that
the trigger value can be either a string or an array (list).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ncontains</span></code></td>
<td>Trigger value does not contain the provided value. Keep in mind
that the trigger value can be either a string or an array (list).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">icontains</span></code></td>
<td>String trigger value contains the provided value case
insensitively.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">incontains</span></code></td>
<td>String trigger value does not contain the provided string
value case insensitively.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">startswith</span></code></td>
<td>Beginning of the string trigger value matches the provided
string value.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">istartswith</span></code></td>
<td>Beginning of the string trigger value matches the provided
string value case insensitively.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">endswith</span></code></td>
<td>End of the string trigger value matches the provided string
value.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">iendswith</span></code></td>
<td>End of the string trigger value matches the provided string
value case insensitively.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">timediff_lt</span></code></td>
<td>Time difference between trigger value and current time is
less than the provided value.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">timediff_gt</span></code></td>
<td>Time difference between trigger value and current time is
greater than the provided value.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">exists</span></code></td>
<td>Key exists in payload.</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">nexists</span></code></td>
<td>Key doesn’t exist in payload.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">inside</span></code></td>
<td>Trigger payload is inside provided value. (e.g. testing if
“<code class="docutils literal notranslate"><span class="pre">trigger.payload</span></code> in <code class="docutils literal notranslate"><span class="pre">provided_value</span></code>”). Reverse of <code class="docutils literal notranslate"><span class="pre">contains</span></code>.
(where <code class="docutils literal notranslate"><span class="pre">contains</span></code> would test for “<code class="docutils literal notranslate"><span class="pre">trigger.payload</span></code> contains
<code class="docutils literal notranslate"><span class="pre">provided_value</span></code>”).</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">ninside</span></code></td>
<td>Trigger payload is not inside provided value. (e.g. testing if
“<code class="docutils literal notranslate"><span class="pre">trigger.payload</span></code> not in <code class="docutils literal notranslate"><span class="pre">provided_value</span></code>”). Reverse of
<code class="docutils literal notranslate"><span class="pre">ncontains</span></code> (where <code class="docutils literal notranslate"><span class="pre">contains</span></code> would test for “<code class="docutils literal notranslate"><span class="pre">trigger.payload</span></code>
does not contain <code class="docutils literal notranslate"><span class="pre">provided_value</span></code>”).</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">search</span></code></td>
<td>Search an array (list) in the trigger payload that matches child
criteria.
See the <a class="reference internal" href="#advanced-comparison">Advanced Comparison</a> section for more information and
examples.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="advanced-comparison">
<h2>Advanced Comparison<a class="headerlink" href="#advanced-comparison" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">search</span></code> operator has some complexity and performance caveats to using
it. Ensure that you understand all of the implications before attempting to use it.
Remember that it is very easy to create complex criteria or a slow rule when you use
it. See the <a class="reference internal" href="#search-operator-caveats">Search Operator Caveats</a> subsection below for more.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">search</span></code> operator is slightly more complex than any of the other operators. It
takes an additional <code class="docutils literal notranslate"><span class="pre">condition</span></code> parameter as well as additional nested criteria that it
applies to each element of the search list.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">condition</span></code> parameter controls how the <code class="docutils literal notranslate"><span class="pre">search</span></code> operator matches the list.
With the <code class="docutils literal notranslate"><span class="pre">any</span></code> condition, if <em>at least one</em> item in the trigger payload list matches
all of the child criteria, the search operator will return a successful match.
Conversely, with the <code class="docutils literal notranslate"><span class="pre">all</span></code> condition, every single item in the trigger payload list
must match all of the child criteria for the search operator to return a successful
match.</p>
<p>Here’s an example criteria that uses the <code class="docutils literal notranslate"><span class="pre">search</span></code> operator with the <code class="docutils literal notranslate"><span class="pre">any</span></code> condition:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">criteria</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">trigger.issue_fields</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;search&quot;</span>
      <span class="c1"># Controls whether all items in the trigger payload must match the child criteria,</span>
      <span class="c1"># or if any single item matching the child criteria is sufficient</span>
      <span class="l l-Scalar l-Scalar-Plain">condition</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">any</span>  <span class="c1"># &lt;- *At least one* item must match all child patterns</span>
      <span class="l l-Scalar l-Scalar-Plain">pattern</span><span class="p p-Indicator">:</span>
        <span class="c1"># Here our context is each item of the list</span>
        <span class="c1"># All of these patterns must match the item for the item to be considered a match</span>
        <span class="c1"># These are simply other operators applied to each item of the list</span>
        <span class="l l-Scalar l-Scalar-Plain">item.field_name</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;equals&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">pattern</span><span class="p p-Indicator">:</span> <span class="s">&quot;Status&quot;</span>

        <span class="l l-Scalar l-Scalar-Plain">item.to_value</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;equals&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">pattern</span><span class="p p-Indicator">:</span> <span class="s">&quot;Approved&quot;</span>
</pre></div>
</div>
<p>This criteria would match the following trigger payload, because the <code class="docutils literal notranslate"><span class="pre">Status</span></code> field was
changed to <code class="docutils literal notranslate"><span class="pre">Approved</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;issue_fields&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Custom&quot;</span><span class="p">,</span>
      <span class="nt">&quot;field_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Status&quot;</span><span class="p">,</span>
      <span class="nt">&quot;to_value&quot;</span><span class="p">:</span> <span class="s2">&quot;Approved&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Custom&quot;</span><span class="p">,</span>
      <span class="nt">&quot;field_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Signed off by&quot;</span><span class="p">,</span>
      <span class="nt">&quot;to_value&quot;</span><span class="p">:</span> <span class="s2">&quot;Stanley&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">condition</span></code> parameter can also be <code class="docutils literal notranslate"><span class="pre">all</span></code>, in which case all of the items in the list
must match all of the child pattern:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="l l-Scalar l-Scalar-Plain">criteria</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">trigger.issue_fields</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;search&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">condition</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>  <span class="c1"># &lt;- *All* items must match all patterns</span>
      <span class="l l-Scalar l-Scalar-Plain">pattern</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">item.field_type</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;equals&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">pattern</span><span class="p p-Indicator">:</span> <span class="s">&quot;Custom&quot;</span>
</pre></div>
</div>
<p>That criteria would also match the trigger payload from above.</p>
<p>However, the following trigger payload would not match with the <code class="docutils literal notranslate"><span class="pre">all</span></code> condition because the
<code class="docutils literal notranslate"><span class="pre">Summary</span></code> field is not a custom field:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;issue_fields&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Built-in&quot;</span><span class="p">,</span>
      <span class="nt">&quot;field_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Summary&quot;</span><span class="p">,</span>
      <span class="nt">&quot;to_value&quot;</span><span class="p">:</span> <span class="s2">&quot;Lorem Ipsum&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Custom&quot;</span><span class="p">,</span>
      <span class="nt">&quot;field_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Status&quot;</span><span class="p">,</span>
      <span class="nt">&quot;to_value&quot;</span><span class="p">:</span> <span class="s2">&quot;Approved&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="nt">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Custom&quot;</span><span class="p">,</span>
      <span class="nt">&quot;field_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Signed off by&quot;</span><span class="p">,</span>
      <span class="nt">&quot;to_value&quot;</span><span class="p">:</span> <span class="s2">&quot;Stanley&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The search operator is very powerful, but more options for the <code class="docutils literal notranslate"><span class="pre">condition</span></code> parameter are
possible. At this point, only the <code class="docutils literal notranslate"><span class="pre">any</span></code> and <code class="docutils literal notranslate"><span class="pre">all</span></code> conditions are implemented, but
future improvements could include:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">count</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">count_gt</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">count_gte</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">count_lt</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">count_lte</span></code></li>
</ul>
<div class="section" id="search-operator-caveats">
<h3>Search Operator Caveats<a class="headerlink" href="#search-operator-caveats" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">search</span></code> operator has some caveats regarding its usage.</p>
<p>First, it turns the rules engine into a recursive descent parser, which can reduce
the performance of the rules engine. So if you have a rule that must remain fast regardless
of system load, you should avoid using the <code class="docutils literal notranslate"><span class="pre">search</span></code> operator unless you absolutely have
to.</p>
<p>Second, the cognitive complexity of the <code class="docutils literal notranslate"><span class="pre">search</span></code> operator makes it a little difficult to
grasp at a glance. If you are sharing your code with others you may need to extensively
document your rules and patterns to explain your intent more clearly.</p>
<p>Lastly, the algorithmic complexity of the <code class="docutils literal notranslate"><span class="pre">search</span></code> operator is much different
than the other operators:</p>
<ul class="simple">
<li>O(n<sub>patterns</sub>) in terms of n<sub>patterns</sub>, the number of child patterns</li>
<li>O(n<sub>payloads</sub>) in terms of n<sub>payloads</sub>, the number of trigger payload fields</li>
</ul>
<p>However, it has O(n<sub>patterns</sub> * n<sub>payloads</sub>) algorithmic complexity overall.</p>
<p>It is therefore <strong>very easy to write a slow rule when using this operator</strong> if you have a
large number of child criteria or if you are searching through a long list in your trigger
payload.</p>
<p>Usage of the <code class="docutils literal notranslate"><span class="pre">search</span></code> operator should largely be limited to trying to match a small number
of child criteria, and a small number of expected payload list items. However, as slow as
the <code class="docutils literal notranslate"><span class="pre">search</span></code> operator might make the rules engine, it will still be faster and more
lightweight to use the <code class="docutils literal notranslate"><span class="pre">search</span></code> operator in your rules than it would be to run the rules
engine, unconditionally run a workflow, and do the filtering there.</p>
</div>
</div>
<div class="section" id="action">
<h2>Action<a class="headerlink" href="#action" title="Permalink to this headline">¶</a></h2>
<p>This section describes the subsequent action/workflow to be executed on successful match of a
trigger and an optional set of criteria. At a minimum, a rule should specify the action to
execute. A rule can also specify parameters that will be supplied to an action upon execution.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>                                <span class="c1"># required</span>
    <span class="l l-Scalar l-Scalar-Plain">ref</span><span class="p p-Indicator">:</span> <span class="s">&quot;action_ref&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>                        <span class="c1"># optional</span>
        <span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="s">&quot;bar&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">baz</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
</div>
<div class="section" id="variable-interpolation">
<h2>Variable Interpolation<a class="headerlink" href="#variable-interpolation" title="Permalink to this headline">¶</a></h2>
<p>Occasionally, it will be necessary to pass along context of a trigger to an action when a rule is matched. The rules engine is able to interpolate variables by leveraging <a class="reference external" href="http://jinja.pocoo.org/docs/dev/templates/">Jinja templating syntax</a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">ref</span><span class="p p-Indicator">:</span> <span class="s">&quot;action_ref&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="s">&quot;bar&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">baz</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">trigger.payload_parameter_1</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The value of a trigger attribute can be <code class="docutils literal notranslate"><span class="pre">null</span></code> and <code class="docutils literal notranslate"><span class="pre">None</span></code>. It is also a valid value of the action parameter in question. You need to use the <code class="docutils literal notranslate"><span class="pre">use_none</span></code> Jinja template filter to make sure that <code class="docutils literal notranslate"><span class="pre">null</span></code>/<code class="docutils literal notranslate"><span class="pre">None</span></code> values are correctly serialized when invoking an action.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">ref</span><span class="p p-Indicator">:</span> <span class="s">&quot;action_ref&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">foo</span><span class="p p-Indicator">:</span> <span class="s">&quot;bar&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">baz</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">trigger.payload_parameter_1</span><span class="nv"> </span><span class="s">|</span><span class="nv"> </span><span class="s">use_none</span><span class="nv"> </span><span class="s">}}&quot;</span>
</pre></div>
</div>
<p>This workaround is required because of the limitation of our current Jinja templating system which
doesn’t support non-string types. We are forced to perform type casting based on the action
parameters definition before invoking an action.</p>
</div>
<div class="section" id="managing-rules">
<h2>Managing Rules<a class="headerlink" href="#managing-rules" title="Permalink to this headline">¶</a></h2>
<p>To deploy a rule, use the CLI command: <code class="docutils literal notranslate"><span class="pre">st2</span> <span class="pre">rule</span> <span class="pre">create</span> <span class="pre">${PATH_TO_RULE}</span></code>,  for example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2 rule create /usr/share/doc/st2/examples/rules/sample_rule_with_webhook.yaml
</pre></div>
</div>
<p>To reload all the rules, use <code class="docutils literal notranslate"><span class="pre">st2ctl</span> <span class="pre">reload</span> <span class="pre">--register-rules</span></code>.</p>
<p>If a rule with the same name already exists, the above command will return an error:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ERROR: <span class="m">409</span> Client Error: Conflict
MESSAGE: Tried to save duplicate unique keys <span class="o">(</span>E11000 duplicate key error index: st2.rule_d_b.<span class="nv">$uid_1</span>  dup key: <span class="o">{</span> : <span class="s2">&quot;rule:examples:sample_rule_with_webhook&quot;</span> <span class="o">})</span>
</pre></div>
</div>
<p>To update the rule, edit the rule definition file and run the command: <code class="docutils literal notranslate"><span class="pre">st2</span> <span class="pre">rule</span> <span class="pre">update</span></code>, as in
the following example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2 rule update examples.sample_rule_with_webhook /usr/share/doc/st2/examples/rules/sample_rule_with_webhook.yaml
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>Hint:</strong> It is a good practice to always edit the original rule file, so that keep your infrastructure in code. You still can get the rule definition from the system by <code class="docutils literal notranslate"><span class="pre">st2</span> <span class="pre">rule</span> <span class="pre">get</span> <span class="pre">&lt;rule</span> <span class="pre">name&gt;</span> <span class="pre">-j</span></code>, update it, and load it back.</p>
</div>
<p>To see all the rules, or to get an individual rule, use commands below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2 rule list
st2 rule get examples.sample_rule_with_webhook
</pre></div>
</div>
<p>To undeploy a rule, run <code class="docutils literal notranslate"><span class="pre">st2</span> <span class="pre">rule</span> <span class="pre">delete</span> <span class="pre">${RULE_NAME_OR_ID}</span></code>. For example, to undeploy the
<code class="docutils literal notranslate"><span class="pre">examples.sample_rule_with_webhook</span></code> rule we deployed previously, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2 rule delete examples.sample_rule_with_webhook
</pre></div>
</div>
</div>
<div class="section" id="rule-location">
<h2>Rule Location<a class="headerlink" href="#rule-location" title="Permalink to this headline">¶</a></h2>
<p>Custom rules can be placed in any accessible folder on local system. By convention, custom rules
are placed in the <code class="docutils literal notranslate"><span class="pre">/opt/stackstorm/packs/&lt;pack_name&gt;/rules</span></code> directory.</p>
</div>
<div class="section" id="testing-rules">
<span id="id1"></span><h2>Testing Rules<a class="headerlink" href="#testing-rules" title="Permalink to this headline">¶</a></h2>
<p>To make testing rules easier we provide a <code class="docutils literal notranslate"><span class="pre">st2-rule-tester</span></code> tool which can evaluate rules against
trigger instances without running any of the StackStorm components.</p>
<p>The tool works by taking a path to the file which contains rule definition and a file which
contains a trigger instance definition:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2-rule-tester --rule<span class="o">=</span><span class="si">${</span><span class="nv">RULE_FILE</span><span class="si">}</span> --trigger-instance<span class="o">=</span><span class="si">${</span><span class="nv">TRIGGER_INSTANCE_DEFINITION</span><span class="si">}</span> --config-file<span class="o">=</span>/etc/st2/st2.conf
<span class="nb">echo</span> <span class="nv">$?</span>
</pre></div>
</div>
<p>Both files need to contain definitions in YAML or JSON format. For the rule, you can use the same
file you are planning to deploy.</p>
<p>For the trigger instance, the definition file needs contain the following keys:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">trigger</span></code> - Full reference to the trigger (e.g. <code class="docutils literal notranslate"><span class="pre">core.st2.IntervalTimer</span></code>,
<code class="docutils literal notranslate"><span class="pre">slack.message</span></code>, <code class="docutils literal notranslate"><span class="pre">irc.pubmsg</span></code>, <code class="docutils literal notranslate"><span class="pre">twitter.matched_tweet</span></code>, etc.).</li>
<li><code class="docutils literal notranslate"><span class="pre">payload</span></code> - Trigger payload. The payload itself is specific to the trigger in question. To
figure out the trigger structure you can look at the pack README or look for the
<code class="docutils literal notranslate"><span class="pre">trigger_types</span></code> section in the sensor metadata file which is located in the
<code class="docutils literal notranslate"><span class="pre">packs/&lt;pack_name&gt;/sensors/</span></code> directory.</li>
</ul>
<p>If the trigger instance matches, <code class="docutils literal notranslate"><span class="pre">===</span> <span class="pre">RULE</span> <span class="pre">MATCHES</span> <span class="pre">===</span></code> will be printed and the tool will exit
with <code class="docutils literal notranslate"><span class="pre">0</span></code> status code. If the rule doesn’t match, <code class="docutils literal notranslate"><span class="pre">===</span> <span class="pre">RULE</span> <span class="pre">DOES</span> <span class="pre">NOT</span> <span class="pre">MATCH</span> <span class="pre">===</span></code> will be printed
and the tool will exit with status code <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>Here are some examples of how to use the tool:</p>
<p><code class="docutils literal notranslate"><span class="pre">my_rule.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
  <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="s">&quot;relayed_matched_irc_message&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">pack</span><span class="p p-Indicator">:</span> <span class="s">&quot;irc&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="s">&quot;Relay</span><span class="nv"> </span><span class="s">IRC</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Slack</span><span class="nv"> </span><span class="s">if</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">message</span><span class="nv"> </span><span class="s">contains</span><span class="nv"> </span><span class="s">word</span><span class="nv"> </span><span class="s">StackStorm&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>

  <span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;irc.pubmsg&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{}</span>

  <span class="l l-Scalar l-Scalar-Plain">criteria</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">trigger.message</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;icontains&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">pattern</span><span class="p p-Indicator">:</span> <span class="s">&quot;StackStorm&quot;</span>

  <span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">ref</span><span class="p p-Indicator">:</span> <span class="s">&quot;slack.post_message&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">message</span><span class="p p-Indicator">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">trigger.source.nick</span><span class="nv"> </span><span class="s">}}</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.channel</span><span class="nv"> </span><span class="s">}}:</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">trigger.message</span><span class="nv"> </span><span class="s">}}&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">channel</span><span class="p p-Indicator">:</span> <span class="s">&quot;#irc-relay&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">trigger_instance_1.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
    <span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span> <span class="s">&quot;irc.pubmsg&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">payload</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">source</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">nick</span><span class="p p-Indicator">:</span> <span class="s">&quot;Kami_&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span> <span class="s">&quot;gateway/web/irccloud.com/x-uvv&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">channel</span><span class="p p-Indicator">:</span> <span class="s">&quot;#stackstorm&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">timestamp</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1419166748,</span>
      <span class="l l-Scalar l-Scalar-Plain">message</span><span class="p p-Indicator">:</span> <span class="s">&quot;stackstorm</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">cool!&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">trigger_instance_2.yaml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
    <span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span> <span class="s">&quot;irc.pubmsg&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">payload</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">source</span><span class="p p-Indicator">:</span>
          <span class="l l-Scalar l-Scalar-Plain">nick</span><span class="p p-Indicator">:</span> <span class="s">&quot;Kami_&quot;</span>
          <span class="l l-Scalar l-Scalar-Plain">host</span><span class="p p-Indicator">:</span> <span class="s">&quot;gateway/web/irccloud.com/x-uvv&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">channel</span><span class="p p-Indicator">:</span> <span class="s">&quot;#stackstorm&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">timestamp</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1419166748,</span>
      <span class="l l-Scalar l-Scalar-Plain">message</span><span class="p p-Indicator">:</span> <span class="s">&quot;blah</span><span class="nv"> </span><span class="s">blah&quot;</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2-rule-tester --rule<span class="o">=</span>./my_rule.yaml --trigger-instance<span class="o">=</span>./trigger_instance_1.yaml
<span class="nb">echo</span> <span class="nv">$?</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">2015</span>-12-11 <span class="m">14</span>:35:03,249 INFO <span class="o">[</span>-<span class="o">]</span> Connecting to database <span class="s2">&quot;st2&quot;</span> @ <span class="s2">&quot;0.0.0.0:27017&quot;</span> as user <span class="s2">&quot;None&quot;</span>.
<span class="m">2015</span>-12-11 <span class="m">14</span>:35:03,318 INFO <span class="o">[</span>-<span class="o">]</span> Validating rule irc.relayed_matched_irc_message <span class="k">for</span> pubmsg.
<span class="m">2015</span>-12-11 <span class="m">14</span>:35:03,331 INFO <span class="o">[</span>-<span class="o">]</span> <span class="m">1</span> rule<span class="o">(</span>s<span class="o">)</span> found to enforce <span class="k">for</span> pubmsg.
<span class="m">2015</span>-12-11 <span class="m">14</span>:35:03,333 INFO <span class="o">[</span>-<span class="o">]</span> <span class="o">===</span> RULE <span class="nv">MATCHES</span> <span class="o">===</span>
<span class="m">0</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2-rule-tester --rule<span class="o">=</span>./my_rule.yaml --trigger-instance<span class="o">=</span>./trigger_instance_2.yaml
<span class="nb">echo</span> <span class="nv">$?</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">2015</span>-12-11 <span class="m">14</span>:35:57,380 INFO <span class="o">[</span>-<span class="o">]</span> Connecting to database <span class="s2">&quot;st2&quot;</span> @ <span class="s2">&quot;0.0.0.0:27017&quot;</span> as user <span class="s2">&quot;None&quot;</span>.
<span class="m">2015</span>-12-11 <span class="m">14</span>:35:57,444 INFO <span class="o">[</span>-<span class="o">]</span> Validating rule irc.relayed_matched_irc_message <span class="k">for</span> pubmsg.
<span class="m">2015</span>-12-11 <span class="m">14</span>:35:57,459 INFO <span class="o">[</span>-<span class="o">]</span> Validation <span class="k">for</span> rule irc.relayed_matched_irc_message failed on -
  key: trigger.message
  pattern: StackStorm
  type: icontains
  payload: blah blah
<span class="m">2015</span>-12-11 <span class="m">14</span>:35:57,461 INFO <span class="o">[</span>-<span class="o">]</span> <span class="m">0</span> rule<span class="o">(</span>s<span class="o">)</span> found to enforce <span class="k">for</span> pubmsg.
<span class="m">2015</span>-12-11 <span class="m">14</span>:35:57,462 INFO <span class="o">[</span>-<span class="o">]</span> <span class="o">===</span> RULE DOES NOT <span class="nv">MATCH</span> <span class="o">===</span>
<span class="m">1</span>
</pre></div>
</div>
<p id="ref-rule-tester-post-mortem-debug"><code class="docutils literal notranslate"><span class="pre">st2-rule-tester</span></code> further allows a kind of post-mortem debugging where you can answer the
question <code class="docutils literal notranslate"><span class="pre">Why</span> <span class="pre">did</span> <span class="pre">my</span> <span class="pre">rule</span> <span class="pre">not</span> <span class="pre">match</span> <span class="pre">the</span> <span class="pre">trigger</span> <span class="pre">that</span> <span class="pre">just</span> <span class="pre">fired?</span></code>. This means there is a known
<code class="docutils literal notranslate"><span class="pre">Rule</span></code> identifiable by its reference loaded in StackStorm and similarly a TriggerInstance with a
known id.</p>
<p>Lets say we have rule reference <code class="docutils literal notranslate"><span class="pre">my_pack.fire_on_execution</span></code> and a trigger instance
<code class="docutils literal notranslate"><span class="pre">566b4be632ed352a09cd347d</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2-rule-tester --rule-ref<span class="o">=</span>my_pack.fire_on_execution --trigger-instance-id<span class="o">=</span>566b4be632ed352a09cd347d --config-file<span class="o">=</span>/etc/st2/st2.conf
<span class="nb">echo</span> <span class="nv">$?</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">2015</span>-12-11 <span class="m">15</span>:24:16,459 INFO <span class="o">[</span>-<span class="o">]</span> Connecting to database <span class="s2">&quot;st2&quot;</span> @ <span class="s2">&quot;0.0.0.0:27017&quot;</span> as user <span class="s2">&quot;None&quot;</span>.
<span class="m">2015</span>-12-11 <span class="m">15</span>:24:16,527 INFO <span class="o">[</span>-<span class="o">]</span> Validating rule my_pack.fire_on_execution <span class="k">for</span> st2.generic.actiontrigger.
<span class="m">2015</span>-12-11 <span class="m">15</span>:24:16,542 INFO <span class="o">[</span>-<span class="o">]</span> Validation <span class="k">for</span> rule my_pack.fire_on_execution failed on -
  key: trigger.status
  pattern: succeeded
  type: iequals
  payload: failed
<span class="m">2015</span>-12-11 <span class="m">15</span>:24:16,545 INFO <span class="o">[</span>-<span class="o">]</span> <span class="m">0</span> rule<span class="o">(</span>s<span class="o">)</span> found to enforce <span class="k">for</span> st2.generic.actiontrigger.
<span class="m">2015</span>-12-11 <span class="m">15</span>:24:16,546 INFO <span class="o">[</span>-<span class="o">]</span> <span class="o">===</span> RULE DOES NOT <span class="nv">MATCH</span> <span class="o">===</span>
</pre></div>
</div>
<p>The output also identifies the source of the mismatch i.e. whether it was the trigger type that
did not match or one of the criteria.</p>
<p>If you are debugging and would like to see the list of trigger instances sent to StackStorm,
you can use the CLI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2 trigger-instance list
</pre></div>
</div>
<p>You can also filter trigger instances by trigger:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2 trigger-instance list --trigger<span class="o">=</span>core.f9e09284-b2b1-4127-aedd-dcde7a752819
</pre></div>
</div>
<p>Also, you can get trigger instances within a time range by using <code class="docutils literal notranslate"><span class="pre">timestamp_gt</span></code> and
<code class="docutils literal notranslate"><span class="pre">timestamp_lt</span></code> filter options:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2 trigger-instance list --trigger<span class="o">=</span><span class="s2">&quot;core.f9e09284-b2b1-4127-aedd-dcde7a752819&quot;</span> -timestamp_gt<span class="o">=</span><span class="m">2015</span>-06-01T12:00:00Z -timestamp_lt<span class="o">=</span><span class="m">2015</span>-06-02T12:00:00Z
</pre></div>
</div>
<p>Note that you can also specify one of <code class="docutils literal notranslate"><span class="pre">timestamp_lt</span></code> or <code class="docutils literal notranslate"><span class="pre">timestamp_gt</span></code> too. You can get
details about a trigger instance by using <code class="docutils literal notranslate"><span class="pre">get</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2 trigger-instance get 556e135232ed35569ff23238
</pre></div>
</div>
<p>Something that might be useful in debugging a rule is to re-send a trigger instance into StackStorm. You
can use the <code class="docutils literal notranslate"><span class="pre">re-emit</span></code> command for that.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>st2 trigger-instance re-emit 556e135232ed35569ff23238
</pre></div>
</div>
</div>
<div class="section" id="timers">
<span id="ref-rule-timers"></span><h2>Timers<a class="headerlink" href="#timers" title="Permalink to this headline">¶</a></h2>
<p>Timers allow running a particular action repeatedly based on a defined time interval, or at one
particular date and time. You can think of them as cron jobs, but with additional flexibility,
e.g. the ability to run actions only once, at the provided date and time.</p>
<p>Currently, we support the following timer trigger types:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">core.st2.IntervalTimer</span></code> - Run an action at predefined time intervals (e.g. every 30 seconds,
every 24 hours, every week, etc.).</li>
<li><code class="docutils literal notranslate"><span class="pre">core.st2.DateTimer</span></code> - Run an action at the specified date and time.</li>
<li><code class="docutils literal notranslate"><span class="pre">core.st2.CronTimer</span></code> - Run an action when current time matches the time constraint
defined in UNIX cron format.</li>
</ul>
<p>Timers are implemented as triggers, which means you can use them inside the rules. In the section
below, you can find some examples of how to use timers in the rule definitions.</p>
<div class="section" id="core-st2-intervaltimer">
<h3>core.st2.IntervalTimer<a class="headerlink" href="#core-st2-intervaltimer" title="Permalink to this headline">¶</a></h3>
<p>Available parameters:<code class="docutils literal notranslate"><span class="pre">unit</span></code>, <code class="docutils literal notranslate"><span class="pre">delta</span></code>.</p>
<p>Supported values for <code class="docutils literal notranslate"><span class="pre">unit</span></code> parameter: <code class="docutils literal notranslate"><span class="pre">seconds</span></code>, <code class="docutils literal notranslate"><span class="pre">minutes</span></code>, <code class="docutils literal notranslate"><span class="pre">hours</span></code>, <code class="docutils literal notranslate"><span class="pre">days</span></code>, <code class="docutils literal notranslate"><span class="pre">weeks</span></code>.</p>
<div class="section" id="run-action-every-30-seconds">
<h4>Run action every 30 seconds<a class="headerlink" href="#run-action-every-30-seconds" title="Permalink to this headline">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;core.st2.IntervalTimer&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">unit</span><span class="p p-Indicator">:</span> <span class="s">&quot;seconds&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">delta</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">30</span>

<span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
<div class="section" id="run-action-every-24-hours">
<h4>Run action every 24 hours<a class="headerlink" href="#run-action-every-24-hours" title="Permalink to this headline">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;core.st2.IntervalTimer&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">unit</span><span class="p p-Indicator">:</span> <span class="s">&quot;hours&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">delta</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">24</span>

<span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
<div class="section" id="run-action-every-2-weeks">
<h4>Run action every 2 weeks<a class="headerlink" href="#run-action-every-2-weeks" title="Permalink to this headline">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;core.st2.IntervalTimer&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">unit</span><span class="p p-Indicator">:</span> <span class="s">&quot;weeks&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">delta</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="core-st2-datetimer">
<h3>core.st2.DateTimer<a class="headerlink" href="#core-st2-datetimer" title="Permalink to this headline">¶</a></h3>
<p>Available parameters: <code class="docutils literal notranslate"><span class="pre">timezone</span></code>, <code class="docutils literal notranslate"><span class="pre">date</span></code>.</p>
<div class="section" id="run-action-on-a-specific-date">
<h4>Run action on a specific date<a class="headerlink" href="#run-action-on-a-specific-date" title="Permalink to this headline">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;core.st2.IntervalTimer&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">timezone</span><span class="p p-Indicator">:</span> <span class="s">&quot;UTC&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">date</span><span class="p p-Indicator">:</span> <span class="s">&quot;2014-12-31</span><span class="nv"> </span><span class="s">23:59:59&quot;</span>

<span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="core-st2-crontimer">
<h3>core.st2.CronTimer<a class="headerlink" href="#core-st2-crontimer" title="Permalink to this headline">¶</a></h3>
<p>This timer supports cron-like expressions. For a full list of supported expressions, please see
<a class="reference external" href="http://apscheduler.readthedocs.org/en/3.0/modules/triggers/cron.html#api">http://apscheduler.readthedocs.org/en/3.0/modules/triggers/cron.html#api</a>.</p>
<p>By default, if no value is provided for a particular parameter, <code class="docutils literal notranslate"><span class="pre">*</span></code> is assumed, which means
fire on every value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unlike with cron where the first day (<code class="docutils literal notranslate"><span class="pre">0</span></code>) in <code class="docutils literal notranslate"><span class="pre">day_of_week</span></code> is a Sunday, in StackStorm CronTimer
first day of the week is always Monday. To make it more explicit and avoid confusion, you are
encouraged to use the name of the weekdays instead (e.g. <code class="docutils literal notranslate"><span class="pre">mon-fri</span></code> instead of <code class="docutils literal notranslate"><span class="pre">0-4</span></code>, or in
cron case, <code class="docutils literal notranslate"><span class="pre">1-5</span></code>).</p>
</div>
<p>Available parameter <code class="docutils literal notranslate"><span class="pre">timezone</span></code>, <code class="docutils literal notranslate"><span class="pre">year</span></code>, <code class="docutils literal notranslate"><span class="pre">month</span></code>, <code class="docutils literal notranslate"><span class="pre">day</span></code>, <code class="docutils literal notranslate"><span class="pre">week</span></code>, <code class="docutils literal notranslate"><span class="pre">day_of_week</span></code>,
<code class="docutils literal notranslate"><span class="pre">hour</span></code>, <code class="docutils literal notranslate"><span class="pre">minute</span></code>, <code class="docutils literal notranslate"><span class="pre">second</span></code>.
Note <code class="docutils literal notranslate"><span class="pre">timezone</span></code> use the pytz format, e.g. <code class="docutils literal notranslate"><span class="pre">Asia/Shanghai</span></code>.</p>
<div class="section" id="run-action-every-sunday-at-midnight">
<h4>Run action every Sunday at midnight<a class="headerlink" href="#run-action-every-sunday-at-midnight" title="Permalink to this headline">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;core.st2.CronTimer&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">timezone</span><span class="p p-Indicator">:</span> <span class="s">&quot;UTC&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">day_of_week</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">6</span> <span class="c1"># or day_of_week: &quot;sun&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">hour</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
      <span class="l l-Scalar l-Scalar-Plain">minute</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
      <span class="l l-Scalar l-Scalar-Plain">second</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
<div class="section" id="run-action-every-day-at-midnight">
<h4>Run action every day at midnight<a class="headerlink" href="#run-action-every-day-at-midnight" title="Permalink to this headline">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;core.st2.CronTimer&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">timezone</span><span class="p p-Indicator">:</span> <span class="s">&quot;UTC&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">day_of_week</span><span class="p p-Indicator">:</span> <span class="s">&quot;*&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">hour</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
      <span class="l l-Scalar l-Scalar-Plain">minute</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
      <span class="l l-Scalar l-Scalar-Plain">second</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>As noted above, <code class="docutils literal notranslate"><span class="pre">*</span></code> is assumed if no value is provided for a particular parameter, which means
the following is equivalent to the above:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;core.st2.CronTimer&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">timezone</span><span class="p p-Indicator">:</span> <span class="s">&quot;UTC&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">hour</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
      <span class="l l-Scalar l-Scalar-Plain">minute</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
      <span class="l l-Scalar l-Scalar-Plain">second</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
<div class="section" id="run-action-monday-through-friday-every-day-except-weekends-at-midnight">
<h4>Run action Monday through Friday (every day except weekends) at midnight<a class="headerlink" href="#run-action-monday-through-friday-every-day-except-weekends-at-midnight" title="Permalink to this headline">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;core.st2.CronTimer&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">timezone</span><span class="p p-Indicator">:</span> <span class="s">&quot;UTC&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">day_of_week</span><span class="p p-Indicator">:</span> <span class="s">&quot;mon-fri&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">hour</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
      <span class="l l-Scalar l-Scalar-Plain">minute</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
      <span class="l l-Scalar l-Scalar-Plain">second</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
</div>
<div class="section" id="run-action-every-full-hour-every-day-of-the-week">
<h4>Run action every full hour every day of the week<a class="headerlink" href="#run-action-every-full-hour-every-day-of-the-week" title="Permalink to this headline">¶</a></h4>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nn">...</span>

<span class="l l-Scalar l-Scalar-Plain">trigger</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="s">&quot;core.st2.CronTimer&quot;</span>
  <span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">timezone</span><span class="p p-Indicator">:</span> <span class="s">&quot;UTC&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">hour</span><span class="p p-Indicator">:</span> <span class="s">&quot;*&quot;</span>
      <span class="l l-Scalar l-Scalar-Plain">minute</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
      <span class="l l-Scalar l-Scalar-Plain">second</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="l l-Scalar l-Scalar-Plain">action</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<hr class="docutils" />
<p class="rubric">What’s Next?</p>
<ul class="simple">
<li>Explore automations in the <a class="reference external" href="https://exchange.stackstorm.org">StackStorm Exchange</a>.</li>
<li>Learn more about <a class="reference internal" href="sensors.html"><span class="doc">Sensors and Triggers</span></a>.</li>
<li>Check out <a class="reference external" href="https://stackstorm.com/category/tutorials/">tutorials on stackstorm.com</a> - a
growing set of practical examples of automating with StackStorm.</li>
</ul>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="workflows.html" class="btn btn-neutral float-right" title="Workflows">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sensors.html" class="btn btn-neutral" title="Sensors and Triggers"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014 - 2018, StackStorm.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  
  <div id="versions"></div>

  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.8dev',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  

  <script type="text/javascript" src="/_static/js/versions.js"></script> 

</body>
</html>